!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?module.exports=factory():"function"==typeof define&&define.amd?define(factory):global.jspdf=factory()}(this,function(){"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},jsPDF=(function(){function AwaitValue(value){this.value=value}function AsyncGenerator(gen){function resume(key,arg){try{var result=gen[key](arg),value=result.value;value instanceof AwaitValue?Promise.resolve(value.value).then(function(arg){resume("next",arg)},function(arg){resume("throw",arg)}):settle(result.done?"return":"normal",result.value)}catch(err){settle("throw",err)}}function settle(type,value){switch(type){case"return":front.resolve({value:value,done:!0});break;case"throw":front.reject(value);break;default:front.resolve({value:value,done:!1})}(front=front.next)?resume(front.key,front.arg):back=null}var front,back;this._invoke=function(key,arg){return new Promise(function(resolve,reject){var request={key:key,arg:arg,resolve:resolve,reject:reject,next:null};back?back=back.next=request:(front=back=request,resume(key,arg))})},"function"!=typeof gen.return&&(this.return=void 0)}"function"==typeof Symbol&&Symbol.asyncIterator&&(AsyncGenerator.prototype[Symbol.asyncIterator]=function(){return this}),AsyncGenerator.prototype.next=function(arg){return this._invoke("next",arg)},AsyncGenerator.prototype.throw=function(arg){return this._invoke("throw",arg)},AsyncGenerator.prototype.return=function(arg){return this._invoke("return",arg)}}(),function(global){function jsPDF(orientation,unit,format,compressPdf){var options={};"object"===(void 0===orientation?"undefined":_typeof(orientation))&&(orientation=(options=orientation).orientation,unit=options.unit||unit,format=options.format||format,compressPdf=options.compress||options.compressPdf||compressPdf),unit=unit||"mm",format=format||"a4",orientation=(""+(orientation||"P")).toLowerCase();(""+format).toLowerCase();var activeFontKey,k,tmp,currentPage,pageWidth,pageHeight,pageMode,zoomMode,layoutMode,compress=!!compressPdf&&"function"==typeof Uint8Array,textColor=options.textColor||"0 g",drawColor=options.drawColor||"0 G",activeFontSize=options.fontSize||16,lineHeightProportion=options.lineHeight||1.15,lineWidth=options.lineWidth||.200025,objectNumber=2,outToPages=!1,offsets=[],fonts={},fontmap={},page=0,pages=[],pagesContext=[],pagedim=[],content=[],additionalObjects=[],lineCapID=0,lineJoinID=0,content_length=0,documentProperties={title:"",subject:"",author:"",keywords:"",creator:""},API={},events=new function(context){var topics={};this.subscribe=function(topic,callback,once){if("function"!=typeof callback)return!1;topics.hasOwnProperty(topic)||(topics[topic]={});var id=Math.random().toString(35);return topics[topic][id]=[callback,!!once],id},this.unsubscribe=function(token){for(var topic in topics)if(topics[topic][token])return delete topics[topic][token],!0;return!1},this.publish=function(topic){if(topics.hasOwnProperty(topic)){var args=Array.prototype.slice.call(arguments,1),idr=[];for(var id in topics[topic]){var sub=topics[topic][id];try{sub[0].apply(context,args)}catch(ex){global.console&&console.error("jsPDF PubSub Error",ex.message,ex)}sub[1]&&idr.push(id)}idr.length&&idr.forEach(this.unsubscribe)}}}(API),hotfixes=options.hotfixes||[],f2=function(number){return number.toFixed(2)},f3=function(number){return number.toFixed(3)},padd2=function(number){return("0"+parseInt(number)).slice(-2)},out=function(string){outToPages?pages[currentPage].push(string):(content_length+=string.length+1,content.push(string))},newObject=function(){return objectNumber++,offsets[objectNumber]=content_length,out(objectNumber+" 0 obj"),objectNumber},putStream=function(str){out("stream"),out(str),out("endstream")},putFont=function(font){font.objectNumber=newObject(),out("<</BaseFont/"+font.PostScriptName+"/Type/Font"),"string"==typeof font.encoding&&out("/Encoding/"+font.encoding),out("/Subtype/Type1>>"),out("endobj")},putResourceDictionary=function(){out("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),out("/Font <<");for(var fontKey in fonts)fonts.hasOwnProperty(fontKey)&&out("/"+fontKey+" "+fonts[fontKey].objectNumber+" 0 R");out(">>"),out("/XObject <<"),events.publish("putXobjectDict"),out(">>")},putResources=function(){!function(){for(var fontKey in fonts)fonts.hasOwnProperty(fontKey)&&putFont(fonts[fontKey])}(),events.publish("putResources"),offsets[2]=content_length,out("2 0 obj"),out("<<"),putResourceDictionary(),out(">>"),out("endobj"),events.publish("postPutResources")},addToFontDictionary=function(fontKey,fontName,fontStyle){fontmap.hasOwnProperty(fontName)||(fontmap[fontName]={}),fontmap[fontName][fontStyle]=fontKey},addFont=function(PostScriptName,fontName,fontStyle,encoding){var fontKey="F"+(Object.keys(fonts).length+1).toString(10),font=fonts[fontKey]={id:fontKey,PostScriptName:PostScriptName,fontName:fontName,fontStyle:fontStyle,encoding:encoding,metadata:{}};return addToFontDictionary(fontKey,fontName,fontStyle),events.publish("addFont",font),fontKey},pdfEscape=function(text,flags){return function(text,flags){var i,l,sourceEncoding,encodingBlock,outputEncoding,newtext,isUnicode,ch,bch;if(flags=flags||{},sourceEncoding=flags.sourceEncoding||"Unicode",outputEncoding=flags.outputEncoding,(flags.autoencode||outputEncoding)&&fonts[activeFontKey].metadata&&fonts[activeFontKey].metadata[sourceEncoding]&&fonts[activeFontKey].metadata[sourceEncoding].encoding&&(encodingBlock=fonts[activeFontKey].metadata[sourceEncoding].encoding,!outputEncoding&&fonts[activeFontKey].encoding&&(outputEncoding=fonts[activeFontKey].encoding),!outputEncoding&&encodingBlock.codePages&&(outputEncoding=encodingBlock.codePages[0]),"string"==typeof outputEncoding&&(outputEncoding=encodingBlock[outputEncoding]),outputEncoding)){for(isUnicode=!1,newtext=[],i=0,l=text.length;i<l;i++)(ch=outputEncoding[text.charCodeAt(i)])?newtext.push(String.fromCharCode(ch)):newtext.push(text[i]),newtext[i].charCodeAt(0)>>8&&(isUnicode=!0);text=newtext.join("")}for(i=text.length;void 0===isUnicode&&0!==i;)text.charCodeAt(i-1)>>8&&(isUnicode=!0),i--;if(!isUnicode)return text;for(newtext=flags.noBOM?[]:[254,255],i=0,l=text.length;i<l;i++){if(ch=text.charCodeAt(i),(bch=ch>>8)>>8)throw new Error("Character at position "+i+" of string '"+text+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");newtext.push(bch),newtext.push(ch-(bch<<8))}return String.fromCharCode.apply(void 0,newtext)}(text,flags).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},_addPage=function(){(function(width,height){var orientation="string"==typeof height&&height.toLowerCase();if("string"==typeof width){var format=width.toLowerCase();pageFormats.hasOwnProperty(format)&&(width=pageFormats[format][0]/k,height=pageFormats[format][1]/k)}if(Array.isArray(width)&&(height=width[1],width=width[0]),orientation){switch(orientation.substr(0,1)){case"l":height>width&&(orientation="s");break;case"p":width>height&&(orientation="s")}"s"===orientation&&(tmp=width,width=height,height=tmp)}outToPages=!0,pages[++page]=[],pagedim[page]={width:Number(width)||pageWidth,height:Number(height)||pageHeight},pagesContext[page]={},_setPage(page)}).apply(this,arguments),out(f2(lineWidth*k)+" w"),out(drawColor),0!==lineCapID&&out(lineCapID+" J"),0!==lineJoinID&&out(lineJoinID+" j"),events.publish("addPage",{pageNumber:page})},_setPage=function(n){n>0&&n<=page&&(currentPage=n,pageWidth=pagedim[n].width,pageHeight=pagedim[n].height)},_getFont=function(fontName,fontStyle){var key;switch(fontName=void 0!==fontName?fontName:fonts[activeFontKey].fontName,fontStyle=void 0!==fontStyle?fontStyle:fonts[activeFontKey].fontStyle,void 0!==fontName&&(fontName=fontName.toLowerCase()),fontName){case"sans-serif":case"verdana":case"arial":case"helvetica":fontName="helvetica";break;case"fixed":case"monospace":case"terminal":case"courier":fontName="courier";break;case"serif":case"cursive":case"fantasy":default:fontName="times"}try{key=fontmap[fontName][fontStyle]}catch(e){}return key||null==(key=fontmap.times[fontStyle])&&(key=fontmap.times.normal),key},buildDocument=function(){outToPages=!1,objectNumber=2,content_length=0,content=[],offsets=[],additionalObjects=[],events.publish("buildDocument"),out("%PDF-"+pdfVersion),function(){var n,p,arr,i,deflater,adler32,adler32cs,wPt,hPt,pageObjectNumbers=[];for(adler32cs=global.adler32cs||jsPDF.adler32cs,compress&&void 0===adler32cs&&(compress=!1),n=1;n<=page;n++){if(pageObjectNumbers.push(newObject()),wPt=(pageWidth=pagedim[n].width)*k,hPt=(pageHeight=pagedim[n].height)*k,out("<</Type /Page"),out("/Parent 1 0 R"),out("/Resources 2 0 R"),out("/MediaBox [0 0 "+f2(wPt)+" "+f2(hPt)+"]"),events.publish("putPage",{pageNumber:n,page:pages[n]}),out("/Contents "+(objectNumber+1)+" 0 R"),out(">>"),out("endobj"),p=pages[n].join("\n"),newObject(),compress){for(arr=[],i=p.length;i--;)arr[i]=p.charCodeAt(i);adler32=adler32cs.from(p),(deflater=new Deflater(6)).append(new Uint8Array(arr)),p=deflater.flush(),(arr=new Uint8Array(p.length+6)).set(new Uint8Array([120,156])),arr.set(p,2),arr.set(new Uint8Array([255&adler32,adler32>>8&255,adler32>>16&255,adler32>>24&255]),p.length+2),p=String.fromCharCode.apply(null,arr),out("<</Length "+p.length+" /Filter [/FlateDecode]>>")}else out("<</Length "+p.length+">>");putStream(p),out("endobj")}offsets[1]=content_length,out("1 0 obj"),out("<</Type /Pages");var kids="/Kids [";for(i=0;i<page;i++)kids+=pageObjectNumbers[i]+" 0 R ";out(kids+"]"),out("/Count "+page),out(">>"),out("endobj"),events.publish("postPutPages")}(),function(){events.publish("putAdditionalObjects");for(var i=0;i<additionalObjects.length;i++){var obj=additionalObjects[i];offsets[obj.objId]=content_length,out(obj.objId+" 0 obj"),out(obj.content),out("endobj")}objectNumber+=additionalObjects.length,events.publish("postPutAdditionalObjects")}(),putResources(),newObject(),out("<<"),function(){out("/Producer (jsPDF "+jsPDF.version+")");for(var key in documentProperties)documentProperties.hasOwnProperty(key)&&documentProperties[key]&&out("/"+key.substr(0,1).toUpperCase()+key.substr(1)+" ("+pdfEscape(documentProperties[key])+")");var created=new Date,tzoffset=created.getTimezoneOffset(),tzsign=tzoffset<0?"+":"-",tzhour=Math.floor(Math.abs(tzoffset/60)),tzmin=Math.abs(tzoffset%60),tzstr=[tzsign,padd2(tzhour),"'",padd2(tzmin),"'"].join("");out(["/CreationDate (D:",created.getFullYear(),padd2(created.getMonth()+1),padd2(created.getDate()),padd2(created.getHours()),padd2(created.getMinutes()),padd2(created.getSeconds()),tzstr,")"].join(""))}(),out(">>"),out("endobj"),newObject(),out("<<"),function(){switch(out("/Type /Catalog"),out("/Pages 1 0 R"),zoomMode||(zoomMode="fullwidth"),zoomMode){case"fullwidth":out("/OpenAction [3 0 R /FitH null]");break;case"fullheight":out("/OpenAction [3 0 R /FitV null]");break;case"fullpage":out("/OpenAction [3 0 R /Fit]");break;case"original":out("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pcn=""+zoomMode;"%"===pcn.substr(pcn.length-1)&&(zoomMode=parseInt(zoomMode)/100),"number"==typeof zoomMode&&out("/OpenAction [3 0 R /XYZ null null "+f2(zoomMode)+"]")}switch(layoutMode||(layoutMode="continuous"),layoutMode){case"continuous":out("/PageLayout /OneColumn");break;case"single":out("/PageLayout /SinglePage");break;case"two":case"twoleft":out("/PageLayout /TwoColumnLeft");break;case"tworight":out("/PageLayout /TwoColumnRight")}pageMode&&out("/PageMode /"+pageMode),events.publish("putCatalog")}(),out(">>"),out("endobj");var i,o=content_length,p="0000000000";for(out("xref"),out("0 "+(objectNumber+1)),out(p+" 65535 f "),i=1;i<=objectNumber;i++){var offset=offsets[i];out("function"==typeof offset?(p+offsets[i]()).slice(-10)+" 00000 n ":(p+offsets[i]).slice(-10)+" 00000 n ")}return out("trailer"),out("<<"),out("/Size "+(objectNumber+1)),out("/Root "+objectNumber+" 0 R"),out("/Info "+(objectNumber-1)+" 0 R"),out(">>"),out("startxref"),out(""+o),out("%%EOF"),outToPages=!0,content.join("\n")},getStyle=function(style){var op="S";return"F"===style?op="f":"FD"===style||"DF"===style?op="B":"f"!==style&&"f*"!==style&&"B"!==style&&"B*"!==style||(op=style),op},getArrayBuffer=function(){for(var data=buildDocument(),len=data.length,ab=new ArrayBuffer(len),u8=new Uint8Array(ab);len--;)u8[len]=data.charCodeAt(len);return ab},getBlob=function(){return new Blob([getArrayBuffer()],{type:"application/pdf"})},_output=function(fn){return fn.foo=function(){try{return fn.apply(this,arguments)}catch(e){var stack=e.stack||"";~stack.indexOf(" at ")&&(stack=stack.split(" at ")[1]);var m="Error in function "+stack.split("\n")[0].split("<")[0]+": "+e.message;if(!global.console)throw new Error(m);global.console.error(m,e),global.alert&&alert(m)}},fn.foo.bar=fn,fn.foo}(function(type,options){var datauri="dataur"===(""+type).substr(0,6)?"data:application/pdf;base64,"+btoa(buildDocument()):0;switch(type){case void 0:return buildDocument();case"save":if(navigator.getUserMedia&&(void 0===global.URL||void 0===global.URL.createObjectURL))return API.output("dataurlnewwindow");saveAs(getBlob(),options),"function"==typeof saveAs.unload&&global.setTimeout&&setTimeout(saveAs.unload,911);break;case"arraybuffer":return getArrayBuffer();case"blob":return getBlob();case"bloburi":case"bloburl":return global.URL&&global.URL.createObjectURL(getBlob())||void 0;case"datauristring":case"dataurlstring":return datauri;case"dataurlnewwindow":var nW=global.open(datauri);if(nW||"undefined"==typeof safari)return nW;case"datauri":case"dataurl":return global.document.location.href=datauri;default:throw new Error('Output type "'+type+'" is not supported.')}}),hasHotfix=function(hotfixName){return!0===Array.isArray(hotfixes)&&hotfixes.indexOf(hotfixName)>-1};switch(unit){case"pt":k=1;break;case"mm":k=72/25.4000508;break;case"cm":k=72/2.54000508;break;case"in":k=72;break;case"px":k=1==hasHotfix("px_scaling")?.75:96/72;break;case"pc":case"em":k=12;break;case"ex":k=6;break;default:throw"Invalid unit: "+unit}API.internal={pdfEscape:pdfEscape,getStyle:getStyle,getFont:function(){return fonts[_getFont.apply(API,arguments)]},getFontSize:function(){return activeFontSize},getLineHeight:function(){return activeFontSize*lineHeightProportion},write:function(string1){out(1===arguments.length?string1:Array.prototype.join.call(arguments," "))},getCoordinateString:function(value){return f2(value*k)},getVerticalCoordinateString:function(value){return f2((pageHeight-value)*k)},collections:{},newObject:newObject,newAdditionalObject:function(){var objId=2*pages.length+1,obj={objId:objId+=additionalObjects.length,content:""};return additionalObjects.push(obj),obj},newObjectDeferred:function(){return objectNumber++,offsets[objectNumber]=function(){return content_length},objectNumber},newObjectDeferredBegin:function(oid){offsets[oid]=content_length},putStream:putStream,events:events,scaleFactor:k,pageSize:{get width(){return pageWidth},get height(){return pageHeight}},output:function(type,options){return _output(type,options)},getNumberOfPages:function(){return pages.length-1},pages:pages,out:out,f2:f2,getPageInfo:function(pageNumberOneBased){return{objId:2*(pageNumberOneBased-1)+3,pageNumber:pageNumberOneBased,pageContext:pagesContext[pageNumberOneBased]}},getCurrentPageInfo:function(){return{objId:2*(currentPage-1)+3,pageNumber:currentPage,pageContext:pagesContext[currentPage]}},getPDFVersion:function(){return pdfVersion},hasHotfix:hasHotfix},API.addPage=function(){return _addPage.apply(this,arguments),this},API.setPage=function(){return _setPage.apply(this,arguments),this},API.insertPage=function(beforePage){return this.addPage(),this.movePage(currentPage,beforePage),this},API.movePage=function(targetPage,beforePage){if(targetPage>beforePage){for(var tmpPages=pages[targetPage],tmpPagedim=pagedim[targetPage],tmpPagesContext=pagesContext[targetPage],i=targetPage;i>beforePage;i--)pages[i]=pages[i-1],pagedim[i]=pagedim[i-1],pagesContext[i]=pagesContext[i-1];pages[beforePage]=tmpPages,pagedim[beforePage]=tmpPagedim,pagesContext[beforePage]=tmpPagesContext,this.setPage(beforePage)}else if(targetPage<beforePage){for(tmpPages=pages[targetPage],tmpPagedim=pagedim[targetPage],tmpPagesContext=pagesContext[targetPage],i=targetPage;i<beforePage;i++)pages[i]=pages[i+1],pagedim[i]=pagedim[i+1],pagesContext[i]=pagesContext[i+1];pages[beforePage]=tmpPages,pagedim[beforePage]=tmpPagedim,pagesContext[beforePage]=tmpPagesContext,this.setPage(beforePage)}return this},API.deletePage=function(){return function(n){n>0&&n<=page&&(pages.splice(n,1),pagedim.splice(n,1),currentPage>--page&&(currentPage=page),this.setPage(currentPage))}.apply(this,arguments),this},API.setDisplayMode=function(zoom,layout,pmode){zoomMode=zoom,layoutMode=layout,pageMode=pmode;if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(pmode))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+pmode+'" is not recognized.');return this},API.text=function(text,x,y,flags,angle,align){function ESC(s){return s=s.split("\t").join(Array(options.TabLen||9).join(" ")),pdfEscape(s,flags)}"number"==typeof text&&(tmp=y,y=x,x=text,text=tmp),"string"==typeof text&&(text=text.match(/[\n\r]/)?text.split(/\r\n|\r|\n/g):[text]),"string"==typeof angle&&(align=angle,angle=null),"string"==typeof flags&&(align=flags,flags=null),"number"==typeof flags&&(angle=flags,flags=null);var xtra="",mode="Td";if(angle){angle*=Math.PI/180;var c=Math.cos(angle),s=Math.sin(angle);xtra=[f2(c),f2(s),f2(-1*s),f2(c),""].join(" "),mode="Tm"}"noBOM"in(flags=flags||{})||(flags.noBOM=!0),"autoencode"in flags||(flags.autoencode=!0);var strokeOption="",pageContext=this.internal.getCurrentPageInfo().pageContext;if(!0===flags.stroke?!0!==pageContext.lastTextWasStroke&&(strokeOption="1 Tr\n",pageContext.lastTextWasStroke=!0):(pageContext.lastTextWasStroke&&(strokeOption="0 Tr\n"),pageContext.lastTextWasStroke=!1),void 0===this._runningPageHeight&&(this._runningPageHeight=0),"string"==typeof text)text=ESC(text);else{if("[object Array]"!==Object.prototype.toString.call(text))throw new Error('Type of text must be string or Array. "'+text+'" is not recognized.');for(var sa=text.concat(),da=[],len=sa.length;len--;)da.push(ESC(sa.shift()));if(align){var left,prevX,maxLineLength,leading=activeFontSize*lineHeightProportion,lineWidths=text.map(function(v){return this.getStringUnitWidth(v)*activeFontSize/k},this);if(maxLineLength=Math.max.apply(Math,lineWidths),"center"===align)left=x-maxLineLength/2,x-=lineWidths[0]/2;else{if("right"!==align)throw new Error('Unrecognized alignment option, use "center" or "right".');left=x-maxLineLength,x-=lineWidths[0]}prevX=x,text=da[0];var i=1;for(len=da.length;i<len;i++){var delta=maxLineLength-lineWidths[i];"center"===align&&(delta/=2),text+=") Tj\n"+(left-prevX+delta)+" -"+leading+" Td ("+da[i],prevX=left+delta}}else text=da.join(") Tj\nT* (")}var curY;return curY=f2((pageHeight-y)*k),out("BT\n/"+activeFontKey+" "+activeFontSize+" Tf\n"+activeFontSize*lineHeightProportion+" TL\n"+strokeOption+textColor+"\n"+xtra+f2(x*k)+" "+curY+" "+mode+"\n("+text+") Tj\nET"),this},API.lstext=function(text,x,y,spacing){console.warn("jsPDF.lstext is deprecated");for(var i=0,len=text.length;i<len;i++,x+=spacing)this.text(text[i],x,y);return this},API.line=function(x1,y1,x2,y2){return this.lines([[x2-x1,y2-y1]],x1,y1)},API.clip=function(){out("W"),out("S")},API.clip_fixed=function(fillRule){out("evenodd"===fillRule?"W*":"W"),out("n")},API.lines=function(lines,x,y,scale,style,closed){var scalex,scaley,i,l,leg,x2,y2,x3,y3,x4,y4;for("number"==typeof lines&&(tmp=y,y=x,x=lines,lines=tmp),scale=scale||[1,1],out(f3(x*k)+" "+f3((pageHeight-y)*k)+" m "),scalex=scale[0],scaley=scale[1],l=lines.length,x4=x,y4=y,i=0;i<l;i++)2===(leg=lines[i]).length?(x4=leg[0]*scalex+x4,y4=leg[1]*scaley+y4,out(f3(x4*k)+" "+f3((pageHeight-y4)*k)+" l")):(x2=leg[0]*scalex+x4,y2=leg[1]*scaley+y4,x3=leg[2]*scalex+x4,y3=leg[3]*scaley+y4,x4=leg[4]*scalex+x4,y4=leg[5]*scaley+y4,out(f3(x2*k)+" "+f3((pageHeight-y2)*k)+" "+f3(x3*k)+" "+f3((pageHeight-y3)*k)+" "+f3(x4*k)+" "+f3((pageHeight-y4)*k)+" c"));return closed&&out(" h"),null!==style&&out(getStyle(style)),this},API.rect=function(x,y,w,h,style){getStyle(style);return out([f2(x*k),f2((pageHeight-y)*k),f2(w*k),f2(-h*k),"re"].join(" ")),null!==style&&out(getStyle(style)),this},API.triangle=function(x1,y1,x2,y2,x3,y3,style){return this.lines([[x2-x1,y2-y1],[x3-x2,y3-y2],[x1-x3,y1-y3]],x1,y1,[1,1],style,!0),this},API.roundedRect=function(x,y,w,h,rx,ry,style){var MyArc=4/3*(Math.SQRT2-1);return this.lines([[w-2*rx,0],[rx*MyArc,0,rx,ry-ry*MyArc,rx,ry],[0,h-2*ry],[0,ry*MyArc,-rx*MyArc,ry,-rx,ry],[2*rx-w,0],[-rx*MyArc,0,-rx,-ry*MyArc,-rx,-ry],[0,2*ry-h],[0,-ry*MyArc,rx*MyArc,-ry,rx,-ry]],x+rx,y,[1,1],style),this},API.ellipse=function(x,y,rx,ry,style){var lx=4/3*(Math.SQRT2-1)*rx,ly=4/3*(Math.SQRT2-1)*ry;return out([f2((x+rx)*k),f2((pageHeight-y)*k),"m",f2((x+rx)*k),f2((pageHeight-(y-ly))*k),f2((x+lx)*k),f2((pageHeight-(y-ry))*k),f2(x*k),f2((pageHeight-(y-ry))*k),"c"].join(" ")),out([f2((x-lx)*k),f2((pageHeight-(y-ry))*k),f2((x-rx)*k),f2((pageHeight-(y-ly))*k),f2((x-rx)*k),f2((pageHeight-y)*k),"c"].join(" ")),out([f2((x-rx)*k),f2((pageHeight-(y+ly))*k),f2((x-lx)*k),f2((pageHeight-(y+ry))*k),f2(x*k),f2((pageHeight-(y+ry))*k),"c"].join(" ")),out([f2((x+lx)*k),f2((pageHeight-(y+ry))*k),f2((x+rx)*k),f2((pageHeight-(y+ly))*k),f2((x+rx)*k),f2((pageHeight-y)*k),"c"].join(" ")),null!==style&&out(getStyle(style)),this},API.circle=function(x,y,r,style){return this.ellipse(x,y,r,r,style)},API.setProperties=function(properties){for(var property in documentProperties)documentProperties.hasOwnProperty(property)&&properties[property]&&(documentProperties[property]=properties[property]);return this},API.setFontSize=function(size){return activeFontSize=size,this},API.setFont=function(fontName,fontStyle){return activeFontKey=_getFont(fontName,fontStyle),this},API.setFontStyle=API.setFontType=function(style){return activeFontKey=_getFont(void 0,style),this},API.getFontList=function(){var fontName,fontStyle,tmp,list={};for(fontName in fontmap)if(fontmap.hasOwnProperty(fontName)){list[fontName]=tmp=[];for(fontStyle in fontmap[fontName])fontmap[fontName].hasOwnProperty(fontStyle)&&tmp.push(fontStyle)}return list},API.addFont=function(postScriptName,fontName,fontStyle){addFont(postScriptName,fontName,fontStyle,"StandardEncoding")},API.setLineWidth=function(width){return out((width*k).toFixed(2)+" w"),this},API.setDrawColor=function(ch1,ch2,ch3,ch4){var color;return color=void 0===ch2||void 0===ch4&&ch1===ch2===ch3?"string"==typeof ch1?ch1+" G":f2(ch1/255)+" G":void 0===ch4?"string"==typeof ch1?[ch1,ch2,ch3,"RG"].join(" "):[f2(ch1/255),f2(ch2/255),f2(ch3/255),"RG"].join(" "):"string"==typeof ch1?[ch1,ch2,ch3,ch4,"K"].join(" "):[f2(ch1),f2(ch2),f2(ch3),f2(ch4),"K"].join(" "),out(color),this},API.setFillColor=function(ch1,ch2,ch3,ch4){var color;return void 0===ch2||void 0===ch4&&ch1===ch2===ch3?color="string"==typeof ch1?ch1+" g":f2(ch1/255)+" g":void 0===ch4||"object"===(void 0===ch4?"undefined":_typeof(ch4))?(color="string"==typeof ch1?[ch1,ch2,ch3,"rg"].join(" "):[f2(ch1/255),f2(ch2/255),f2(ch3/255),"rg"].join(" "),ch4&&0===ch4.a&&(color=["255","255","255","rg"].join(" "))):color="string"==typeof ch1?[ch1,ch2,ch3,ch4,"k"].join(" "):[f2(ch1),f2(ch2),f2(ch3),f2(ch4),"k"].join(" "),out(color),this},API.setTextColor=function(r,g,b){if("string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var hex=parseInt(r.substr(1),16);r=hex>>16&255,g=hex>>8&255,b=255&hex}return textColor=0===r&&0===g&&0===b||void 0===g?f3(r/255)+" g":[f3(r/255),f3(g/255),f3(b/255),"rg"].join(" "),this},API.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},API.setLineCap=function(style){var id=this.CapJoinStyles[style];if(void 0===id)throw new Error("Line cap style of '"+style+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lineCapID=id,out(id+" J"),this},API.setLineJoin=function(style){var id=this.CapJoinStyles[style];if(void 0===id)throw new Error("Line join style of '"+style+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lineJoinID=id,out(id+" j"),this},API.output=_output,API.save=function(filename){API.output("save",filename)};for(var plugin in jsPDF.API)jsPDF.API.hasOwnProperty(plugin)&&("events"===plugin&&jsPDF.API.events.length?function(events,newEvents){var eventname,handler_and_args,i;for(i=newEvents.length-1;-1!==i;i--)eventname=newEvents[i][0],handler_and_args=newEvents[i][1],events.subscribe.apply(events,[eventname].concat("function"==typeof handler_and_args?[handler_and_args]:handler_and_args))}(events,jsPDF.API.events):API[plugin]=jsPDF.API[plugin]);return function(){for(var standardFonts=[["Helvetica","helvetica","normal"],["Helvetica-Bold","helvetica","bold"],["Helvetica-Oblique","helvetica","italic"],["Helvetica-BoldOblique","helvetica","bolditalic"],["Courier","courier","normal"],["Courier-Bold","courier","bold"],["Courier-Oblique","courier","italic"],["Courier-BoldOblique","courier","bolditalic"],["Times-Roman","times","normal"],["Times-Bold","times","bold"],["Times-Italic","times","italic"],["Times-BoldItalic","times","bolditalic"],["ZapfDingbats","zapfdingbats"]],i=0,l=standardFonts.length;i<l;i++){var fontKey=addFont(standardFonts[i][0],standardFonts[i][1],standardFonts[i][2],"StandardEncoding"),parts=standardFonts[i][0].split("-");addToFontDictionary(fontKey,parts[0],parts[1]||"")}events.publish("addFonts",{fonts:fonts,dictionary:fontmap})}(),activeFontKey="F1",_addPage(format,orientation),events.publish("initialized"),API}var pdfVersion="1.3",pageFormats={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};return jsPDF.API={events:[]},jsPDF.version="1.x-master","function"==typeof define&&define.amd?define("jsPDF",function(){return jsPDF}):"undefined"!=typeof module&&module.exports?module.exports=jsPDF:global.jsPDF=jsPDF,jsPDF}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0));(window.AcroForm=function(jsPDFAPI){var AcroForm=window.AcroForm;AcroForm.scale=function(x){return x*(acroformPlugin.internal.scaleFactor/1)},AcroForm.antiScale=function(x){return 1/acroformPlugin.internal.scaleFactor*x};var acroformPlugin={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null};jsPDF.API.acroformPlugin=acroformPlugin;var annotReferenceCallback=function(){for(var i in this.acroformPlugin.acroFormDictionaryRoot.Fields){var formObject=this.acroformPlugin.acroFormDictionaryRoot.Fields[i];formObject.hasAnnotation&&createAnnotationReference.call(this,formObject)}},createAnnotationReference=function(object){var options={type:"reference",object:object};jsPDF.API.annotationPlugin.annotations[this.internal.getPageInfo(object.page).pageNumber].push(options)},putForm=function(formObject){this.acroformPlugin.printedOut&&(this.acroformPlugin.printedOut=!1,this.acroformPlugin.acroFormDictionaryRoot=null),this.acroformPlugin.acroFormDictionaryRoot||function(){if(this.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");this.acroformPlugin.acroFormDictionaryRoot=new AcroForm.AcroFormDictionary,this.acroformPlugin.internal=this.internal,this.acroformPlugin.acroFormDictionaryRoot._eventID=this.internal.events.subscribe("postPutResources",AcroFormDictionaryCallback),this.internal.events.subscribe("buildDocument",annotReferenceCallback),this.internal.events.subscribe("putCatalog",putCatalogCallback),this.internal.events.subscribe("postPutPages",createFieldCallback)}.call(this),this.acroformPlugin.acroFormDictionaryRoot.Fields.push(formObject)},putCatalogCallback=function(){void 0!==this.acroformPlugin.acroFormDictionaryRoot?this.internal.write("/AcroForm "+this.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R"):console.log("Root missing...")},AcroFormDictionaryCallback=function(){this.internal.events.unsubscribe(this.acroformPlugin.acroFormDictionaryRoot._eventID),delete this.acroformPlugin.acroFormDictionaryRoot._eventID,this.acroformPlugin.printedOut=!0},createFieldCallback=function(fieldArray){var standardFields=!fieldArray;fieldArray||(this.internal.newObjectDeferredBegin(this.acroformPlugin.acroFormDictionaryRoot.objId),this.internal.out(this.acroformPlugin.acroFormDictionaryRoot.getString()));fieldArray=fieldArray||this.acroformPlugin.acroFormDictionaryRoot.Kids;for(var i in fieldArray){var form=fieldArray[i],oldRect=form.Rect;form.Rect&&(form.Rect=AcroForm.internal.calculateCoordinates.call(this,form.Rect)),this.internal.newObjectDeferredBegin(form.objId);var content="";if(content+=form.objId+" 0 obj\n",content+="<<\n"+form.getContent(),form.Rect=oldRect,form.hasAppearanceStream&&!form.appearanceStreamContent){var appearance=AcroForm.internal.calculateAppearanceStream.call(this,form);content+="/AP << /N "+appearance+" >>\n",this.acroformPlugin.xForms.push(appearance)}if(form.appearanceStreamContent){content+="/AP << ";for(var k in form.appearanceStreamContent){var value=form.appearanceStreamContent[k];if(content+="/"+k+" ",content+="<< ",Object.keys(value).length>=1||Array.isArray(value))for(var i in value){"function"==typeof(obj=value[i])&&(obj=obj.call(this,form)),content+="/"+i+" "+obj+" ",this.acroformPlugin.xForms.indexOf(obj)>=0||this.acroformPlugin.xForms.push(obj)}else{var obj;"function"==typeof(obj=value)&&(obj=obj.call(this,form)),content+="/"+i+" "+obj+" \n",this.acroformPlugin.xForms.indexOf(obj)>=0||this.acroformPlugin.xForms.push(obj)}content+=" >>\n"}content+=">>\n"}content+=">>\nendobj\n",this.internal.out(content)}standardFields&&createXFormObjectCallback.call(this,this.acroformPlugin.xForms)},createXFormObjectCallback=function(fieldArray){for(var i in fieldArray){var key=i,form=fieldArray[i];this.internal.newObjectDeferredBegin(form&&form.objId);var content="";content+=form?form.getString():"",this.internal.out(content),delete fieldArray[key]}};jsPDFAPI.addField=function(fieldObject){return fieldObject instanceof AcroForm.TextField?addTextField.call(this,fieldObject):fieldObject instanceof AcroForm.ChoiceField?addChoiceField.call(this,fieldObject):fieldObject instanceof AcroForm.Button?addButton.call(this,fieldObject):fieldObject instanceof AcroForm.ChildClass?putForm.call(this,fieldObject):fieldObject&&putForm.call(this,fieldObject),fieldObject.page=this.acroformPlugin.internal.getCurrentPageInfo().pageNumber,this};var addButton=function(options){(options=options||new AcroForm.Field).FT="/Btn";var flags=options.Ff||0;options.pushbutton&&(flags=AcroForm.internal.setBitPosition(flags,17),delete options.pushbutton),options.radio&&(flags=AcroForm.internal.setBitPosition(flags,16),delete options.radio),options.noToggleToOff&&(flags=AcroForm.internal.setBitPosition(flags,15)),options.Ff=flags,putForm.call(this,options)},addTextField=function(options){(options=options||new AcroForm.Field).FT="/Tx";var flags=options.Ff||0;options.multiline&&(flags|=4096),options.password&&(flags|=8192),options.fileSelect&&(flags|=1<<20),options.doNotSpellCheck&&(flags|=1<<22),options.doNotScroll&&(flags|=1<<23),options.Ff=options.Ff||flags,putForm.call(this,options)},addChoiceField=function(opt){var options=opt||new AcroForm.Field;options.FT="/Ch";var flags=options.Ff||0;options.combo&&(flags=AcroForm.internal.setBitPosition(flags,18),delete options.combo),options.edit&&(flags=AcroForm.internal.setBitPosition(flags,19),delete options.edit),options.sort&&(flags=AcroForm.internal.setBitPosition(flags,20),delete options.sort),options.multiSelect&&this.internal.getPDFVersion()>=1.4&&(flags=AcroForm.internal.setBitPosition(flags,22),delete options.multiSelect),options.doNotSpellCheck&&this.internal.getPDFVersion()>=1.4&&(flags=AcroForm.internal.setBitPosition(flags,23),delete options.doNotSpellCheck),options.Ff=flags,putForm.call(this,options)}})(jsPDF.API);var AcroForm=window.AcroForm;AcroForm.internal={},AcroForm.createFormXObject=function(formObject){var xobj=new AcroForm.FormXObject,height=AcroForm.Appearance.internal.getHeight(formObject)||0,width=AcroForm.Appearance.internal.getWidth(formObject)||0;return xobj.BBox=[0,0,width,height],xobj},AcroForm.Appearance={CheckBox:{createAppearanceStream:function(){return{N:{On:AcroForm.Appearance.CheckBox.YesNormal},D:{On:AcroForm.Appearance.CheckBox.YesPushDown,Off:AcroForm.Appearance.CheckBox.OffPushDown}}},createMK:function(){return"<< /CA (3)>>"},YesPushDown:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="";formObject.Q=1;var calcRes=AcroForm.internal.calculateX(formObject,"3","ZapfDingbats",50);return stream+="0.749023 g\n             0 0 "+AcroForm.Appearance.internal.getWidth(formObject)+" "+AcroForm.Appearance.internal.getHeight(formObject)+" re\n             f\n             BMC\n             q\n             0 0 1 rg\n             /F13 "+calcRes.fontSize+" Tf 0 g\n             BT\n",stream+=calcRes.text,stream+="ET\n             Q\n             EMC\n",xobj.stream=stream,xobj},YesNormal:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="";formObject.Q=1;var calcRes=AcroForm.internal.calculateX(formObject,"3","ZapfDingbats",.9*AcroForm.Appearance.internal.getHeight(formObject));return stream+="1 g\n0 0 "+AcroForm.Appearance.internal.getWidth(formObject)+" "+AcroForm.Appearance.internal.getHeight(formObject)+" re\nf\nq\n0 0 1 rg\n0 0 "+(AcroForm.Appearance.internal.getWidth(formObject)-1)+" "+(AcroForm.Appearance.internal.getHeight(formObject)-1)+" re\nW\nn\n0 g\nBT\n/F13 "+calcRes.fontSize+" Tf 0 g\n",stream+=calcRes.text,stream+="ET\n             Q\n",xobj.stream=stream,xobj},OffPushDown:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="";return stream+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(formObject)+" "+AcroForm.Appearance.internal.getHeight(formObject)+" re\n            f\n",xobj.stream=stream,xobj}},RadioButton:{Circle:{createAppearanceStream:function(name){var appearanceStreamContent={D:{Off:AcroForm.Appearance.RadioButton.Circle.OffPushDown},N:{}};return appearanceStreamContent.N[name]=AcroForm.Appearance.RadioButton.Circle.YesNormal,appearanceStreamContent.D[name]=AcroForm.Appearance.RadioButton.Circle.YesPushDown,appearanceStreamContent},createMK:function(){return"<< /CA (l)>>"},YesNormal:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="",DotRadius=AcroForm.Appearance.internal.getWidth(formObject)<=AcroForm.Appearance.internal.getHeight(formObject)?AcroForm.Appearance.internal.getWidth(formObject)/4:AcroForm.Appearance.internal.getHeight(formObject)/4;DotRadius*=.9;var c=AcroForm.Appearance.internal.Bezier_C;return stream+="q\n1 0 0 1 "+AcroForm.Appearance.internal.getWidth(formObject)/2+" "+AcroForm.Appearance.internal.getHeight(formObject)/2+" cm\n"+DotRadius+" 0 m\n"+DotRadius+" "+DotRadius*c+" "+DotRadius*c+" "+DotRadius+" 0 "+DotRadius+" c\n-"+DotRadius*c+" "+DotRadius+" -"+DotRadius+" "+DotRadius*c+" -"+DotRadius+" 0 c\n-"+DotRadius+" -"+DotRadius*c+" -"+DotRadius*c+" -"+DotRadius+" 0 -"+DotRadius+" c\n"+DotRadius*c+" -"+DotRadius+" "+DotRadius+" -"+DotRadius*c+" "+DotRadius+" 0 c\nf\nQ\n",xobj.stream=stream,xobj},YesPushDown:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="",DotRadius=AcroForm.Appearance.internal.getWidth(formObject)<=AcroForm.Appearance.internal.getHeight(formObject)?AcroForm.Appearance.internal.getWidth(formObject)/4:AcroForm.Appearance.internal.getHeight(formObject)/4,k=2*(DotRadius*=.9),kc=k*AcroForm.Appearance.internal.Bezier_C,dc=DotRadius*AcroForm.Appearance.internal.Bezier_C;return stream+="0.749023 g\n            q\n           1 0 0 1 "+AcroForm.Appearance.internal.getWidth(formObject)/2+" "+AcroForm.Appearance.internal.getHeight(formObject)/2+" cm\n"+k+" 0 m\n"+k+" "+kc+" "+kc+" "+k+" 0 "+k+" c\n-"+kc+" "+k+" -"+k+" "+kc+" -"+k+" 0 c\n-"+k+" -"+kc+" -"+kc+" -"+k+" 0 -"+k+" c\n"+kc+" -"+k+" "+k+" -"+kc+" "+k+" 0 c\n            f\n            Q\n            0 g\n            q\n            1 0 0 1 "+AcroForm.Appearance.internal.getWidth(formObject)/2+" "+AcroForm.Appearance.internal.getHeight(formObject)/2+" cm\n"+DotRadius+" 0 m\n"+DotRadius+" "+dc+" "+dc+" "+DotRadius+" 0 "+DotRadius+" c\n-"+dc+" "+DotRadius+" -"+DotRadius+" "+dc+" -"+DotRadius+" 0 c\n-"+DotRadius+" -"+dc+" -"+dc+" -"+DotRadius+" 0 -"+DotRadius+" c\n"+dc+" -"+DotRadius+" "+DotRadius+" -"+dc+" "+DotRadius+" 0 c\n            f\n            Q\n",xobj.stream=stream,xobj},OffPushDown:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="",DotRadius=AcroForm.Appearance.internal.getWidth(formObject)<=AcroForm.Appearance.internal.getHeight(formObject)?AcroForm.Appearance.internal.getWidth(formObject)/4:AcroForm.Appearance.internal.getHeight(formObject)/4,k=2*(DotRadius*=.9),kc=k*AcroForm.Appearance.internal.Bezier_C;return stream+="0.749023 g\n            q\n 1 0 0 1 "+AcroForm.Appearance.internal.getWidth(formObject)/2+" "+AcroForm.Appearance.internal.getHeight(formObject)/2+" cm\n"+k+" 0 m\n"+k+" "+kc+" "+kc+" "+k+" 0 "+k+" c\n-"+kc+" "+k+" -"+k+" "+kc+" -"+k+" 0 c\n-"+k+" -"+kc+" -"+kc+" -"+k+" 0 -"+k+" c\n"+kc+" -"+k+" "+k+" -"+kc+" "+k+" 0 c\n            f\n            Q\n",xobj.stream=stream,xobj}},Cross:{createAppearanceStream:function(name){var appearanceStreamContent={D:{Off:AcroForm.Appearance.RadioButton.Cross.OffPushDown},N:{}};return appearanceStreamContent.N[name]=AcroForm.Appearance.RadioButton.Cross.YesNormal,appearanceStreamContent.D[name]=AcroForm.Appearance.RadioButton.Cross.YesPushDown,appearanceStreamContent},createMK:function(){return"<< /CA (8)>>"},YesNormal:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="",cross=AcroForm.Appearance.internal.calculateCross(formObject);return stream+="q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(formObject)-2)+" "+(AcroForm.Appearance.internal.getHeight(formObject)-2)+" re\n            W\n            n\n            "+cross.x1.x+" "+cross.x1.y+" m\n            "+cross.x2.x+" "+cross.x2.y+" l\n            "+cross.x4.x+" "+cross.x4.y+" m\n            "+cross.x3.x+" "+cross.x3.y+" l\n            s\n            Q\n",xobj.stream=stream,xobj},YesPushDown:function(formObject){var xobj=AcroForm.createFormXObject(formObject),cross=AcroForm.Appearance.internal.calculateCross(formObject),stream="";return stream+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(formObject)+" "+AcroForm.Appearance.internal.getHeight(formObject)+" re\n            f\n            q\n            1 1 "+(AcroForm.Appearance.internal.getWidth(formObject)-2)+" "+(AcroForm.Appearance.internal.getHeight(formObject)-2)+" re\n            W\n            n\n            "+cross.x1.x+" "+cross.x1.y+" m\n            "+cross.x2.x+" "+cross.x2.y+" l\n            "+cross.x4.x+" "+cross.x4.y+" m\n            "+cross.x3.x+" "+cross.x3.y+" l\n            s\n            Q\n",xobj.stream=stream,xobj},OffPushDown:function(formObject){var xobj=AcroForm.createFormXObject(formObject),stream="";return stream+="0.749023 g\n            0 0 "+AcroForm.Appearance.internal.getWidth(formObject)+" "+AcroForm.Appearance.internal.getHeight(formObject)+" re\n            f\n",xobj.stream=stream,xobj}}},createDefaultAppearanceStream:function(formObject){var stream="";return stream+="/Helv 0 Tf 0 g"}},AcroForm.Appearance.internal={Bezier_C:.551915024494,calculateCross:function(formObject){var width=AcroForm.Appearance.internal.getWidth(formObject),height=AcroForm.Appearance.internal.getHeight(formObject),a=function(x,y){return x>y?y:x}(width,height);return{x1:{x:(width-a)/2,y:(height-a)/2+a},x2:{x:(width-a)/2+a,y:(height-a)/2},x3:{x:(width-a)/2,y:(height-a)/2},x4:{x:(width-a)/2+a,y:(height-a)/2+a}}}},AcroForm.Appearance.internal.getWidth=function(formObject){return formObject.Rect[2]},AcroForm.Appearance.internal.getHeight=function(formObject){return formObject.Rect[3]},AcroForm.internal.inherit=function(child,parent){child.prototype=Object.create(parent.prototype),child.prototype.constructor=child},AcroForm.internal.arrayToPdfArray=function(array){if(Array.isArray(array)){var content=" [";for(var i in array){content+=array[i].toString(),content+=i<array.length-1?" ":""}return content+="]"}},AcroForm.internal.toPdfString=function(string){return 0!==(string=string||"").indexOf("(")&&(string="("+string),")"!=string.substring(string.length-1)&&(string+="("),string},AcroForm.PDFObject=function(){var _objId;Object.defineProperty(this,"objId",{get:function(){return _objId||(this.internal?_objId=this.internal.newObjectDeferred():jsPDF.API.acroformPlugin.internal&&(_objId=jsPDF.API.acroformPlugin.internal.newObjectDeferred())),_objId||console.log("Couldn't create Object ID"),_objId},configurable:!1})},AcroForm.PDFObject.prototype.toString=function(){return this.objId+" 0 R"},AcroForm.PDFObject.prototype.getString=function(){var res=this.objId+" 0 obj\n<<";return res+=this.getContent()+">>\n",this.stream&&(res+="stream\n",res+=this.stream,res+="endstream\n"),res+="endobj\n"},AcroForm.PDFObject.prototype.getContent=function(){var object="";return object+=function(fieldObject){var content="",keys=Object.keys(fieldObject).filter(function(key){return"content"!=key&&"appearanceStreamContent"!=key&&"_"!=key.substring(0,1)});for(var i in keys){var key=keys[i],value=fieldObject[key];value&&(Array.isArray(value)?content+="/"+key+" "+AcroForm.internal.arrayToPdfArray(value)+"\n":value instanceof AcroForm.PDFObject?content+="/"+key+" "+value.objId+" 0 R\n":content+="/"+key+" "+value+"\n")}return content}(this)},AcroForm.FormXObject=function(){AcroForm.PDFObject.call(this),this.Type="/XObject",this.Subtype="/Form",this.FormType=1,this.BBox,this.Matrix,this.Resources="2 0 R",this.PieceInfo;var _stream;Object.defineProperty(this,"Length",{enumerable:!0,get:function(){return void 0!==_stream?_stream.length:0}}),Object.defineProperty(this,"stream",{enumerable:!1,set:function(val){_stream=val},get:function(){return _stream||null}})},AcroForm.internal.inherit(AcroForm.FormXObject,AcroForm.PDFObject),AcroForm.AcroFormDictionary=function(){AcroForm.PDFObject.call(this);var _Kids=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return _Kids.length>0?_Kids:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!0,configurable:!0,get:function(){return _Kids}}),this.DA},AcroForm.internal.inherit(AcroForm.AcroFormDictionary,AcroForm.PDFObject),AcroForm.Field=function(){AcroForm.PDFObject.call(this);var _Rect;Object.defineProperty(this,"Rect",{enumerable:!0,configurable:!1,get:function(){if(_Rect){return _Rect}},set:function(val){_Rect=val}});var _FT="";Object.defineProperty(this,"FT",{enumerable:!0,set:function(val){_FT=val},get:function(){return _FT}});var _T;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,set:function(val){_T=val},get:function(){if(!_T||_T.length<1){if(this instanceof AcroForm.ChildClass)return;return"(FieldObject"+AcroForm.Field.FieldNum+++")"}return"("==_T.substring(0,1)&&_T.substring(_T.length-1)?_T:"("+_T+")"}});var _DA;Object.defineProperty(this,"DA",{enumerable:!0,get:function(){if(_DA)return"("+_DA+")"},set:function(val){_DA=val}});var _DV;Object.defineProperty(this,"DV",{enumerable:!0,configurable:!0,get:function(){if(_DV)return _DV},set:function(val){_DV=val}}),Object.defineProperty(this,"Type",{enumerable:!0,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,get:function(){return this.hasAnnotation?"/Widget":null}}),this.BG,Object.defineProperty(this,"hasAnnotation",{enumerable:!1,get:function(){return!!(this.Rect||this.BC||this.BG)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,configurable:!0,writable:!0}),Object.defineProperty(this,"page",{enumerable:!1,configurable:!0,writable:!0})},AcroForm.Field.FieldNum=0,AcroForm.internal.inherit(AcroForm.Field,AcroForm.PDFObject),AcroForm.ChoiceField=function(){AcroForm.Field.call(this),this.FT="/Ch",this.Opt=[],this.V="()",this.TI=0,this.combo=!1,Object.defineProperty(this,"edit",{enumerable:!0,set:function(val){1==val?(this._edit=!0,this.combo=!0):this._edit=!1},get:function(){return!!this._edit&&this._edit},configurable:!1}),this.hasAppearanceStream=!0,Object.defineProperty(this,"V",{get:function(){AcroForm.internal.toPdfString()}})},AcroForm.internal.inherit(AcroForm.ChoiceField,AcroForm.Field),window.ChoiceField=AcroForm.ChoiceField,AcroForm.ListBox=function(){AcroForm.ChoiceField.call(this)},AcroForm.internal.inherit(AcroForm.ListBox,AcroForm.ChoiceField),window.ListBox=AcroForm.ListBox,AcroForm.ComboBox=function(){AcroForm.ListBox.call(this),this.combo=!0},AcroForm.internal.inherit(AcroForm.ComboBox,AcroForm.ListBox),window.ComboBox=AcroForm.ComboBox,AcroForm.EditBox=function(){AcroForm.ComboBox.call(this),this.edit=!0},AcroForm.internal.inherit(AcroForm.EditBox,AcroForm.ComboBox),window.EditBox=AcroForm.EditBox,AcroForm.Button=function(){AcroForm.Field.call(this),this.FT="/Btn"},AcroForm.internal.inherit(AcroForm.Button,AcroForm.Field),window.Button=AcroForm.Button,AcroForm.PushButton=function(){AcroForm.Button.call(this),this.pushbutton=!0},AcroForm.internal.inherit(AcroForm.PushButton,AcroForm.Button),window.PushButton=AcroForm.PushButton,AcroForm.RadioButton=function(){AcroForm.Button.call(this),this.radio=!0;var _Kids=[];Object.defineProperty(this,"Kids",{enumerable:!0,get:function(){if(_Kids.length>0)return _Kids}}),Object.defineProperty(this,"__Kids",{get:function(){return _Kids}});var _noToggleToOff;Object.defineProperty(this,"noToggleToOff",{enumerable:!1,get:function(){return _noToggleToOff},set:function(val){_noToggleToOff=val}})},AcroForm.internal.inherit(AcroForm.RadioButton,AcroForm.Button),window.RadioButton=AcroForm.RadioButton,AcroForm.ChildClass=function(parent,name){AcroForm.Field.call(this),this.Parent=parent,this._AppearanceType=AcroForm.Appearance.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(name),this.F=AcroForm.internal.setBitPosition(this.F,3,1),this.MK=this._AppearanceType.createMK(),this.AS="/Off",this._Name=name},AcroForm.internal.inherit(AcroForm.ChildClass,AcroForm.Field),AcroForm.RadioButton.prototype.setAppearance=function(appearance){if("createAppearanceStream"in appearance&&"createMK"in appearance)for(var i in this.__Kids){var child=this.__Kids[i];child.appearanceStreamContent=appearance.createAppearanceStream(child._Name),child.MK=appearance.createMK()}else console.log("Couldn't assign Appearance to RadioButton. Appearance was Invalid!")},AcroForm.RadioButton.prototype.createOption=function(name){var child=new AcroForm.ChildClass(this,name);return this.__Kids.push(child),jsPDF.API.addField(child),child},AcroForm.CheckBox=function(){Button.call(this),this.appearanceStreamContent=AcroForm.Appearance.CheckBox.createAppearanceStream(),this.MK=AcroForm.Appearance.CheckBox.createMK(),this.AS="/On",this.V="/On"},AcroForm.internal.inherit(AcroForm.CheckBox,AcroForm.Button),window.CheckBox=AcroForm.CheckBox,AcroForm.TextField=function(){AcroForm.Field.call(this),this.DA=AcroForm.Appearance.createDefaultAppearanceStream(),this.F=4;var _V;Object.defineProperty(this,"V",{get:function(){return _V?"("+_V+")":_V},enumerable:!0,set:function(val){_V=val}});var _DV;Object.defineProperty(this,"DV",{get:function(){return _DV?"("+_DV+")":_DV},enumerable:!0,set:function(val){_DV=val}});var _multiline=!1;Object.defineProperty(this,"multiline",{enumerable:!1,get:function(){return _multiline},set:function(val){_multiline=val}});var _MaxLen=!1;Object.defineProperty(this,"MaxLen",{enumerable:!0,get:function(){return _MaxLen},set:function(val){_MaxLen=val}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!1,get:function(){return this.V||this.DV}})},AcroForm.internal.inherit(AcroForm.TextField,AcroForm.Field),window.TextField=AcroForm.TextField,AcroForm.PasswordField=function(){TextField.call(this),Object.defineProperty(this,"password",{value:!0,enumerable:!1,configurable:!1,writable:!1})},AcroForm.internal.inherit(AcroForm.PasswordField,AcroForm.TextField),window.PasswordField=AcroForm.PasswordField,AcroForm.internal.calculateFontSpace=function(text,fontsize,fonttype){fonttype=fonttype||"helvetica";var canvas=AcroForm.internal.calculateFontSpace.canvas||(AcroForm.internal.calculateFontSpace.canvas=document.createElement("canvas"));(context=canvas.getContext("2d")).save();var newFont=fontsize+" "+fonttype;context.font=newFont;var res=context.measureText(text);context.fontcolor="black";var context=canvas.getContext("2d");return res.height=1.5*context.measureText("3").width,context.restore(),res},AcroForm.internal.calculateX=function(formObject,text,font,maxFontSize){maxFontSize=maxFontSize||12,font=font||"helvetica";var returnValue={text:"",fontSize:""},textSplit=(text=")"==(text="("==text.substr(0,1)?text.substr(1):text).substr(text.length-1)?text.substr(0,text.length-1):text).split(" "),fontSize=maxFontSize,height=AcroForm.Appearance.internal.getHeight(formObject)||0;height=height<0?-height:height;var width=AcroForm.Appearance.internal.getWidth(formObject)||0;width=width<0?-width:width;var isSmallerThanWidth=function(i,lastLine,fontSize){if(i+1<textSplit.length){var tmp=lastLine+" "+textSplit[i+1];return AcroForm.internal.calculateFontSpace(tmp,fontSize+"px",font).width<=width-4}return!1};fontSize++;FontSize:for(;;){text="";fontSize--;var textHeight=AcroForm.internal.calculateFontSpace("3",fontSize+"px",font).height,startY=formObject.multiline?height-fontSize:(height-textHeight)/2,startX=-2,lastY=startY+=2,firstWordInLine=0,lastWordInLine=0,lastLength=0;if(0==fontSize){fontSize=12,text="(...) Tj\n",text+="% Width of Text: "+AcroForm.internal.calculateFontSpace(text,"1px").width+", FieldWidth:"+width+"\n";break}lastLength=AcroForm.internal.calculateFontSpace(textSplit[0]+" ",fontSize+"px",font).width;var lastLine="",lineCount=0;for(var i in textSplit){lastLine=" "==(lastLine+=textSplit[i]+" ").substr(lastLine.length-1)?lastLine.substr(0,lastLine.length-1):lastLine;var key=parseInt(i);lastLength=AcroForm.internal.calculateFontSpace(lastLine+" ",fontSize+"px",font).width;var nextLineIsSmaller=isSmallerThanWidth(key,lastLine,fontSize),isLastWord=i>=textSplit.length-1;if(!nextLineIsSmaller||isLastWord){if(nextLineIsSmaller||isLastWord){if(isLastWord)lastWordInLine=key;else if(formObject.multiline&&(textHeight+2)*(lineCount+2)+2>height)continue FontSize}else{if(!formObject.multiline)continue FontSize;if((textHeight+2)*(lineCount+2)+2>height)continue FontSize;lastWordInLine=key}for(var line="",x=firstWordInLine;x<=lastWordInLine;x++)line+=textSplit[x]+" ";switch(line=" "==line.substr(line.length-1)?line.substr(0,line.length-1):line,lastLength=AcroForm.internal.calculateFontSpace(line,fontSize+"px",font).width,formObject.Q){case 2:startX=width-lastLength-2;break;case 1:startX=(width-lastLength)/2;break;case 0:default:startX=2}text+=startX+" "+lastY+" Td\n",text+="("+line+") Tj\n",text+=-startX+" 0 Td\n",lastY=-(fontSize+2),lastLength=0,firstWordInLine=lastWordInLine+1,lineCount++,lastLine=""}else lastLine+=" "}break}return returnValue.text=text,returnValue.fontSize=fontSize,returnValue},AcroForm.internal.calculateAppearanceStream=function(formObject){if(formObject.appearanceStreamContent)return formObject.appearanceStreamContent;if(formObject.V||formObject.DV){var stream="",text=formObject.V||formObject.DV,calcRes=AcroForm.internal.calculateX(formObject,text);stream+="/Tx BMC\nq\n/F1 "+calcRes.fontSize+" Tf\n1 0 0 1 0 0 Tm\n",stream+="BT\n",stream+=calcRes.text,stream+="ET\n",stream+="Q\nEMC\n";var appearanceStreamContent=new AcroForm.createFormXObject(formObject);return appearanceStreamContent.stream=stream,appearanceStreamContent}},AcroForm.internal.calculateCoordinates=function(x,y,w,h){var coordinates={};if(this.internal){var mmtopx=function(x){return x*this.internal.scaleFactor};Array.isArray(x)?(x[0]=AcroForm.scale(x[0]),x[1]=AcroForm.scale(x[1]),x[2]=AcroForm.scale(x[2]),x[3]=AcroForm.scale(x[3]),coordinates.lowerLeft_X=x[0]||0,coordinates.lowerLeft_Y=mmtopx.call(this,this.internal.pageSize.height)-x[3]-x[1]||0,coordinates.upperRight_X=x[0]+x[2]||0,coordinates.upperRight_Y=mmtopx.call(this,this.internal.pageSize.height)-x[1]||0):(x=AcroForm.scale(x),y=AcroForm.scale(y),w=AcroForm.scale(w),h=AcroForm.scale(h),coordinates.lowerLeft_X=x||0,coordinates.lowerLeft_Y=this.internal.pageSize.height-y||0,coordinates.upperRight_X=x+w||0,coordinates.upperRight_Y=this.internal.pageSize.height-y+h||0)}else Array.isArray(x)?(coordinates.lowerLeft_X=x[0]||0,coordinates.lowerLeft_Y=x[1]||0,coordinates.upperRight_X=x[0]+x[2]||0,coordinates.upperRight_Y=x[1]+x[3]||0):(coordinates.lowerLeft_X=x||0,coordinates.lowerLeft_Y=y||0,coordinates.upperRight_X=x+w||0,coordinates.upperRight_Y=y+h||0);return[coordinates.lowerLeft_X,coordinates.lowerLeft_Y,coordinates.upperRight_X,coordinates.upperRight_Y]},AcroForm.internal.calculateColor=function(r,g,b){var color=new Array(3);return color.r=0|r,color.g=0|g,color.b=0|b,color},AcroForm.internal.getBitPosition=function(variable,position){var bitMask=1;return bitMask<<=position-1,(variable=variable||0)|bitMask},AcroForm.internal.setBitPosition=function(variable,position,value){variable=variable||0;var bitMask=1;if(bitMask<<=position-1,1==(value=value||1))variable=variable|bitMask;else variable=variable&~bitMask;return variable},jsPDF.API.addHTML=function(element,x,y,options,callback){if("undefined"==typeof html2canvas&&"undefined"==typeof rasterizeHTML)throw new Error("You need either https://github.com/niklasvh/html2canvas or https://github.com/cburgmer/rasterizeHTML.js");"number"!=typeof x&&(options=x,callback=y),"function"==typeof options&&(callback=options,options=null);var I=this.internal,K=I.scaleFactor,W=I.pageSize.width,H=I.pageSize.height;if(options=options||{},options.onrendered=function(obj){x=parseInt(x)||0,y=parseInt(y)||0;var dim=options.dim||{},h=dim.h||0,w=dim.w||Math.min(W,obj.width/K)-x,format="JPEG";if(options.format&&(format=options.format),obj.height>H&&options.pagesplit){var crop=function(){for(var cy=0;;){var canvas=document.createElement("canvas");canvas.width=Math.min(W*K,obj.width),canvas.height=Math.min(H*K,obj.height-cy);canvas.getContext("2d").drawImage(obj,0,cy,obj.width,canvas.height,0,0,canvas.width,canvas.height);var args=[canvas,x,cy?0:y,canvas.width/K,canvas.height/K,format,null,"SLOW"];if(this.addImage.apply(this,args),(cy+=canvas.height)>=obj.height)break;this.addPage()}callback(w,cy,null,args)}.bind(this);if("CANVAS"===obj.nodeName){var img=new Image;img.onload=crop,img.src=obj.toDataURL("image/png"),obj=img}else crop()}else{var alias=Math.random().toString(35),args=[obj,x,y,w,h,format,alias,"SLOW"];this.addImage.apply(this,args),callback(w,h,alias,args)}}.bind(this),"undefined"!=typeof html2canvas&&!options.rstz)return html2canvas(element,options);if("undefined"!=typeof rasterizeHTML){var meth="drawDocument";return"string"==typeof element&&(meth=/^http/.test(element)?"drawURL":"drawHTML"),options.width=options.width||W*K,rasterizeHTML[meth](element,void 0,options).then(function(r){options.onrendered(r.image)},function(e){callback(null,e)})}return null},function(jsPDFAPI){var supported_image_types=["jpeg","jpg","png"],putImage=function putImage(img){var objectNumber=this.internal.newObject(),out=this.internal.write,putStream=this.internal.putStream;if(img.n=objectNumber,out("<</Type /XObject"),out("/Subtype /Image"),out("/Width "+img.w),out("/Height "+img.h),img.cs===this.color_spaces.INDEXED?out("/ColorSpace [/Indexed /DeviceRGB "+(img.pal.length/3-1)+" "+("smask"in img?objectNumber+2:objectNumber+1)+" 0 R]"):(out("/ColorSpace /"+img.cs),img.cs===this.color_spaces.DEVICE_CMYK&&out("/Decode [1 0 1 0 1 0 1 0]")),out("/BitsPerComponent "+img.bpc),"f"in img&&out("/Filter /"+img.f),"dp"in img&&out("/DecodeParms <<"+img.dp+">>"),"trns"in img&&img.trns.constructor==Array){for(var trns="",i=0,len=img.trns.length;i<len;i++)trns+=img.trns[i]+" "+img.trns[i]+" ";out("/Mask ["+trns+"]")}if("smask"in img&&out("/SMask "+(objectNumber+1)+" 0 R"),out("/Length "+img.data.length+">>"),putStream(img.data),out("endobj"),"smask"in img){var dp="/Predictor "+img.p+" /Colors 1 /BitsPerComponent "+img.bpc+" /Columns "+img.w,smask={w:img.w,h:img.h,cs:"DeviceGray",bpc:img.bpc,dp:dp,data:img.smask};"f"in img&&(smask.f=img.f),putImage.call(this,smask)}img.cs===this.color_spaces.INDEXED&&(this.internal.newObject(),out("<< /Length "+img.pal.length+">>"),putStream(this.arrayBufferToBinaryString(new Uint8Array(img.pal))),out("endobj"))},putResourcesCallback=function(){var images=this.internal.collections.addImage_images;for(var i in images)putImage.call(this,images[i])},putXObjectsDictCallback=function(){var image,images=this.internal.collections.addImage_images,out=this.internal.write;for(var i in images)out("/I"+(image=images[i]).i,image.n,"0","R")},isDOMElement=function(object){return"object"===(void 0===object?"undefined":_typeof(object))&&1===object.nodeType},checkImagesForAlias=function(alias,images){var cached_info;if(images)for(var e in images)if(alias===images[e].alias){cached_info=images[e];break}return cached_info};jsPDFAPI.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},jsPDFAPI.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},jsPDFAPI.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},jsPDFAPI.sHashCode=function(str){return Array.prototype.reduce&&str.split("").reduce(function(a,b){return(a=(a<<5)-a+b.charCodeAt(0))&a},0)},jsPDFAPI.isString=function(object){return"string"==typeof object},jsPDFAPI.extractInfoFromBase64DataURI=function(dataURI){return/^data:([\w]+?\/([\w]+?));base64,(.+?)$/g.exec(dataURI)},jsPDFAPI.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},jsPDFAPI.isArrayBuffer=function(object){return!!this.supportsArrayBuffer()&&object instanceof ArrayBuffer},jsPDFAPI.isArrayBufferView=function(object){return!!this.supportsArrayBuffer()&&("undefined"!=typeof Uint32Array&&(object instanceof Int8Array||object instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&object instanceof Uint8ClampedArray||object instanceof Int16Array||object instanceof Uint16Array||object instanceof Int32Array||object instanceof Uint32Array||object instanceof Float32Array||object instanceof Float64Array))},jsPDFAPI.binaryStringToUint8Array=function(binary_string){for(var len=binary_string.length,bytes=new Uint8Array(len),i=0;i<len;i++)bytes[i]=binary_string.charCodeAt(i);return bytes},jsPDFAPI.arrayBufferToBinaryString=function(buffer){if("function"==typeof window.atob)return atob(this.arrayBufferToBase64(buffer));for(var data=this.isArrayBuffer(buffer)?buffer:new Uint8Array(buffer),binary_string="",slicesCount=Math.round(data.byteLength/20480),i=0;i<slicesCount;i++)binary_string+=String.fromCharCode.apply(null,data.slice(20480*i,20480*i+20480));return binary_string},jsPDFAPI.arrayBufferToBase64=function(arrayBuffer){for(var chunk,base64="",encodings="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bytes=new Uint8Array(arrayBuffer),byteLength=bytes.byteLength,byteRemainder=byteLength%3,mainLength=byteLength-byteRemainder,i=0;i<mainLength;i+=3)base64+=encodings[(16515072&(chunk=bytes[i]<<16|bytes[i+1]<<8|bytes[i+2]))>>18]+encodings[(258048&chunk)>>12]+encodings[(4032&chunk)>>6]+encodings[63&chunk];return 1==byteRemainder?base64+=encodings[(252&(chunk=bytes[mainLength]))>>2]+encodings[(3&chunk)<<4]+"==":2==byteRemainder&&(base64+=encodings[(64512&(chunk=bytes[mainLength]<<8|bytes[mainLength+1]))>>10]+encodings[(1008&chunk)>>4]+encodings[(15&chunk)<<2]+"="),base64},jsPDFAPI.createImageInfo=function(data,wd,ht,cs,bpc,f,imageIndex,alias,dp,trns,pal,smask,p){var info={alias:alias,w:wd,h:ht,cs:cs,bpc:bpc,i:imageIndex,data:data};return f&&(info.f=f),dp&&(info.dp=dp),trns&&(info.trns=trns),pal&&(info.pal=pal),smask&&(info.smask=smask),p&&(info.p=p),info},jsPDFAPI.addImage=function(imageData,format,x,y,w,h,alias,compression,rotation){if("string"!=typeof format){var tmp=h;h=w,w=y,y=x,x=format,format=tmp}if("object"===(void 0===imageData?"undefined":_typeof(imageData))&&!isDOMElement(imageData)&&"imageData"in imageData){var options=imageData;imageData=options.imageData,format=options.format||format,x=options.x||x||0,y=options.y||y||0,w=options.w||w,h=options.h||h,alias=options.alias||alias,compression=options.compression||compression,rotation=options.rotation||options.angle||rotation}if(isNaN(x)||isNaN(y))throw console.error("jsPDF.addImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addImage");var info,images=function(){var images=this.internal.collections.addImage_images;return images||(this.internal.collections.addImage_images=images={},this.internal.events.subscribe("putResources",putResourcesCallback),this.internal.events.subscribe("putXobjectDict",putXObjectsDictCallback)),images}.call(this);if(!(info=checkImagesForAlias(imageData,images))){var dataAsBinaryString;if(isDOMElement(imageData)&&(imageData=function(element,format,angle){if("IMG"===element.nodeName&&element.hasAttribute("src")){var src=""+element.getAttribute("src");if(!angle&&0===src.indexOf("data:image/"))return src;!format&&/\.png(?:[?#].*)?$/i.test(src)&&(format="png")}if("CANVAS"===element.nodeName)var canvas=element;else{(canvas=document.createElement("canvas")).width=element.clientWidth||element.width,canvas.height=element.clientHeight||element.height;var ctx=canvas.getContext("2d");if(!ctx)throw"addImage requires canvas to be supported by browser.";if(angle){var x,y,b,c,s,w,h,angleInRadians,to_radians=Math.PI/180;"object"===(void 0===angle?"undefined":_typeof(angle))&&(x=angle.x,y=angle.y,b=angle.bg,angle=angle.angle),angleInRadians=angle*to_radians,c=Math.abs(Math.cos(angleInRadians)),s=Math.abs(Math.sin(angleInRadians)),w=canvas.width,h=canvas.height,canvas.width=h*s+w*c,canvas.height=h*c+w*s,isNaN(x)&&(x=canvas.width/2),isNaN(y)&&(y=canvas.height/2),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillStyle=b||"white",ctx.fillRect(0,0,canvas.width,canvas.height),ctx.save(),ctx.translate(x,y),ctx.rotate(angleInRadians),ctx.drawImage(element,-w/2,-h/2),ctx.rotate(-angleInRadians),ctx.translate(-x,-y),ctx.restore()}else ctx.drawImage(element,0,0,canvas.width,canvas.height)}return canvas.toDataURL("png"==(""+format).toLowerCase()?"image/png":"image/jpeg")}(imageData,format,rotation)),function(value){return void 0===value||null===value}(alias)&&(alias=function(data){return"string"==typeof data&&jsPDFAPI.sHashCode(data)}(imageData)),!(info=checkImagesForAlias(alias,images))){if(this.isString(imageData)){var base64Info=this.extractInfoFromBase64DataURI(imageData);base64Info?(format=base64Info[2],imageData=atob(base64Info[3])):137===imageData.charCodeAt(0)&&80===imageData.charCodeAt(1)&&78===imageData.charCodeAt(2)&&71===imageData.charCodeAt(3)&&(format="png")}if(format=(format||"JPEG").toLowerCase(),function(type){return-1===supported_image_types.indexOf(type)}(format))throw new Error("addImage currently only supports formats "+supported_image_types+", not '"+format+"'");if(function(type){return"function"!=typeof jsPDFAPI["process"+type.toUpperCase()]}(format))throw new Error("please ensure that the plugin for '"+format+"' support is added");if(this.supportsArrayBuffer()&&(imageData instanceof Uint8Array||(dataAsBinaryString=imageData,imageData=this.binaryStringToUint8Array(imageData))),!(info=this["process"+format.toUpperCase()](imageData,function(images){var imageIndex=0;return images&&(imageIndex=Object.keys?Object.keys(images).length:function(o){var i=0;for(var e in o)o.hasOwnProperty(e)&&i++;return i}(images)),imageIndex}(images),alias,function(value){return value&&"string"==typeof value&&(value=value.toUpperCase()),value in jsPDFAPI.image_compression?value:jsPDFAPI.image_compression.NONE}(compression),dataAsBinaryString)))throw new Error("An unkwown error occurred whilst processing the image")}}return function(x,y,w,h,info,index,images){var dims=function(w,h,info){return w||h||(w=-96,h=-96),w<0&&(w=-1*info.w*72/w/this.internal.scaleFactor),h<0&&(h=-1*info.h*72/h/this.internal.scaleFactor),0===w&&(w=h*info.w/info.h),0===h&&(h=w*info.h/info.w),[w,h]}.call(this,w,h,info),coord=this.internal.getCoordinateString,vcoord=this.internal.getVerticalCoordinateString;w=dims[0],h=dims[1],images[index]=info,this.internal.write("q",coord(w),"0 0",coord(h),coord(x),vcoord(y+h),"cm /I"+info.i,"Do Q")}.call(this,x,y,w,h,info,info.i,images),this};var readBytes=function(data,offset){return data.subarray(offset,offset+5)};jsPDFAPI.processJPEG=function(data,index,alias,compression,dataAsBinaryString){var dims,colorSpace=this.color_spaces.DEVICE_RGB,filter=this.decode.DCT_DECODE;return this.isString(data)?(dims=function(imgData){var width,height,numcomponents;if(255===!imgData.charCodeAt(0)||216===!imgData.charCodeAt(1)||255===!imgData.charCodeAt(2)||224===!imgData.charCodeAt(3)||!imgData.charCodeAt(6)==="J".charCodeAt(0)||!imgData.charCodeAt(7)==="F".charCodeAt(0)||!imgData.charCodeAt(8)==="I".charCodeAt(0)||!imgData.charCodeAt(9)==="F".charCodeAt(0)||0===!imgData.charCodeAt(10))throw new Error("getJpegSize requires a binary string jpeg file");for(var blockLength=256*imgData.charCodeAt(4)+imgData.charCodeAt(5),i=4,len=imgData.length;i<len;){if(i+=blockLength,255!==imgData.charCodeAt(i))throw new Error("getJpegSize could not find the size of the image");if(192===imgData.charCodeAt(i+1)||193===imgData.charCodeAt(i+1)||194===imgData.charCodeAt(i+1)||195===imgData.charCodeAt(i+1)||196===imgData.charCodeAt(i+1)||197===imgData.charCodeAt(i+1)||198===imgData.charCodeAt(i+1)||199===imgData.charCodeAt(i+1))return height=256*imgData.charCodeAt(i+5)+imgData.charCodeAt(i+6),width=256*imgData.charCodeAt(i+7)+imgData.charCodeAt(i+8),numcomponents=imgData.charCodeAt(i+9),[width,height,numcomponents];i+=2,blockLength=256*imgData.charCodeAt(i)+imgData.charCodeAt(i+1)}}(data),this.createImageInfo(data,dims[0],dims[1],1==dims[3]?this.color_spaces.DEVICE_GRAY:colorSpace,8,filter,index,alias)):(this.isArrayBuffer(data)&&(data=new Uint8Array(data)),this.isArrayBufferView(data)?(dims=function(data){if(65496!=(data[0]<<8|data[1]))throw new Error("Supplied data is not a JPEG");for(var bytes,width,height,numcomponents,len=data.length,block=(data[4]<<8)+data[5],pos=4;pos<len;){if(pos+=block,bytes=readBytes(data,pos),block=(bytes[2]<<8)+bytes[3],(192===bytes[1]||194===bytes[1])&&255===bytes[0]&&block>7)return bytes=readBytes(data,pos+5),width=(bytes[2]<<8)+bytes[3],height=(bytes[0]<<8)+bytes[1],numcomponents=bytes[4],{width:width,height:height,numcomponents:numcomponents};pos+=2}throw new Error("getJpegSizeFromBytes could not find the size of the image")}(data),data=dataAsBinaryString||this.arrayBufferToBinaryString(data),this.createImageInfo(data,dims.width,dims.height,1==dims.numcomponents?this.color_spaces.DEVICE_GRAY:colorSpace,8,filter,index,alias)):null)},jsPDFAPI.processJPG=function(){return this.processJPEG.apply(this,arguments)}}(jsPDF.API),function(jsPDFAPI){var annotationPlugin={annotations:[],f2:function(number){return number.toFixed(2)},notEmpty:function(obj){if(void 0!==obj&&""!=obj)return!0}};jsPDF.API.annotationPlugin=annotationPlugin,jsPDF.API.events.push(["addPage",function(info){this.annotationPlugin.annotations[info.pageNumber]=[]}]),jsPDFAPI.events.push(["putPage",function(info){for(var pageAnnos=this.annotationPlugin.annotations[info.pageNumber],found=!1,a=0;a<pageAnnos.length&&!found;a++){switch((anno=pageAnnos[a]).type){case"link":if(annotationPlugin.notEmpty(anno.options.url)||annotationPlugin.notEmpty(anno.options.pageNumber)){found=!0;break}case"reference":case"text":case"freetext":found=!0}}if(0!=found){this.internal.write("/Annots [");var f2=this.annotationPlugin.f2,k=this.internal.scaleFactor,pageHeight=this.internal.pageSize.height,pageInfo=this.internal.getPageInfo(info.pageNumber);for(a=0;a<pageAnnos.length;a++){var anno;switch((anno=pageAnnos[a]).type){case"reference":this.internal.write(" "+anno.object.objId+" 0 R ");break;case"text":var objText=this.internal.newAdditionalObject(),objPopup=this.internal.newAdditionalObject(),title=anno.title||"Note";line="<</Type /Annot /Subtype /Text "+(rect="/Rect ["+f2(anno.bounds.x*k)+" "+f2(pageHeight-(anno.bounds.y+anno.bounds.h)*k)+" "+f2((anno.bounds.x+anno.bounds.w)*k)+" "+f2((pageHeight-anno.bounds.y)*k)+"] ")+"/Contents ("+anno.contents+")",line+=" /Popup "+objPopup.objId+" 0 R",line+=" /P "+pageInfo.objId+" 0 R",line+=" /T ("+title+") >>",objText.content=line;var parent=objText.objId+" 0 R";line="<</Type /Annot /Subtype /Popup "+(rect="/Rect ["+f2((anno.bounds.x+30)*k)+" "+f2(pageHeight-(anno.bounds.y+anno.bounds.h)*k)+" "+f2((anno.bounds.x+anno.bounds.w+30)*k)+" "+f2((pageHeight-anno.bounds.y)*k)+"] ")+" /Parent "+parent,anno.open&&(line+=" /Open true"),line+=" >>",objPopup.content=line,this.internal.write(objText.objId,"0 R",objPopup.objId,"0 R");break;case"freetext":var rect="/Rect ["+f2(anno.bounds.x*k)+" "+f2((pageHeight-anno.bounds.y)*k)+" "+f2(anno.bounds.x+anno.bounds.w*k)+" "+f2(pageHeight-(anno.bounds.y+anno.bounds.h)*k)+"] ",color=anno.color||"#000000";line="<</Type /Annot /Subtype /FreeText "+rect+"/Contents ("+anno.contents+")",line+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+color+")",line+=" /Border [0 0 0]",line+=" >>",this.internal.write(line);break;case"link":if(anno.options.name){var loc=this.annotations._nameMap[anno.options.name];anno.options.pageNumber=loc.page,anno.options.top=loc.y}else anno.options.top||(anno.options.top=0);rect="/Rect ["+f2(anno.x*k)+" "+f2((pageHeight-anno.y)*k)+" "+f2((anno.x+anno.w)*k)+" "+f2((pageHeight-(anno.y+anno.h))*k)+"] ";var line="";if(anno.options.url)line="<</Type /Annot /Subtype /Link "+rect+"/Border [0 0 0] /A <</S /URI /URI ("+anno.options.url+") >>";else if(anno.options.pageNumber){switch(line="<</Type /Annot /Subtype /Link "+rect+"/Border [0 0 0] /Dest ["+(info=this.internal.getPageInfo(anno.options.pageNumber)).objId+" 0 R",anno.options.magFactor=anno.options.magFactor||"XYZ",anno.options.magFactor){case"Fit":line+=" /Fit]";break;case"FitH":line+=" /FitH "+anno.options.top+"]";break;case"FitV":anno.options.left=anno.options.left||0,line+=" /FitV "+anno.options.left+"]";break;case"XYZ":default:var top=f2((pageHeight-anno.options.top)*k);anno.options.left=anno.options.left||0,void 0===anno.options.zoom&&(anno.options.zoom=0),line+=" /XYZ "+anno.options.left+" "+top+" "+anno.options.zoom+"]"}}""!=line&&(line+=" >>",this.internal.write(line))}}this.internal.write("]")}}]),jsPDFAPI.createAnnotation=function(options){switch(options.type){case"link":this.link(options.bounds.x,options.bounds.y,options.bounds.w,options.bounds.h,options);break;case"text":case"freetext":this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push(options)}},jsPDFAPI.link=function(x,y,w,h,options){this.annotationPlugin.annotations[this.internal.getCurrentPageInfo().pageNumber].push({x:x,y:y,w:w,h:h,options:options,type:"link"})},jsPDFAPI.textWithLink=function(text,x,y,options){var width=this.getTextWidth(text),height=this.internal.getLineHeight()/this.internal.scaleFactor;return this.text(text,x,y),y+=.2*height,this.link(x,y-height,width,height,options),width},jsPDFAPI.getTextWidth=function(text){var fontSize=this.internal.getFontSize();return this.getStringUnitWidth(text)*fontSize/this.internal.scaleFactor},jsPDFAPI.getLineHeight=function(){return this.internal.getLineHeight()}}(jsPDF.API),jsPDF.API.autoPrint=function(){var refAutoPrintTag;return this.internal.events.subscribe("postPutResources",function(){refAutoPrintTag=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+refAutoPrintTag+" 0 R")}),this},function(jsPDFAPI){jsPDFAPI.events.push(["initialized",function(){this.canvas.pdf=this}]),jsPDFAPI.canvas={getContext:function(name){return this.pdf.context2d._canvas=this,this.pdf.context2d},style:{}},Object.defineProperty(jsPDFAPI.canvas,"width",{get:function(){return this._width},set:function(value){this._width=value,this.getContext("2d").pageWrapX=value+1}}),Object.defineProperty(jsPDFAPI.canvas,"height",{get:function(){return this._height},set:function(value){this._height=value,this.getContext("2d").pageWrapY=value+1}})}(jsPDF.API),function(jsPDFAPI){var fontName,fontSize,fontStyle,headerFunction,lastCellPos={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},pages=1,setLastCellPosition=function(x,y,w,h,ln){lastCellPos={x:x,y:y,w:w,h:h,ln:ln}},getLastCellPosition=function(){return lastCellPos},NO_MARGINS={left:0,top:0,bottom:0};jsPDFAPI.setHeaderFunction=function(func){headerFunction=func},jsPDFAPI.getTextDimensions=function(txt){fontName=this.internal.getFont().fontName,fontSize=this.table_font_size||this.internal.getFontSize(),fontStyle=this.internal.getFont().fontStyle;var dimensions,text;(text=document.createElement("font")).id="jsPDFCell";try{text.style.fontStyle=fontStyle}catch(e){text.style.fontWeight=fontStyle}text.style.fontName=fontName,text.style.fontSize=fontSize+"pt";try{text.textContent=txt}catch(e){text.innerText=txt}return document.body.appendChild(text),dimensions={w:(text.offsetWidth+1)*(19.049976/25.4),h:(text.offsetHeight+1)*(19.049976/25.4)},document.body.removeChild(text),dimensions},jsPDFAPI.cellAddPage=function(){var margins=this.margins||NO_MARGINS;this.addPage(),setLastCellPosition(margins.left,margins.top,void 0,void 0),pages+=1},jsPDFAPI.cellInitialize=function(){lastCellPos={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},pages=1},jsPDFAPI.cell=function(x,y,w,h,txt,ln,align){var curCell=getLastCellPosition(),pgAdded=!1;if(void 0!==curCell.ln)if(curCell.ln===ln)x=curCell.x+curCell.w,y=curCell.y;else{var margins=this.margins||NO_MARGINS;curCell.y+curCell.h+h+13>=this.internal.pageSize.height-margins.bottom&&(this.cellAddPage(),pgAdded=!0,this.printHeaders&&this.tableHeaderRow&&this.printHeaderRow(ln,!0)),y=getLastCellPosition().y+getLastCellPosition().h,pgAdded&&(y=23)}if(void 0!==txt[0])if(this.printingHeaderRow?this.rect(x,y,w,h,"FD"):this.rect(x,y,w,h),"right"===align){txt instanceof Array||(txt=[txt]);for(var i=0;i<txt.length;i++){var currentLine=txt[i],textSize=this.getStringUnitWidth(currentLine)*this.internal.getFontSize();this.text(currentLine,x+w-textSize-3,y+this.internal.getLineHeight()*(i+1))}}else this.text(txt,x+3,y+this.internal.getLineHeight());return setLastCellPosition(x,y,w,h,ln),this},jsPDFAPI.arrayMax=function(array,comparisonFn){var i,ln,item,max=array[0];for(i=0,ln=array.length;i<ln;i+=1)item=array[i],comparisonFn?-1===comparisonFn(max,item)&&(max=item):item>max&&(max=item);return max},jsPDFAPI.table=function(x,y,data,headers,config){if(!data)throw"No data for PDF table";var header,i,ln,cln,columnData,column,j,model,jln,func,headerNames=[],headerPrompts=[],columnMatrix={},columnWidths={},columnMinWidths=[],tableHeaderConfigs=[],autoSize=!1,printHeaders=!0,fontSize=12,margins=NO_MARGINS;if(margins.width=this.internal.pageSize.width,config&&(!0===config.autoSize&&(autoSize=!0),!1===config.printHeaders&&(printHeaders=!1),config.fontSize&&(fontSize=config.fontSize),config.css&&void 0!==config.css["font-size"]&&(fontSize=16*config.css["font-size"]),config.margins&&(margins=config.margins)),this.lnMod=0,lastCellPos={x:void 0,y:void 0,w:void 0,h:void 0,ln:void 0},pages=1,this.printHeaders=printHeaders,this.margins=margins,this.setFontSize(fontSize),this.table_font_size=fontSize,void 0===headers||null===headers)headerNames=Object.keys(data[0]);else if(headers[0]&&"string"!=typeof headers[0]){for(i=0,ln=headers.length;i<ln;i+=1)header=headers[i],headerNames.push(header.name),headerPrompts.push(header.prompt),columnWidths[header.name]=header.width*(19.049976/25.4)}else headerNames=headers;if(autoSize)for(func=function(rec){return rec[header]},i=0,ln=headerNames.length;i<ln;i+=1){for(columnMatrix[header=headerNames[i]]=data.map(func),columnMinWidths.push(this.getTextDimensions(headerPrompts[i]||header).w),j=0,cln=(column=columnMatrix[header]).length;j<cln;j+=1)columnData=column[j],columnMinWidths.push(this.getTextDimensions(columnData).w);columnWidths[header]=jsPDFAPI.arrayMax(columnMinWidths),columnMinWidths=[]}if(printHeaders){var lineHeight=this.calculateLineHeight(headerNames,columnWidths,headerPrompts.length?headerPrompts:headerNames);for(i=0,ln=headerNames.length;i<ln;i+=1)header=headerNames[i],tableHeaderConfigs.push([x,y,columnWidths[header],lineHeight,String(headerPrompts.length?headerPrompts[i]:header)]);this.setTableHeaderRow(tableHeaderConfigs),this.printHeaderRow(1,!1)}for(i=0,ln=data.length;i<ln;i+=1){for(model=data[i],lineHeight=this.calculateLineHeight(headerNames,columnWidths,model),j=0,jln=headerNames.length;j<jln;j+=1)header=headerNames[j],this.cell(x,y,columnWidths[header],lineHeight,model[header],i+2,header.align)}return this.lastCellPos=lastCellPos,this.table_x=x,this.table_y=y,this},jsPDFAPI.calculateLineHeight=function(headerNames,columnWidths,model){for(var header,lineHeight=0,j=0;j<headerNames.length;j++){model[header=headerNames[j]]=this.splitTextToSize(String(model[header]),columnWidths[header]-3);var h=this.internal.getLineHeight()*model[header].length+3;h>lineHeight&&(lineHeight=h)}return lineHeight},jsPDFAPI.setTableHeaderRow=function(config){this.tableHeaderRow=config},jsPDFAPI.printHeaderRow=function(lineNumber,new_page){if(!this.tableHeaderRow)throw"Property tableHeaderRow does not exist.";var tableHeaderCell,tmpArray,i,ln;if(this.printingHeaderRow=!0,void 0!==headerFunction){var position=headerFunction(this,pages);setLastCellPosition(position[0],position[1],position[2],position[3],-1)}this.setFontStyle("bold");var tempHeaderConf=[];for(i=0,ln=this.tableHeaderRow.length;i<ln;i+=1)this.setFillColor(200,200,200),tableHeaderCell=this.tableHeaderRow[i],new_page&&(this.margins.top=13,tableHeaderCell[1]=this.margins&&this.margins.top||0,tempHeaderConf.push(tableHeaderCell)),tmpArray=[].concat(tableHeaderCell),this.cell.apply(this,tmpArray.concat(lineNumber));tempHeaderConf.length>0&&this.setTableHeaderRow(tempHeaderConf),this.setFontStyle("normal"),this.printingHeaderRow=!1}}(jsPDF.API),function(jsPDFAPI){function context(){this._isStrokeTransparent=!1,this._strokeOpacity=1,this.strokeStyle="#000000",this.fillStyle="#000000",this._isFillTransparent=!1,this._fillOpacity=1,this.font="12pt times",this.textBaseline="alphabetic",this.textAlign="start",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this._transform=[1,0,0,1,0,0],this.globalCompositeOperation="normal",this.globalAlpha=1,this._clip_path=[],this.ignoreClearRect=!1,this.copy=function(ctx){this._isStrokeTransparent=ctx._isStrokeTransparent,this._strokeOpacity=ctx._strokeOpacity,this.strokeStyle=ctx.strokeStyle,this._isFillTransparent=ctx._isFillTransparent,this._fillOpacity=ctx._fillOpacity,this.fillStyle=ctx.fillStyle,this.font=ctx.font,this.lineWidth=ctx.lineWidth,this.lineJoin=ctx.lineJoin,this.lineCap=ctx.lineCap,this.textBaseline=ctx.textBaseline,this.textAlign=ctx.textAlign,this._fontSize=ctx._fontSize,this._transform=ctx._transform.slice(0),this.globalCompositeOperation=ctx.globalCompositeOperation,this.globalAlpha=ctx.globalAlpha,this._clip_path=ctx._clip_path.slice(0),this.ignoreClearRect=ctx.ignoreClearRect}}jsPDFAPI.events.push(["initialized",function(){this.context2d.pdf=this,this.context2d.internal.pdf=this,this.context2d.ctx=new context,this.context2d.ctxStack=[],this.context2d.path=[]}]),jsPDFAPI.context2d={pageWrapXEnabled:!1,pageWrapYEnabled:!1,pageWrapX:9999999,pageWrapY:9999999,ctx:new context,f2:function(number){return number.toFixed(2)},fillRect:function(x,y,w,h){if(!this._isFillTransparent()){x=this._wrapX(x),y=this._wrapY(y);var xRect=this._matrix_map_rect(this.ctx._transform,{x:x,y:y,w:w,h:h});this.pdf.rect(xRect.x,xRect.y,xRect.w,xRect.h,"f")}},strokeRect:function(x,y,w,h){if(!this._isStrokeTransparent()){x=this._wrapX(x),y=this._wrapY(y);var xRect=this._matrix_map_rect(this.ctx._transform,{x:x,y:y,w:w,h:h});this.pdf.rect(xRect.x,xRect.y,xRect.w,xRect.h,"s")}},clearRect:function(x,y,w,h){if(!this.ctx.ignoreClearRect){x=this._wrapX(x),y=this._wrapY(y);var xRect=this._matrix_map_rect(this.ctx._transform,{x:x,y:y,w:w,h:h});this.save(),this.setFillStyle("#ffffff"),this.pdf.rect(xRect.x,xRect.y,xRect.w,xRect.h,"f"),this.restore()}},save:function(){this.ctx._fontSize=this.pdf.internal.getFontSize();var ctx=new context;ctx.copy(this.ctx),this.ctxStack.push(this.ctx),this.ctx=ctx},restore:function(){this.ctx=this.ctxStack.pop(),this.setFillStyle(this.ctx.fillStyle),this.setStrokeStyle(this.ctx.strokeStyle),this.setFont(this.ctx.font),this.pdf.setFontSize(this.ctx._fontSize),this.setLineCap(this.ctx.lineCap),this.setLineWidth(this.ctx.lineWidth),this.setLineJoin(this.ctx.lineJoin)},rect:function(x,y,w,h){this.moveTo(x,y),this.lineTo(x+w,y),this.lineTo(x+w,y+h),this.lineTo(x,y+h),this.lineTo(x,y),this.closePath()},beginPath:function(){this.path=[]},closePath:function(){this.path.push({type:"close"})},_getRGBA:function(style){var r,g,b,a;if(!style)return{r:0,g:0,b:0,a:0,style:style};if(this.internal.rxTransparent.test(style))r=0,g=0,b=0,a=0;else{var m=this.internal.rxRgb.exec(style);null!=m?(r=parseInt(m[1]),g=parseInt(m[2]),b=parseInt(m[3]),a=1):null!=(m=this.internal.rxRgba.exec(style))?(r=parseInt(m[1]),g=parseInt(m[2]),b=parseInt(m[3]),a=parseFloat(m[4])):(a=1,"#"!=style.charAt(0)&&((style=CssColors.colorNameToHex(style))||(style="#000000")),4===style.length?(r=style.substring(1,2),r+=r,g=style.substring(2,3),g+=g,b=style.substring(3,4),b+=b):(r=style.substring(1,3),g=style.substring(3,5),b=style.substring(5,7)),r=parseInt(r,16),g=parseInt(g,16),b=parseInt(b,16))}return{r:r,g:g,b:b,a:a,style:style}},setFillStyle:function(style){var rgba=this._getRGBA(style);this.ctx.fillStyle=style,this.ctx._isFillTransparent=0===rgba.a,this.ctx._fillOpacity=rgba.a,this.pdf.setFillColor(rgba.r,rgba.g,rgba.b,{a:rgba.a}),this.pdf.setTextColor(rgba.r,rgba.g,rgba.b,{a:rgba.a})},setStrokeStyle:function(style){var rgba=this._getRGBA(style);this.ctx.strokeStyle=rgba.style,this.ctx._isStrokeTransparent=0===rgba.a,this.ctx._strokeOpacity=rgba.a,0===rgba.a?this.pdf.setDrawColor(255,255,255):(rgba.a,this.pdf.setDrawColor(rgba.r,rgba.g,rgba.b))},fillText:function(text,x,y,maxWidth){if(!this._isFillTransparent()){x=this._wrapX(x),y=this._wrapY(y);var xpt=this._matrix_map_point(this.ctx._transform,[x,y]);x=xpt[0],y=xpt[1];var degs=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var lines;(lines=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var origPath=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=origPath}var scale=1;try{scale=this._matrix_decompose(this._getTransform()).scale[0]}catch(e){console.warn(e)}if(scale<.01)this.pdf.text(text,x,this._getBaseline(y),null,degs);else{var oldSize=this.pdf.internal.getFontSize();this.pdf.setFontSize(oldSize*scale),this.pdf.text(text,x,this._getBaseline(y),null,degs),this.pdf.setFontSize(oldSize)}this.ctx._clip_path.length>0&&lines.push("Q")}},strokeText:function(text,x,y,maxWidth){if(!this._isStrokeTransparent()){x=this._wrapX(x),y=this._wrapY(y);var xpt=this._matrix_map_point(this.ctx._transform,[x,y]);x=xpt[0],y=xpt[1];var degs=57.2958*this._matrix_rotation(this.ctx._transform);if(this.ctx._clip_path.length>0){var lines;(lines=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var origPath=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(null,!0),this.ctx._clip_path=this.path,this.path=origPath}var scale=1;try{scale=this._matrix_decompose(this._getTransform()).scale[0]}catch(e){console.warn(e)}if(1===scale)this.pdf.text(text,x,this._getBaseline(y),{stroke:!0},degs);else{var oldSize=this.pdf.internal.getFontSize();this.pdf.setFontSize(oldSize*scale),this.pdf.text(text,x,this._getBaseline(y),{stroke:!0},degs),this.pdf.setFontSize(oldSize)}this.ctx._clip_path.length>0&&lines.push("Q")}},setFont:function(font){this.ctx.font=font;if(null!=(m=/\s*(\w+)\s+(\w+)\s+(\w+)\s+([\d\.]+)(px|pt|em)\s+(.*)?/.exec(font))){var fontStyle=m[1],fontWeight=m[3],fontSize=m[4],fontSizeUnit=m[5],fontFamily=m[6];fontSize="px"===fontSizeUnit?Math.floor(parseFloat(fontSize)):"em"===fontSizeUnit?Math.floor(parseFloat(fontSize)*this.pdf.getFontSize()):Math.floor(parseFloat(fontSize)),this.pdf.setFontSize(fontSize),"bold"===fontWeight||"700"===fontWeight?this.pdf.setFontStyle("bold"):"italic"===fontStyle?this.pdf.setFontStyle("italic"):this.pdf.setFontStyle("normal");var jsPdfFontName,parts=(name=fontFamily).toLowerCase().split(/\s*,\s*/);jsPdfFontName=-1!=parts.indexOf("arial")?"Arial":-1!=parts.indexOf("verdana")?"Verdana":-1!=parts.indexOf("helvetica")?"Helvetica":-1!=parts.indexOf("sans-serif")?"sans-serif":-1!=parts.indexOf("fixed")?"Fixed":-1!=parts.indexOf("monospace")?"Monospace":-1!=parts.indexOf("terminal")?"Terminal":-1!=parts.indexOf("courier")?"Courier":-1!=parts.indexOf("times")?"Times":-1!=parts.indexOf("cursive")?"Cursive":-1!=parts.indexOf("fantasy")?"Fantasy":(parts.indexOf("serif"),"Serif");style="bold"===fontWeight?"bold":"normal",this.pdf.setFont(jsPdfFontName,style)}else{var m=/\s*(\d+)(pt|px|em)\s+([\w "]+)\s*([\w "]+)?/.exec(font);if(null!=m){var style,size=m[1],name=m[3];(style=m[4])||(style="normal"),size="em"===fontSizeUnit?Math.floor(parseFloat(fontSize)*this.pdf.getFontSize()):Math.floor(parseFloat(size)),this.pdf.setFontSize(size),this.pdf.setFont(name,style)}}},setTextBaseline:function(baseline){this.ctx.textBaseline=baseline},getTextBaseline:function(){return this.ctx.textBaseline},setTextAlign:function(align){this.ctx.textAlign=align},getTextAlign:function(){return this.ctx.textAlign},setLineWidth:function(width){this.ctx.lineWidth=width,this.pdf.setLineWidth(width)},setLineCap:function(style){this.ctx.lineCap=style,this.pdf.setLineCap(style)},setLineJoin:function(style){this.ctx.lineJoin=style,this.pdf.setLineJoin(style)},moveTo:function(x,y){x=this._wrapX(x),y=this._wrapY(y);var xpt=this._matrix_map_point(this.ctx._transform,[x,y]),obj={type:"mt",x:x=xpt[0],y:y=xpt[1]};this.path.push(obj)},_wrapX:function(x){return this.pageWrapXEnabled?x%this.pageWrapX:x},_wrapY:function(y){return this.pageWrapYEnabled?(this._gotoPage(this._page(y)),(y-this.lastBreak)%this.pageWrapY):y},transform:function(a,b,c,d,e,f){this.ctx._transform=[a,b,c,d,e,f]},setTransform:function(a,b,c,d,e,f){this.ctx._transform=[a,b,c,d,e,f]},_getTransform:function(){return this.ctx._transform},lastBreak:0,pageBreaks:[],_page:function(y){if(this.pageWrapYEnabled){this.lastBreak=0;for(var manualBreaks=0,autoBreaks=0,i=0;i<this.pageBreaks.length;i++)if(y>=this.pageBreaks[i]){manualBreaks++,0===this.lastBreak&&autoBreaks++;var spaceBetweenLastBreak=this.pageBreaks[i]-this.lastBreak;this.lastBreak=this.pageBreaks[i];autoBreaks+=Math.floor(spaceBetweenLastBreak/this.pageWrapY)}if(0===this.lastBreak){autoBreaks+=Math.floor(y/this.pageWrapY)+1}return autoBreaks+manualBreaks}return this.pdf.internal.getCurrentPageInfo().pageNumber},_gotoPage:function(pageOneBased){},lineTo:function(x,y){x=this._wrapX(x),y=this._wrapY(y);var xpt=this._matrix_map_point(this.ctx._transform,[x,y]),obj={type:"lt",x:x=xpt[0],y:y=xpt[1]};this.path.push(obj)},bezierCurveTo:function(x1,y1,x2,y2,x,y){x1=this._wrapX(x1),y1=this._wrapY(y1),x2=this._wrapX(x2),y2=this._wrapY(y2),x=this._wrapX(x),y=this._wrapY(y);var xpt;x=(xpt=this._matrix_map_point(this.ctx._transform,[x,y]))[0],y=xpt[1];var obj={type:"bct",x1:x1=(xpt=this._matrix_map_point(this.ctx._transform,[x1,y1]))[0],y1:y1=xpt[1],x2:x2=(xpt=this._matrix_map_point(this.ctx._transform,[x2,y2]))[0],y2:y2=xpt[1],x:x,y:y};this.path.push(obj)},quadraticCurveTo:function(x1,y1,x,y){x1=this._wrapX(x1),y1=this._wrapY(y1),x=this._wrapX(x),y=this._wrapY(y);var xpt;x=(xpt=this._matrix_map_point(this.ctx._transform,[x,y]))[0],y=xpt[1];var obj={type:"qct",x1:x1=(xpt=this._matrix_map_point(this.ctx._transform,[x1,y1]))[0],y1:y1=xpt[1],x:x,y:y};this.path.push(obj)},arc:function(x,y,radius,startAngle,endAngle,anticlockwise){if(x=this._wrapX(x),y=this._wrapY(y),!this._matrix_is_identity(this.ctx._transform)){var xpt=this._matrix_map_point(this.ctx._transform,[x,y]);x=xpt[0],y=xpt[1];var x_radPt0=this._matrix_map_point(this.ctx._transform,[0,0]),x_radPt=this._matrix_map_point(this.ctx._transform,[0,radius]);radius=Math.sqrt(Math.pow(x_radPt[0]-x_radPt0[0],2)+Math.pow(x_radPt[1]-x_radPt0[1],2))}var obj={type:"arc",x:x,y:y,radius:radius,startAngle:startAngle,endAngle:endAngle,anticlockwise:anticlockwise};this.path.push(obj)},drawImage:function(img,x,y,w,h,x2,y2,w2,h2){void 0!==x2&&(x=x2,y=y2,w=w2,h=h2),x=this._wrapX(x),y=this._wrapY(y);var format,xRect=this._matrix_map_rect(this.ctx._transform,{x:x,y:y,w:w,h:h}),m=(this._matrix_map_rect(this.ctx._transform,{x:x2,y:y2,w:w2,h:h2}),/data:image\/(\w+).*/i.exec(img));format=null!=m?m[1]:"png",this.pdf.addImage(img,format,xRect.x,xRect.y,xRect.w,xRect.h)},_matrix_multiply:function(m2,m1){var sx=m1[0],shy=m1[1],shx=m1[2],sy=m1[3],tx=m1[4],ty=m1[5],t0=sx*m2[0]+shy*m2[2],t2=shx*m2[0]+sy*m2[2],t4=tx*m2[0]+ty*m2[2]+m2[4];return shy=sx*m2[1]+shy*m2[3],sy=shx*m2[1]+sy*m2[3],ty=tx*m2[1]+ty*m2[3]+m2[5],sx=t0,shx=t2,tx=t4,[sx,shy,shx,sy,tx,ty]},_matrix_rotation:function(m){return Math.atan2(m[2],m[0])},_matrix_decompose:function(matrix){var a=matrix[0],b=matrix[1],c=matrix[2],d=matrix[3],scaleX=Math.sqrt(a*a+b*b),shear=(a/=scaleX)*c+(b/=scaleX)*d;c-=a*shear,d-=b*shear;var scaleY=Math.sqrt(c*c+d*d);return c/=scaleY,d/=scaleY,shear/=scaleY,a*d<b*c&&(a=-a,b=-b,shear=-shear,scaleX=-scaleX),{scale:[scaleX,0,0,scaleY,0,0],translate:[1,0,0,1,matrix[4],matrix[5]],rotate:[a,b,-b,a,0,0],skew:[1,0,shear,1,0,0]}},_matrix_map_point:function(m1,pt){var sx=m1[0],shy=m1[1],shx=m1[2],sy=m1[3],tx=m1[4],ty=m1[5],px=pt[0],py=pt[1];return[px*sx+py*shx+tx,px*shy+py*sy+ty]},_matrix_map_point_obj:function(m1,pt){var xpt=this._matrix_map_point(m1,[pt.x,pt.y]);return{x:xpt[0],y:xpt[1]}},_matrix_map_rect:function(m1,rect){var p1=this._matrix_map_point(m1,[rect.x,rect.y]),p2=this._matrix_map_point(m1,[rect.x+rect.w,rect.y+rect.h]);return{x:p1[0],y:p1[1],w:p2[0]-p1[0],h:p2[1]-p1[1]}},_matrix_is_identity:function(m1){return 1==m1[0]&&(0==m1[1]&&(0==m1[2]&&(1==m1[3]&&(0==m1[4]&&0==m1[5]))))},rotate:function(angle){var matrix=[Math.cos(angle),Math.sin(angle),-Math.sin(angle),Math.cos(angle),0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,matrix)},scale:function(sx,sy){var matrix=[sx,0,0,sy,0,0];this.ctx._transform=this._matrix_multiply(this.ctx._transform,matrix)},translate:function(x,y){var matrix=[1,0,0,1,x,y];this.ctx._transform=this._matrix_multiply(this.ctx._transform,matrix)},stroke:function(){if(this.ctx._clip_path.length>0){var lines;(lines=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var origPath=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._stroke(!0),this.ctx._clip_path=this.path,this.path=origPath,this._stroke(!1),lines.push("Q")}else this._stroke(!1)},_stroke:function(isClip){if(isClip||!this._isStrokeTransparent()){for(var moves=[],xPath=this.path,i=0;i<xPath.length;i++){var pt=xPath[i];switch(pt.type){case"mt":moves.push({start:pt,deltas:[],abs:[]});break;case"lt":var delta=[pt.x-xPath[i-1].x,pt.y-xPath[i-1].y];moves[moves.length-1].deltas.push(delta),moves[moves.length-1].abs.push(pt);break;case"bct":delta=[pt.x1-xPath[i-1].x,pt.y1-xPath[i-1].y,pt.x2-xPath[i-1].x,pt.y2-xPath[i-1].y,pt.x-xPath[i-1].x,pt.y-xPath[i-1].y];moves[moves.length-1].deltas.push(delta);break;case"qct":var x1=xPath[i-1].x+2/3*(pt.x1-xPath[i-1].x),y1=xPath[i-1].y+2/3*(pt.y1-xPath[i-1].y),x2=pt.x+2/3*(pt.x1-pt.x),y2=pt.y+2/3*(pt.y1-pt.y),x3=pt.x,y3=pt.y;delta=[x1-xPath[i-1].x,y1-xPath[i-1].y,x2-xPath[i-1].x,y2-xPath[i-1].y,x3-xPath[i-1].x,y3-xPath[i-1].y];moves[moves.length-1].deltas.push(delta);break;case"arc":0==moves.length&&moves.push({start:{x:0,y:0},deltas:[],abs:[]}),moves[moves.length-1].arc=!0,moves[moves.length-1].abs.push(pt)}}for(i=0;i<moves.length;i++){var style;if(style=i==moves.length-1?"s":null,moves[i].arc)for(var arcs=moves[i].abs,ii=0;ii<arcs.length;ii++){var arc=arcs[ii],start=360*arc.startAngle/(2*Math.PI),end=360*arc.endAngle/(2*Math.PI),x=arc.x,y=arc.y;this.internal.arc2(this,x,y,arc.radius,start,end,arc.anticlockwise,style,isClip)}else{x=moves[i].start.x,y=moves[i].start.y;isClip?(this.pdf.lines(moves[i].deltas,x,y,null,null),this.pdf.clip_fixed()):this.pdf.lines(moves[i].deltas,x,y,null,style)}}}},_isFillTransparent:function(){return this.ctx._isFillTransparent||0==this.globalAlpha},_isStrokeTransparent:function(){return this.ctx._isStrokeTransparent||0==this.globalAlpha},fill:function(fillRule){if(this.ctx._clip_path.length>0){var lines;(lines=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage()).push("q");var origPath=this.path;this.path=this.ctx._clip_path,this.ctx._clip_path=[],this._fill(fillRule,!0),this.ctx._clip_path=this.path,this.path=origPath,this._fill(fillRule,!1),lines.push("Q")}else this._fill(fillRule,!1)},_fill:function(fillRule,isClip){if(!this._isFillTransparent()){var lines,v2Support="function"==typeof this.pdf.internal.newObject2;lines=window.outIntercept?"group"===window.outIntercept.type?window.outIntercept.stream:window.outIntercept:this.internal.getCurrentPage();var moves=[],outInterceptOld=window.outIntercept;if(v2Support)switch(this.ctx.globalCompositeOperation){case"normal":case"source-over":break;case"destination-in":case"destination-out":var obj=this.pdf.internal.newStreamObject(),obj2=this.pdf.internal.newObject2();obj2.push("<</Type /ExtGState"),obj2.push("/SMask <</S /Alpha /G "+obj.objId+" 0 R>>"),obj2.push(">>");var gsName="MASK"+obj2.objId;this.pdf.internal.addGraphicsState(gsName,obj2.objId);var instruction="/"+gsName+" gs";lines.splice(0,0,"q"),lines.splice(1,0,instruction),lines.push("Q"),window.outIntercept=obj;break;default:var dictionaryEntry="/"+this.pdf.internal.blendModeMap[this.ctx.globalCompositeOperation.toUpperCase()];dictionaryEntry&&this.pdf.internal.out(dictionaryEntry+" gs")}var alpha=this.ctx.globalAlpha;if(this.ctx._fillOpacity<1&&(alpha=this.ctx._fillOpacity),v2Support){var objOpac=this.pdf.internal.newObject2();objOpac.push("<</Type /ExtGState"),objOpac.push("/CA "+alpha),objOpac.push("/ca "+alpha),objOpac.push(">>");gsName="GS_O_"+objOpac.objId;this.pdf.internal.addGraphicsState(gsName,objOpac.objId),this.pdf.internal.out("/"+gsName+" gs")}for(var xPath=this.path,i=0;i<xPath.length;i++){var pt=xPath[i];switch(pt.type){case"mt":moves.push({start:pt,deltas:[],abs:[]});break;case"lt":var delta=[pt.x-xPath[i-1].x,pt.y-xPath[i-1].y];moves[moves.length-1].deltas.push(delta),moves[moves.length-1].abs.push(pt);break;case"bct":delta=[pt.x1-xPath[i-1].x,pt.y1-xPath[i-1].y,pt.x2-xPath[i-1].x,pt.y2-xPath[i-1].y,pt.x-xPath[i-1].x,pt.y-xPath[i-1].y];moves[moves.length-1].deltas.push(delta);break;case"qct":var x1=xPath[i-1].x+2/3*(pt.x1-xPath[i-1].x),y1=xPath[i-1].y+2/3*(pt.y1-xPath[i-1].y),x2=pt.x+2/3*(pt.x1-pt.x),y2=pt.y+2/3*(pt.y1-pt.y),x3=pt.x,y3=pt.y;delta=[x1-xPath[i-1].x,y1-xPath[i-1].y,x2-xPath[i-1].x,y2-xPath[i-1].y,x3-xPath[i-1].x,y3-xPath[i-1].y];moves[moves.length-1].deltas.push(delta);break;case"arc":0===moves.length&&moves.push({deltas:[],abs:[]}),moves[moves.length-1].arc=!0,moves[moves.length-1].abs.push(pt);break;case"close":moves.push({close:!0})}}for(i=0;i<moves.length;i++){var style;if(i==moves.length-1?(style="f","evenodd"===fillRule&&(style+="*")):style=null,moves[i].close)this.pdf.internal.out("h"),this.pdf.internal.out("f");else if(moves[i].arc){moves[i].start&&this.internal.move2(this,moves[i].start.x,moves[i].start.y);for(var arcs=moves[i].abs,ii=0;ii<arcs.length;ii++){var arc=arcs[ii];if(void 0!==arc.startAngle){var start=360*arc.startAngle/(2*Math.PI),end=360*arc.endAngle/(2*Math.PI),x=arc.x,y=arc.y;if(0===ii&&this.internal.move2(this,x,y),this.internal.arc2(this,x,y,arc.radius,start,end,arc.anticlockwise,null,isClip),ii===arcs.length-1&&moves[i].start){x=moves[i].start.x,y=moves[i].start.y;this.internal.line2(c2d,x,y)}}else this.internal.line2(c2d,arc.x,arc.y)}}else{x=moves[i].start.x,y=moves[i].start.y;isClip?(this.pdf.lines(moves[i].deltas,x,y,null,null),this.pdf.clip_fixed()):this.pdf.lines(moves[i].deltas,x,y,null,style)}}window.outIntercept=outInterceptOld}},pushMask:function(){if("function"==typeof this.pdf.internal.newObject2){var obj=this.pdf.internal.newStreamObject(),obj2=this.pdf.internal.newObject2();obj2.push("<</Type /ExtGState"),obj2.push("/SMask <</S /Alpha /G "+obj.objId+" 0 R>>"),obj2.push(">>");var gsName="MASK"+obj2.objId;this.pdf.internal.addGraphicsState(gsName,obj2.objId);var instruction="/"+gsName+" gs";this.pdf.internal.out(instruction)}else console.log("jsPDF v2 not enabled")},clip:function(){if(this.ctx._clip_path.length>0)for(var i=0;i<this.path.length;i++)this.ctx._clip_path.push(this.path[i]);else this.ctx._clip_path=this.path;this.path=[]},measureText:function(text){var pdf=this.pdf;return{getWidth:function(){var fontSize=pdf.internal.getFontSize(),txtWidth=pdf.getStringUnitWidth(text)*fontSize/pdf.internal.scaleFactor;return txtWidth*=1.3333},get width(){return this.getWidth(text)}}},_getBaseline:function(y){var height=parseInt(this.pdf.internal.getFontSize()),descent=.25*height;switch(this.ctx.textBaseline){case"bottom":return y-descent;case"top":return y+height;case"hanging":return y+height-descent;case"middle":return y+height/2-descent;case"ideographic":return y;case"alphabetic":default:return y}}};var c2d=jsPDFAPI.context2d;Object.defineProperty(c2d,"fillStyle",{set:function(value){this.setFillStyle(value)},get:function(){return this.ctx.fillStyle}}),Object.defineProperty(c2d,"strokeStyle",{set:function(value){this.setStrokeStyle(value)},get:function(){return this.ctx.strokeStyle}}),Object.defineProperty(c2d,"lineWidth",{set:function(value){this.setLineWidth(value)},get:function(){return this.ctx.lineWidth}}),Object.defineProperty(c2d,"lineCap",{set:function(val){this.setLineCap(val)},get:function(){return this.ctx.lineCap}}),Object.defineProperty(c2d,"lineJoin",{set:function(val){this.setLineJoin(val)},get:function(){return this.ctx.lineJoin}}),Object.defineProperty(c2d,"miterLimit",{set:function(val){this.ctx.miterLimit=val},get:function(){return this.ctx.miterLimit}}),Object.defineProperty(c2d,"textBaseline",{set:function(value){this.setTextBaseline(value)},get:function(){return this.getTextBaseline()}}),Object.defineProperty(c2d,"textAlign",{set:function(value){this.setTextAlign(value)},get:function(){return this.getTextAlign()}}),Object.defineProperty(c2d,"font",{set:function(value){this.setFont(value)},get:function(){return this.ctx.font}}),Object.defineProperty(c2d,"globalCompositeOperation",{set:function(value){this.ctx.globalCompositeOperation=value},get:function(){return this.ctx.globalCompositeOperation}}),Object.defineProperty(c2d,"globalAlpha",{set:function(value){this.ctx.globalAlpha=value},get:function(){return this.ctx.globalAlpha}}),Object.defineProperty(c2d,"ignoreClearRect",{set:function(value){this.ctx.ignoreClearRect=value},get:function(){return this.ctx.ignoreClearRect}}),c2d.internal={},c2d.internal.rxRgb=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,c2d.internal.rxRgba=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d\.]+)\s*\)/,c2d.internal.rxTransparent=/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/,c2d.internal.arc=function(c2d,xc,yc,r,a1,a2,anticlockwise,style){for(var k=this.pdf.internal.scaleFactor,pageHeight=this.pdf.internal.pageSize.height,f2=this.pdf.internal.f2,a1r=a1*(Math.PI/180),a2r=a2*(Math.PI/180),curves=this.createArc(r,a1r,a2r,anticlockwise),i=0;i<curves.length;i++){var curve=curves[i];0===i?this.pdf.internal.out([f2((curve.x1+xc)*k),f2((pageHeight-(curve.y1+yc))*k),"m",f2((curve.x2+xc)*k),f2((pageHeight-(curve.y2+yc))*k),f2((curve.x3+xc)*k),f2((pageHeight-(curve.y3+yc))*k),f2((curve.x4+xc)*k),f2((pageHeight-(curve.y4+yc))*k),"c"].join(" ")):this.pdf.internal.out([f2((curve.x2+xc)*k),f2((pageHeight-(curve.y2+yc))*k),f2((curve.x3+xc)*k),f2((pageHeight-(curve.y3+yc))*k),f2((curve.x4+xc)*k),f2((pageHeight-(curve.y4+yc))*k),"c"].join(" ")),c2d._lastPoint={x:xc,y:yc}}null!==style&&this.pdf.internal.out(this.pdf.internal.getStyle(style))},c2d.internal.arc2=function(c2d,x,y,r,a1,a2,anticlockwise,style,isClip){var centerX=x,centerY=y;isClip?(this.arc(c2d,centerX,centerY,r,a1,a2,anticlockwise,null),this.pdf.clip_fixed()):this.arc(c2d,centerX,centerY,r,a1,a2,anticlockwise,style)},c2d.internal.move2=function(c2d,x,y){var k=this.pdf.internal.scaleFactor,pageHeight=this.pdf.internal.pageSize.height,f2=this.pdf.internal.f2;this.pdf.internal.out([f2(x*k),f2((pageHeight-y)*k),"m"].join(" ")),c2d._lastPoint={x:x,y:y}},c2d.internal.line2=function(c2d,dx,dy){var k=this.pdf.internal.scaleFactor,pageHeight=this.pdf.internal.pageSize.height,f2=this.pdf.internal.f2,pt={x:dx,y:dy};this.pdf.internal.out([f2(pt.x*k),f2((pageHeight-pt.y)*k),"l"].join(" ")),c2d._lastPoint=pt},c2d.internal.createArc=function(radius,startAngle,endAngle,anticlockwise){var twoPI=2*Math.PI,piOverTwo=Math.PI/2,startAngleN=startAngle;for((startAngleN<twoPI||startAngleN>twoPI)&&(startAngleN%=twoPI),startAngleN<0&&(startAngleN=twoPI+startAngleN);startAngle>endAngle;)startAngle-=twoPI;var totalAngle=Math.abs(endAngle-startAngle);totalAngle<twoPI&&anticlockwise&&(totalAngle=twoPI-totalAngle);for(var curves=[],sgn=anticlockwise?-1:1,a1=startAngleN;totalAngle>1e-5;){var a2=a1+sgn*Math.min(totalAngle,piOverTwo);curves.push(this.createSmallArc(radius,a1,a2)),totalAngle-=Math.abs(a2-a1),a1=a2}return curves},c2d.internal.getCurrentPage=function(){return this.pdf.internal.pages[this.pdf.internal.getCurrentPageInfo().pageNumber]},c2d.internal.createSmallArc=function(r,a1,a2){var a=(a2-a1)/2,x4=r*Math.cos(a),y4=r*Math.sin(a),x1=x4,y1=-y4,q1=x1*x1+y1*y1,q2=q1+x1*x4+y1*y4,k2=4/3*(Math.sqrt(2*q1*q2)-q2)/(x1*y4-y1*x4),x2=x1-k2*y1,y2=y1+k2*x1,x3=x2,y3=-y2,ar=a+a1,cos_ar=Math.cos(ar),sin_ar=Math.sin(ar);return{x1:r*Math.cos(a1),y1:r*Math.sin(a1),x2:x2*cos_ar-y2*sin_ar,y2:x2*sin_ar+y2*cos_ar,x3:x3*cos_ar-y3*sin_ar,y3:x3*sin_ar+y3*cos_ar,x4:r*Math.cos(a2),y4:r*Math.sin(a2)}}}(jsPDF.API),function(jsPDFAPI){var clone,_DrillForContent,FontNameDB,FontStyleMap,TextAlignMap,FontWeightMap,FloatMap,ClearMap,GetCSS,PurgeWhiteSpace,Renderer,ResolveFont,ResolveUnitedNumber,UnitedNumberMap,elementHandledElsewhere,images,loadImgs,checkForFooter,process,tableToJson;clone=function(){function Clone(){}return function(obj){return Clone.prototype=obj,new Clone}}(),PurgeWhiteSpace=function(array){var fragment,i,l,lTrimmed,r,rTrimmed,trailingSpace;for(i=0,l=array.length,fragment=void 0,lTrimmed=!1,rTrimmed=!1;!lTrimmed&&i!==l;)(fragment=array[i]=array[i].trimLeft())&&(lTrimmed=!0),i++;for(i=l-1;l&&!rTrimmed&&-1!==i;)(fragment=array[i]=array[i].trimRight())&&(rTrimmed=!0),i--;for(r=/\s+$/g,trailingSpace=!0,i=0;i!==l;)"\u2028"!=array[i]&&(fragment=array[i].replace(/\s+/g," "),trailingSpace&&(fragment=fragment.trimLeft()),fragment&&(trailingSpace=r.test(fragment)),array[i]=fragment),i++;return array},ResolveFont=function(css_font_family_string){var name,part,parts;for(name=void 0,part=(parts=css_font_family_string.split(",")).shift();!name&&part;)name=FontNameDB[part.trim().toLowerCase()],part=parts.shift();return name},ResolveUnitedNumber=function(css_line_height_string){(css_line_height_string="auto"===css_line_height_string?"0px":css_line_height_string).indexOf("em")>-1&&!isNaN(Number(css_line_height_string.replace("em","")))&&(css_line_height_string=18.719*Number(css_line_height_string.replace("em",""))+"px"),css_line_height_string.indexOf("pt")>-1&&!isNaN(Number(css_line_height_string.replace("pt","")))&&(css_line_height_string=1.333*Number(css_line_height_string.replace("pt",""))+"px");var value;return void 0,16,(value=UnitedNumberMap[css_line_height_string])?value:void 0!==(value={"xx-small":9,"x-small":11,small:13,medium:16,large:19,"x-large":23,"xx-large":28,auto:0}[{css_line_height_string:css_line_height_string}])?UnitedNumberMap[css_line_height_string]=value/16:(value=parseFloat(css_line_height_string))?UnitedNumberMap[css_line_height_string]=value/16:3===(value=css_line_height_string.match(/([\d\.]+)(px)/)).length?UnitedNumberMap[css_line_height_string]=parseFloat(value[1])/16:UnitedNumberMap[css_line_height_string]=1},GetCSS=function(element){var css,tmp,computedCSSElement;return computedCSSElement=function(el){var compCSS;return compCSS=function(el){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(el,null):el.currentStyle?el.currentStyle:el.style}(element),function(prop){return prop=prop.replace(/-\D/g,function(match){return match.charAt(1).toUpperCase()}),compCSS[prop]}}(),css={},tmp=void 0,css["font-family"]=ResolveFont(computedCSSElement("font-family"))||"times",css["font-style"]=FontStyleMap[computedCSSElement("font-style")]||"normal",css["text-align"]=TextAlignMap[computedCSSElement("text-align")]||"left","bold"===(tmp=FontWeightMap[computedCSSElement("font-weight")]||"normal")&&("normal"===css["font-style"]?css["font-style"]=tmp:css["font-style"]=tmp+css["font-style"]),css["font-size"]=ResolveUnitedNumber(computedCSSElement("font-size"))||1,css["line-height"]=ResolveUnitedNumber(computedCSSElement("line-height"))||1,css.display="inline"===computedCSSElement("display")?"inline":"block",tmp="block"===css.display,css["margin-top"]=tmp&&ResolveUnitedNumber(computedCSSElement("margin-top"))||0,css["margin-bottom"]=tmp&&ResolveUnitedNumber(computedCSSElement("margin-bottom"))||0,css["padding-top"]=tmp&&ResolveUnitedNumber(computedCSSElement("padding-top"))||0,css["padding-bottom"]=tmp&&ResolveUnitedNumber(computedCSSElement("padding-bottom"))||0,css["margin-left"]=tmp&&ResolveUnitedNumber(computedCSSElement("margin-left"))||0,css["margin-right"]=tmp&&ResolveUnitedNumber(computedCSSElement("margin-right"))||0,css["padding-left"]=tmp&&ResolveUnitedNumber(computedCSSElement("padding-left"))||0,css["padding-right"]=tmp&&ResolveUnitedNumber(computedCSSElement("padding-right"))||0,css["page-break-before"]=computedCSSElement("page-break-before")||"auto",css.float=FloatMap[computedCSSElement("cssFloat")]||"none",css.clear=ClearMap[computedCSSElement("clear")]||"none",css.color=computedCSSElement("color"),css},elementHandledElsewhere=function(element,renderer,elementHandlers){var handlers,i,isHandledElsewhere,l,classNames;if(isHandledElsewhere=!1,i=void 0,l=void 0,handlers=elementHandlers["#"+element.id])if("function"==typeof handlers)isHandledElsewhere=handlers(element,renderer);else for(i=0,l=handlers.length;!isHandledElsewhere&&i!==l;)isHandledElsewhere=handlers[i](element,renderer),i++;if(handlers=elementHandlers[element.nodeName],!isHandledElsewhere&&handlers)if("function"==typeof handlers)isHandledElsewhere=handlers(element,renderer);else for(i=0,l=handlers.length;!isHandledElsewhere&&i!==l;)isHandledElsewhere=handlers[i](element,renderer),i++;for(classNames=element.className?element.className.split(" "):[],i=0;i<classNames.length;i++)if(handlers=elementHandlers["."+classNames[i]],!isHandledElsewhere&&handlers)if("function"==typeof handlers)isHandledElsewhere=handlers(element,renderer);else for(i=0,l=handlers.length;!isHandledElsewhere&&i!==l;)isHandledElsewhere=handlers[i](element,renderer),i++;return isHandledElsewhere},tableToJson=function(table,renderer){var data,headers,i,j,rowData,tableRow,table_with,cell,l;for(data=[],headers=[],i=0,l=table.rows[0].cells.length,table_with=table.clientWidth;i<l;)cell=table.rows[0].cells[i],headers[i]={name:cell.textContent.toLowerCase().replace(/\s+/g,""),prompt:cell.textContent.replace(/\r?\n/g,""),width:cell.clientWidth/table_with*renderer.pdf.internal.pageSize.width},i++;for(i=1;i<table.rows.length;){for(tableRow=table.rows[i],rowData={},j=0;j<tableRow.cells.length;)rowData[headers[j].name]=tableRow.cells[j].textContent.replace(/\r?\n/g,""),j++;data.push(rowData),i++}return{rows:data,headers:headers}};var SkipNode={SCRIPT:1,STYLE:1,NOSCRIPT:1,OBJECT:1,EMBED:1,SELECT:1},listCount=1;_DrillForContent=function(element,renderer,elementHandlers){var cn,cns,fragmentCSS,i,isBlock,l,table2json,cb;for(cns=element.childNodes,cn=void 0,(isBlock="block"===(fragmentCSS=GetCSS(element)).display)&&(renderer.setBlockBoundary(),renderer.setBlockStyle(fragmentCSS)),i=0,l=cns.length;i<l;){if("object"===(void 0===(cn=cns[i])?"undefined":_typeof(cn))){if(renderer.executeWatchFunctions(cn),1===cn.nodeType&&"HEADER"===cn.nodeName){var header=cn,oldMarginTop=renderer.pdf.margins_doc.top;renderer.pdf.internal.events.subscribe("addPage",function(pageInfo){renderer.y=oldMarginTop,_DrillForContent(header,renderer,elementHandlers),renderer.pdf.margins_doc.top=renderer.y+10,renderer.y+=10},!1)}if(8===cn.nodeType&&"#comment"===cn.nodeName)~cn.textContent.indexOf("ADD_PAGE")&&(renderer.pdf.addPage(),renderer.y=renderer.pdf.margins_doc.top);else if(1!==cn.nodeType||SkipNode[cn.nodeName])if(3===cn.nodeType){var value=cn.nodeValue;if(cn.nodeValue&&"LI"===cn.parentNode.nodeName)if("OL"===cn.parentNode.parentNode.nodeName)value=listCount+++". "+value;else{var fontSize=fragmentCSS["font-size"],offsetX=(3-.75*fontSize)*renderer.pdf.internal.scaleFactor,offsetY=.75*fontSize*renderer.pdf.internal.scaleFactor,radius=1.74*fontSize/renderer.pdf.internal.scaleFactor;cb=function(x,y){this.pdf.circle(x+offsetX,y+offsetY,radius,"FD")}}16&cn.ownerDocument.body.compareDocumentPosition(cn)&&renderer.addText(value,fragmentCSS)}else"string"==typeof cn&&renderer.addText(cn,fragmentCSS);else{var cached_image;if("IMG"===cn.nodeName){var url=cn.getAttribute("src");cached_image=images[renderer.pdf.sHashCode(url)||url]}if(cached_image){renderer.pdf.internal.pageSize.height-renderer.pdf.margins_doc.bottom<renderer.y+cn.height&&renderer.y>renderer.pdf.margins_doc.top&&(renderer.pdf.addPage(),renderer.y=renderer.pdf.margins_doc.top,renderer.executeWatchFunctions(cn));var imagesCSS=GetCSS(cn),imageX=renderer.x,fontToUnitRatio=12/renderer.pdf.internal.scaleFactor,additionalSpaceLeft=(imagesCSS["margin-left"]+imagesCSS["padding-left"])*fontToUnitRatio,additionalSpaceRight=(imagesCSS["margin-right"]+imagesCSS["padding-right"])*fontToUnitRatio,additionalSpaceTop=(imagesCSS["margin-top"]+imagesCSS["padding-top"])*fontToUnitRatio,additionalSpaceBottom=(imagesCSS["margin-bottom"]+imagesCSS["padding-bottom"])*fontToUnitRatio;void 0!==imagesCSS.float&&"right"===imagesCSS.float?imageX+=renderer.settings.width-cn.width-additionalSpaceRight:imageX+=additionalSpaceLeft,renderer.pdf.addImage(cached_image,imageX,renderer.y+additionalSpaceTop,cn.width,cn.height),cached_image=void 0,"right"===imagesCSS.float||"left"===imagesCSS.float?(renderer.watchFunctions.push(function(diffX,thresholdY,diffWidth,el){return renderer.y>=thresholdY?(renderer.x+=diffX,renderer.settings.width+=diffWidth,!0):!!(el&&1===el.nodeType&&!SkipNode[el.nodeName]&&renderer.x+el.width>renderer.pdf.margins_doc.left+renderer.pdf.margins_doc.width)&&(renderer.x+=diffX,renderer.y=thresholdY,renderer.settings.width+=diffWidth,!0)}.bind(this,"left"===imagesCSS.float?-cn.width-additionalSpaceLeft-additionalSpaceRight:0,renderer.y+cn.height+additionalSpaceTop+additionalSpaceBottom,cn.width)),renderer.watchFunctions.push(function(yPositionAfterFloating,pages,el){return!(renderer.y<yPositionAfterFloating&&pages===renderer.pdf.internal.getNumberOfPages())||1===el.nodeType&&"both"===GetCSS(el).clear&&(renderer.y=yPositionAfterFloating,!0)}.bind(this,renderer.y+cn.height,renderer.pdf.internal.getNumberOfPages())),renderer.settings.width-=cn.width+additionalSpaceLeft+additionalSpaceRight,"left"===imagesCSS.float&&(renderer.x+=cn.width+additionalSpaceLeft+additionalSpaceRight)):renderer.y+=cn.height+additionalSpaceTop+additionalSpaceBottom}else if("TABLE"===cn.nodeName)table2json=tableToJson(cn,renderer),renderer.y+=10,renderer.pdf.table(renderer.x,renderer.y,table2json.rows,table2json.headers,{autoSize:!1,printHeaders:elementHandlers.printHeaders,margins:renderer.pdf.margins_doc,css:GetCSS(cn)}),renderer.y=renderer.pdf.lastCellPos.y+renderer.pdf.lastCellPos.h+20;else if("OL"===cn.nodeName||"UL"===cn.nodeName)listCount=1,elementHandledElsewhere(cn,renderer,elementHandlers)||_DrillForContent(cn,renderer,elementHandlers),renderer.y+=10;else if("LI"===cn.nodeName){var temp=renderer.x;renderer.x+=20/renderer.pdf.internal.scaleFactor,renderer.y+=3,elementHandledElsewhere(cn,renderer,elementHandlers)||_DrillForContent(cn,renderer,elementHandlers),renderer.x=temp}else"BR"===cn.nodeName?(renderer.y+=fragmentCSS["font-size"]*renderer.pdf.internal.scaleFactor,renderer.addText("\u2028",clone(fragmentCSS))):elementHandledElsewhere(cn,renderer,elementHandlers)||_DrillForContent(cn,renderer,elementHandlers)}}i++}if(elementHandlers.outY=renderer.y,isBlock)return renderer.setBlockBoundary(cb)},images={},loadImgs=function(element,renderer,elementHandlers,cb){function done(){renderer.pdf.internal.events.publish("imagesLoaded"),cb(found_images)}function loadImage(url,width,height){if(url){var img=new Image;found_images=++x,img.crossOrigin="",img.onerror=img.onload=function(){if(img.complete&&(0===img.src.indexOf("data:image/")&&(img.width=width||img.width||0,img.height=height||img.height||0),img.width+img.height)){var hash=renderer.pdf.sHashCode(url)||url;images[hash]=images[hash]||img}--x||done()},img.src=url}}for(var found_images,imgs=element.getElementsByTagName("img"),l=imgs.length,x=0;l--;)loadImage(imgs[l].getAttribute("src"),imgs[l].width,imgs[l].height);return x||done()},checkForFooter=function(elem,renderer,elementHandlers){var footer=elem.getElementsByTagName("footer");if(footer.length>0){footer=footer[0];var oldOut=renderer.pdf.internal.write,oldY=renderer.y;renderer.pdf.internal.write=function(){},_DrillForContent(footer,renderer,elementHandlers);var footerHeight=Math.ceil(renderer.y-oldY)+5;renderer.y=oldY,renderer.pdf.internal.write=oldOut,renderer.pdf.margins_doc.bottom+=footerHeight;for(var renderFooter=function(pageInfo){var pageNumber=void 0!==pageInfo?pageInfo.pageNumber:1,oldPosition=renderer.y;renderer.y=renderer.pdf.internal.pageSize.height-renderer.pdf.margins_doc.bottom,renderer.pdf.margins_doc.bottom-=footerHeight;for(var spans=footer.getElementsByTagName("span"),i=0;i<spans.length;++i)(" "+spans[i].className+" ").replace(/[\n\t]/g," ").indexOf(" pageCounter ")>-1&&(spans[i].innerHTML=pageNumber),(" "+spans[i].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&(spans[i].innerHTML="###jsPDFVarTotalPages###");_DrillForContent(footer,renderer,elementHandlers),renderer.pdf.margins_doc.bottom+=footerHeight,renderer.y=oldPosition},spans=footer.getElementsByTagName("span"),i=0;i<spans.length;++i)(" "+spans[i].className+" ").replace(/[\n\t]/g," ").indexOf(" totalPages ")>-1&&renderer.pdf.internal.events.subscribe("htmlRenderingFinished",renderer.pdf.putTotalPages.bind(renderer.pdf,"###jsPDFVarTotalPages###"),!0);renderer.pdf.internal.events.subscribe("addPage",renderFooter,!1),renderFooter(),SkipNode.FOOTER=1}},process=function(pdf,element,x,y,settings,callback){if(!element)return!1;"string"==typeof element||element.parentNode||(element=""+element.innerHTML),"string"==typeof element&&(element=function(element){var $frame,$hiddendiv,framename,visuallyhidden;return framename="jsPDFhtmlText"+Date.now().toString()+(1e3*Math.random()).toFixed(0),visuallyhidden="position: absolute !important;clip: rect(1px 1px 1px 1px); /* IE6, IE7 */clip: rect(1px, 1px, 1px, 1px);padding:0 !important;border:0 !important;height: 1px !important;width: 1px !important; top:auto;left:-100px;overflow: hidden;",$hiddendiv=document.createElement("div"),$hiddendiv.style.cssText=visuallyhidden,$hiddendiv.innerHTML='<iframe style="height:1px;width:1px" name="'+framename+'" />',document.body.appendChild($hiddendiv),($frame=window.frames[framename]).document.open(),$frame.document.writeln(element),$frame.document.close(),$frame.document.body}(element.replace(/<\/?script[^>]*?>/gi,"")));var out,r=new Renderer(pdf,x,y,settings);return loadImgs.call(this,element,r,settings.elementHandlers,function(found_images){checkForFooter(element,r,settings.elementHandlers),_DrillForContent(element,r,settings.elementHandlers),r.pdf.internal.events.publish("htmlRenderingFinished"),out=r.dispose(),"function"==typeof callback?callback(out):found_images&&console.error("jsPDF Warning: rendering issues? provide a callback to fromHTML!")}),out||{x:r.x,y:r.y}},(Renderer=function(pdf,x,y,settings){return this.pdf=pdf,this.x=x,this.y=y,this.settings=settings,this.watchFunctions=[],this.init(),this}).prototype.init=function(){return this.paragraph={text:[],style:[]},this.pdf.internal.write("q")},Renderer.prototype.dispose=function(){return this.pdf.internal.write("Q"),{x:this.x,y:this.y,ready:!0}},Renderer.prototype.executeWatchFunctions=function(el){var ret=!1,narray=[];if(this.watchFunctions.length>0){for(var i=0;i<this.watchFunctions.length;++i)!0===this.watchFunctions[i](el)?ret=!0:narray.push(this.watchFunctions[i]);this.watchFunctions=narray}return ret},Renderer.prototype.splitFragmentsIntoLines=function(fragments,styles){var currentLineLength,ff,fontMetrics,fontMetricsCache,fragment,fragmentChopped,fragmentLength,fragmentSpecificMetrics,fs,k,line,lines,maxLineLength,style;for(12,k=this.pdf.internal.scaleFactor,fontMetricsCache={},ff=void 0,fs=void 0,fontMetrics=void 0,fragment=void 0,style=void 0,fragmentSpecificMetrics=void 0,fragmentLength=void 0,fragmentChopped=void 0,lines=[line=[]],currentLineLength=0,maxLineLength=this.settings.width;fragments.length;)if(fragment=fragments.shift(),style=styles.shift(),fragment)if(ff=style["font-family"],fs=style["font-style"],(fontMetrics=fontMetricsCache[ff+fs])||(fontMetrics=this.pdf.internal.getFont(ff,fs).metadata.Unicode,fontMetricsCache[ff+fs]=fontMetrics),fragmentSpecificMetrics={widths:fontMetrics.widths,kerning:fontMetrics.kerning,fontSize:12*style["font-size"],textIndent:currentLineLength},fragmentLength=this.pdf.getStringUnitWidth(fragment,fragmentSpecificMetrics)*fragmentSpecificMetrics.fontSize/k,"\u2028"==fragment)line=[],lines.push(line);else if(currentLineLength+fragmentLength>maxLineLength){for(fragmentChopped=this.pdf.splitTextToSize(fragment,maxLineLength,fragmentSpecificMetrics),line.push([fragmentChopped.shift(),style]);fragmentChopped.length;)line=[[fragmentChopped.shift(),style]],lines.push(line);currentLineLength=this.pdf.getStringUnitWidth(line[0][0],fragmentSpecificMetrics)*fragmentSpecificMetrics.fontSize/k}else line.push([fragment,style]),currentLineLength+=fragmentLength;if(void 0!==style["text-align"]&&("center"===style["text-align"]||"right"===style["text-align"]||"justify"===style["text-align"]))for(var i=0;i<lines.length;++i){var length=this.pdf.getStringUnitWidth(lines[i][0][0],fragmentSpecificMetrics)*fragmentSpecificMetrics.fontSize/k;i>0&&(lines[i][0][1]=clone(lines[i][0][1]));var space=maxLineLength-length;if("right"===style["text-align"])lines[i][0][1]["margin-left"]=space;else if("center"===style["text-align"])lines[i][0][1]["margin-left"]=space/2;else if("justify"===style["text-align"]){var countSpaces=lines[i][0][0].split(" ").length-1;lines[i][0][1]["word-spacing"]=space/countSpaces,i===lines.length-1&&(lines[i][0][1]["word-spacing"]=0)}}return lines},Renderer.prototype.RenderTextFragment=function(text,style){var font,maxLineHeight;maxLineHeight=0,this.pdf.internal.pageSize.height-this.pdf.margins_doc.bottom<this.y+this.pdf.internal.getFontSize()&&(this.pdf.internal.write("ET","Q"),this.pdf.addPage(),this.y=this.pdf.margins_doc.top,this.pdf.internal.write("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),style.color,"Td"),maxLineHeight=Math.max(maxLineHeight,style["line-height"],style["font-size"]),this.pdf.internal.write(0,(-12*maxLineHeight).toFixed(2),"Td")),font=this.pdf.internal.getFont(style["font-family"],style["font-style"]);var pdfTextColor=this.getPdfColor(style.color);pdfTextColor!==this.lastTextColor&&(this.pdf.internal.write(pdfTextColor),this.lastTextColor=pdfTextColor),void 0!==style["word-spacing"]&&style["word-spacing"]>0&&this.pdf.internal.write(style["word-spacing"].toFixed(2),"Tw"),this.pdf.internal.write("/"+font.id,(12*style["font-size"]).toFixed(2),"Tf","("+this.pdf.internal.pdfEscape(text)+") Tj"),void 0!==style["word-spacing"]&&this.pdf.internal.write(0,"Tw")},Renderer.prototype.getPdfColor=function(style){var r,g,b,m=/rgb\s*\(\s*(\d+),\s*(\d+),\s*(\d+\s*)\)/.exec(style);if(null!=m?(r=parseInt(m[1]),g=parseInt(m[2]),b=parseInt(m[3])):("#"!=style.charAt(0)&&((style=CssColors.colorNameToHex(style))||(style="#000000")),r=style.substring(1,3),r=parseInt(r,16),g=style.substring(3,5),g=parseInt(g,16),b=style.substring(5,7),b=parseInt(b,16)),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var hex=parseInt(r.substr(1),16);r=hex>>16&255,g=hex>>8&255,b=255&hex}var f3=this.f3;return 0===r&&0===g&&0===b||void 0===g?f3(r/255)+" g":[f3(r/255),f3(g/255),f3(b/255),"rg"].join(" ")},Renderer.prototype.f3=function(number){return number.toFixed(3)},Renderer.prototype.renderParagraph=function(cb){var blockstyle,fontToUnitRatio,fragments,i,l,line,lines,maxLineHeight,out,paragraphspacing_after,paragraphspacing_before,styles,fontSize;if(fragments=PurgeWhiteSpace(this.paragraph.text),styles=this.paragraph.style,blockstyle=this.paragraph.blockstyle,this.paragraph={text:[],style:[],blockstyle:{},priorblockstyle:blockstyle},fragments.join("").trim()){lines=this.splitFragmentsIntoLines(fragments,styles),line=void 0,maxLineHeight=void 0,12,fontToUnitRatio=12/this.pdf.internal.scaleFactor,this.priorMarginBottom=this.priorMarginBottom||0,paragraphspacing_before=(Math.max((blockstyle["margin-top"]||0)-this.priorMarginBottom,0)+(blockstyle["padding-top"]||0))*fontToUnitRatio,paragraphspacing_after=((blockstyle["margin-bottom"]||0)+(blockstyle["padding-bottom"]||0))*fontToUnitRatio,this.priorMarginBottom=blockstyle["margin-bottom"]||0,"always"===blockstyle["page-break-before"]&&(this.pdf.addPage(),this.y=0,paragraphspacing_before=((blockstyle["margin-top"]||0)+(blockstyle["padding-top"]||0))*fontToUnitRatio),out=this.pdf.internal.write,i=void 0,l=void 0,this.y+=paragraphspacing_before,out("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td");for(var currentIndent=0;lines.length;){for(maxLineHeight=0,i=0,l=(line=lines.shift()).length;i!==l;)line[i][0].trim()&&(maxLineHeight=Math.max(maxLineHeight,line[i][1]["line-height"],line[i][1]["font-size"]),fontSize=7*line[i][1]["font-size"]),i++;var indentMove=0,wantedIndent=0;void 0!==line[0][1]["margin-left"]&&line[0][1]["margin-left"]>0&&(indentMove=(wantedIndent=this.pdf.internal.getCoordinateString(line[0][1]["margin-left"]))-currentIndent,currentIndent=wantedIndent);for(out(indentMove+Math.max(blockstyle["margin-left"]||0,0)*fontToUnitRatio,(-12*maxLineHeight).toFixed(2),"Td"),i=0,l=line.length;i!==l;)line[i][0]&&this.RenderTextFragment(line[i][0],line[i][1]),i++;if(this.y+=maxLineHeight*fontToUnitRatio,this.executeWatchFunctions(line[0][1])&&lines.length>0){var localFragments=[],localStyles=[];lines.forEach(function(localLine){for(var i=0,l=localLine.length;i!==l;)localLine[i][0]&&(localFragments.push(localLine[i][0]+" "),localStyles.push(localLine[i][1])),++i}),lines=this.splitFragmentsIntoLines(PurgeWhiteSpace(localFragments),localStyles),out("ET","Q"),out("q","BT 0 g",this.pdf.internal.getCoordinateString(this.x),this.pdf.internal.getVerticalCoordinateString(this.y),"Td")}}return cb&&"function"==typeof cb&&cb.call(this,this.x-9,this.y-fontSize/2),out("ET","Q"),this.y+=paragraphspacing_after}},Renderer.prototype.setBlockBoundary=function(cb){return this.renderParagraph(cb)},Renderer.prototype.setBlockStyle=function(css){return this.paragraph.blockstyle=css},Renderer.prototype.addText=function(text,css){return this.paragraph.text.push(text),this.paragraph.style.push(css)},FontNameDB={helvetica:"helvetica","sans-serif":"helvetica","times new roman":"times",serif:"times",times:"times",monospace:"courier",courier:"courier"},FontWeightMap={100:"normal",200:"normal",300:"normal",400:"normal",500:"bold",600:"bold",700:"bold",800:"bold",900:"bold",normal:"normal",bold:"bold",bolder:"bold",lighter:"normal"},FontStyleMap={normal:"normal",italic:"italic",oblique:"italic"},TextAlignMap={left:"left",right:"right",center:"center",justify:"justify"},FloatMap={none:"none",right:"right",left:"left"},ClearMap={none:"none",both:"both"},UnitedNumberMap={normal:1},jsPDFAPI.fromHTML=function(HTML,x,y,settings,callback,margins){return this.margins_doc=margins||{top:0,bottom:0},settings||(settings={}),settings.elementHandlers||(settings.elementHandlers={}),process(this,HTML,isNaN(x)?4:x,isNaN(y)?4:y,settings,callback)}}(jsPDF.API),function(jsPDFAPI){var jsNamesObj,jsJsObj,text;jsPDF.API.addJS=function(txt){return text=txt,this.internal.events.subscribe("postPutResources",function(txt){jsNamesObj=this.internal.newObject(),this.internal.write("<< /Names [(EmbeddedJS) "+(jsNamesObj+1)+" 0 R] >>","endobj"),jsJsObj=this.internal.newObject(),this.internal.write("<< /S /JavaScript /JS (",text,") >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==jsNamesObj&&void 0!==jsJsObj&&this.internal.write("/Names <</JavaScript "+jsNamesObj+" 0 R>>")}),this}}(),function(jsPDFAPI){jsPDFAPI.events.push(["postPutResources",function(){var pdf=this,rx=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var lines=pdf.outline.render().split(/\r\n/),i=0;i<lines.length;i++){var line=lines[i],m=rx.exec(line);if(null!=m){var oid=m[1];pdf.internal.newObjectDeferredBegin(oid)}pdf.internal.write(line)}if(this.outline.createNamedDestinations){var totalPages=this.internal.pages.length,dests=[];for(i=0;i<totalPages;i++){var id=pdf.internal.newObject();dests.push(id);var info=pdf.internal.getPageInfo(i+1);pdf.internal.write("<< /D["+info.objId+" 0 R /XYZ null null null]>> endobj")}var names2Oid=pdf.internal.newObject();pdf.internal.write("<< /Names [ ");for(i=0;i<dests.length;i++)pdf.internal.write("(page_"+(i+1)+")"+dests[i]+" 0 R");pdf.internal.write(" ] >>","endobj");pdf.internal.newObject();pdf.internal.write("<< /Dests "+names2Oid+" 0 R"),pdf.internal.write(">>","endobj")}}]),jsPDFAPI.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+namesOid+" 0 R"))}]),jsPDFAPI.events.push(["initialized",function(){var pdf=this;pdf.outline={createNamedDestinations:!1,root:{children:[]}},pdf.outline.add=function(parent,title,options){var item={title:title,options:options,children:[]};return null==parent&&(parent=this.root),parent.children.push(item),item},pdf.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=pdf,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},pdf.outline.genIds_r=function(node){node.id=pdf.internal.newObjectDeferred();for(var i=0;i<node.children.length;i++)this.genIds_r(node.children[i])},pdf.outline.renderRoot=function(node){this.objStart(node),this.line("/Type /Outlines"),node.children.length>0&&(this.line("/First "+this.makeRef(node.children[0])),this.line("/Last "+this.makeRef(node.children[node.children.length-1]))),this.line("/Count "+this.count_r({count:0},node)),this.objEnd()},pdf.outline.renderItems=function(node){for(var i=0;i<node.children.length;i++){var item=node.children[i];this.objStart(item),this.line("/Title "+this.makeString(item.title)),this.line("/Parent "+this.makeRef(node)),i>0&&this.line("/Prev "+this.makeRef(node.children[i-1])),i<node.children.length-1&&this.line("/Next "+this.makeRef(node.children[i+1])),item.children.length>0&&(this.line("/First "+this.makeRef(item.children[0])),this.line("/Last "+this.makeRef(item.children[item.children.length-1])));var count=this.count=this.count_r({count:0},item);if(count>0&&this.line("/Count "+count),item.options&&item.options.pageNumber){var info=pdf.internal.getPageInfo(item.options.pageNumber);this.line("/Dest ["+info.objId+" 0 R /XYZ 0 "+this.ctx.pdf.internal.pageSize.height+" 0]")}this.objEnd()}for(i=0;i<node.children.length;i++){item=node.children[i];this.renderItems(item)}},pdf.outline.line=function(text){this.ctx.val+=text+"\r\n"},pdf.outline.makeRef=function(node){return node.id+" 0 R"},pdf.outline.makeString=function(val){return"("+pdf.internal.pdfEscape(val)+")"},pdf.outline.objStart=function(node){this.ctx.val+="\r\n"+node.id+" 0 obj\r\n<<\r\n"},pdf.outline.objEnd=function(node){this.ctx.val+=">> \r\nendobj\r\n"},pdf.outline.count_r=function(ctx,node){for(var i=0;i<node.children.length;i++)ctx.count++,this.count_r(ctx,node.children[i]);return ctx.count}}])}(jsPDF.API),function(jsPDFAPI){var hasCompressionJS=function(){var inst="function"==typeof Deflater;if(!inst)throw new Error("requires deflate.js for compression");return inst},compressBytes=function(bytes,lineLength,colorsPerPixel,compression){var level=5,filter_method=filterUp;switch(compression){case jsPDFAPI.image_compression.FAST:level=3,filter_method=filterSub;break;case jsPDFAPI.image_compression.MEDIUM:level=6,filter_method=filterAverage;break;case jsPDFAPI.image_compression.SLOW:level=9,filter_method=filterPaeth}bytes=applyPngFilterMethod(bytes,lineLength,colorsPerPixel,filter_method);var header=new Uint8Array(createZlibHeader(level)),checksum=adler32(bytes),deflate=new Deflater(level),a=deflate.append(bytes),cBytes=deflate.flush(),len=header.length+a.length+cBytes.length,cmpd=new Uint8Array(len+4);return cmpd.set(header),cmpd.set(a,header.length),cmpd.set(cBytes,header.length+a.length),cmpd[len++]=checksum>>>24&255,cmpd[len++]=checksum>>>16&255,cmpd[len++]=checksum>>>8&255,cmpd[len++]=255&checksum,jsPDFAPI.arrayBufferToBinaryString(cmpd)},createZlibHeader=function(bytes,level){var cmf=Math.LOG2E*Math.log(32768)-8<<4|8,hdr=cmf<<8;return hdr|=Math.min(3,(level-1&255)>>1)<<6,hdr|=0,hdr+=31-hdr%31,[cmf,255&hdr]},adler32=function(array,param){for(var tlen,s1=1,s2=0,len=array.length,i=0;len>0;){len-=tlen=len>param?param:len;do{s2+=s1+=array[i++]}while(--tlen);s1%=65521,s2%=65521}return(s2<<16|s1)>>>0},applyPngFilterMethod=function(bytes,lineLength,colorsPerPixel,filter_method){for(var line,prevLine,offset,lines=bytes.length/lineLength,result=new Uint8Array(bytes.length+lines),filter_methods=getFilterMethods(),i=0;i<lines;i++){if(offset=i*lineLength,line=bytes.subarray(offset,offset+lineLength),filter_method)result.set(filter_method(line,colorsPerPixel,prevLine),offset+i);else{for(var j=0,len=filter_methods.length,results=[];j<len;j++)results[j]=filter_methods[j](line,colorsPerPixel,prevLine);var ind=getIndexOfSmallestSum(results.concat());result.set(results[ind],offset+i)}prevLine=line}return result},filterNone=function(line,colorsPerPixel,prevLine){var result=Array.apply([],line);return result.unshift(0),result},filterSub=function(line,colorsPerPixel,prevLine){var left,result=[],i=0,len=line.length;for(result[0]=1;i<len;i++)left=line[i-colorsPerPixel]||0,result[i+1]=line[i]-left+256&255;return result},filterUp=function(line,colorsPerPixel,prevLine){var up,result=[],i=0,len=line.length;for(result[0]=2;i<len;i++)up=prevLine&&prevLine[i]||0,result[i+1]=line[i]-up+256&255;return result},filterAverage=function(line,colorsPerPixel,prevLine){var left,up,result=[],i=0,len=line.length;for(result[0]=3;i<len;i++)left=line[i-colorsPerPixel]||0,up=prevLine&&prevLine[i]||0,result[i+1]=line[i]+256-(left+up>>>1)&255;return result},filterPaeth=function(line,colorsPerPixel,prevLine){var left,up,upLeft,paeth,result=[],i=0,len=line.length;for(result[0]=4;i<len;i++)left=line[i-colorsPerPixel]||0,up=prevLine&&prevLine[i]||0,upLeft=prevLine&&prevLine[i-colorsPerPixel]||0,paeth=paethPredictor(left,up,upLeft),result[i+1]=line[i]-paeth+256&255;return result},paethPredictor=function(left,up,upLeft){var p=left+up-upLeft,pLeft=Math.abs(p-left),pUp=Math.abs(p-up),pUpLeft=Math.abs(p-upLeft);return pLeft<=pUp&&pLeft<=pUpLeft?left:pUp<=pUpLeft?up:upLeft},getFilterMethods=function(){return[filterNone,filterSub,filterUp,filterAverage,filterPaeth]},getIndexOfSmallestSum=function(arrays){for(var sum,min,ind,i=0,len=arrays.length;i<len;)((sum=absSum(arrays[i].slice(1)))<min||!min)&&(min=sum,ind=i),i++;return ind},absSum=function(array){for(var i=0,len=array.length,sum=0;i<len;)sum+=Math.abs(array[i++]);return sum};jsPDFAPI.processPNG=function(imageData,imageIndex,alias,compression,dataAsBinaryString){var img,dp,trns,colors,pal,smask,colorSpace=this.color_spaces.DEVICE_RGB,decode=this.decode.FLATE_DECODE,bpc=8;if(this.isArrayBuffer(imageData)&&(imageData=new Uint8Array(imageData)),this.isArrayBufferView(imageData)){if("function"!=typeof PNG||"function"!=typeof FlateStream)throw new Error("PNG support requires png.js and zlib.js");if(img=new PNG(imageData),imageData=img.imgData,bpc=img.bits,colorSpace=img.colorSpace,colors=img.colors,-1!==[4,6].indexOf(img.colorType)){if(8===img.bits)for(var pbl,len=(pixels=32==img.pixelBitlength?new Uint32Array(img.decodePixels().buffer):16==img.pixelBitlength?new Uint16Array(img.decodePixels().buffer):new Uint8Array(img.decodePixels().buffer)).length,imgData=new Uint8Array(len*img.colors),alphaData=new Uint8Array(len),pDiff=img.pixelBitlength-img.bits,i=0,n=0;i<len;i++){for(pixel=pixels[i],pbl=0;pbl<pDiff;)imgData[n++]=pixel>>>pbl&255,pbl+=img.bits;alphaData[i]=pixel>>>pbl&255}if(16===img.bits){len=(pixels=new Uint32Array(img.decodePixels().buffer)).length,imgData=new Uint8Array(len*(32/img.pixelBitlength)*img.colors),alphaData=new Uint8Array(len*(32/img.pixelBitlength));for(var pixel,hasColors=img.colors>1,a=(i=0,n=0,0);i<len;)pixel=pixels[i++],imgData[n++]=pixel>>>0&255,hasColors&&(imgData[n++]=pixel>>>16&255,pixel=pixels[i++],imgData[n++]=pixel>>>0&255),alphaData[a++]=pixel>>>16&255;bpc=8}!function(value){return value!==jsPDFAPI.image_compression.NONE&&hasCompressionJS()}(compression)?(imageData=imgData,smask=alphaData,decode=null):(imageData=compressBytes(imgData,img.width*img.colors,img.colors,compression),smask=compressBytes(alphaData,img.width,1,compression))}if(3===img.colorType&&(colorSpace=this.color_spaces.INDEXED,pal=img.palette,img.transparency.indexed)){var trans=img.transparency.indexed,total=0;for(i=0,len=trans.length;i<len;++i)total+=trans[i];if((total/=255)===len-1&&-1!==trans.indexOf(0))trns=[trans.indexOf(0)];else if(total!==len){var pixels=img.decodePixels();for(alphaData=new Uint8Array(pixels.length),i=0,len=pixels.length;i<len;i++)alphaData[i]=trans[pixels[i]];smask=compressBytes(alphaData,img.width,1)}}var predictor=function(compression){var predictor;switch(compression){case jsPDFAPI.image_compression.FAST:predictor=11;break;case jsPDFAPI.image_compression.MEDIUM:predictor=13;break;case jsPDFAPI.image_compression.SLOW:predictor=14;break;default:predictor=12}return predictor}(compression);return dp=decode===this.decode.FLATE_DECODE?"/Predictor "+predictor+" /Colors "+colors+" /BitsPerComponent "+bpc+" /Columns "+img.width:"/Colors "+colors+" /BitsPerComponent "+bpc+" /Columns "+img.width,(this.isArrayBuffer(imageData)||this.isArrayBufferView(imageData))&&(imageData=this.arrayBufferToBinaryString(imageData)),(smask&&this.isArrayBuffer(smask)||this.isArrayBufferView(smask))&&(smask=this.arrayBufferToBinaryString(smask)),this.createImageInfo(imageData,img.width,img.height,colorSpace,bpc,decode,imageIndex,alias,dp,trns,pal,smask,predictor)}throw new Error("Unsupported PNG image data, try using JPEG instead.")}}(jsPDF.API),jsPDF.API.autoPrint=function(){var refAutoPrintTag;return this.internal.events.subscribe("postPutResources",function(){refAutoPrintTag=this.internal.newObject(),this.internal.write("<< /S/Named /Type/Action /N/Print >>","endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.write("/OpenAction "+refAutoPrintTag+" 0 R")}),this},function(API){var getCharWidthsArray=API.getCharWidthsArray=function(text,options){options||(options={});var i,l,char_code,widths=options.widths?options.widths:this.internal.getFont().metadata.Unicode.widths,widthsFractionOf=widths.fof?widths.fof:1,kerning=options.kerning?options.kerning:this.internal.getFont().metadata.Unicode.kerning,kerningFractionOf=kerning.fof?kerning.fof:1,prior_char_code=0,default_char_width=widths[0]||widthsFractionOf,output=[];for(i=0,l=text.length;i<l;i++)char_code=text.charCodeAt(i),output.push((widths[char_code]||default_char_width)/widthsFractionOf+(kerning[char_code]&&kerning[char_code][prior_char_code]||0)/kerningFractionOf),prior_char_code=char_code;return output},getArraySum=function(array){for(var i=array.length,output=0;i;)output+=array[--i];return output},getStringUnitWidth=API.getStringUnitWidth=function(text,options){return getArraySum(getCharWidthsArray.call(this,text,options))},splitLongWord=function(word,widths_array,firstLineMaxLen,maxLen){for(var answer=[],i=0,l=word.length,workingLen=0;i!==l&&workingLen+widths_array[i]<firstLineMaxLen;)workingLen+=widths_array[i],i++;answer.push(word.slice(0,i));var startOfLine=i;for(workingLen=0;i!==l;)workingLen+widths_array[i]>maxLen&&(answer.push(word.slice(startOfLine,i)),workingLen=0,startOfLine=i),workingLen+=widths_array[i],i++;return startOfLine!==i&&answer.push(word.slice(startOfLine,i)),answer},splitParagraphIntoLines=function(text,maxlen,options){options||(options={});var word,widths_array,i,l,tmp,lineIndent,line=[],lines=[line],line_length=options.textIndent||0,separator_length=0,current_word_length=0,words=text.split(" "),spaceCharWidth=getCharWidthsArray(" ",options)[0];if(lineIndent=-1===options.lineIndent?words[0].length+2:options.lineIndent||0){var pad=Array(lineIndent).join(" "),wrds=[];words.map(function(wrd){(wrd=wrd.split(/\s*\n/)).length>1?wrds=wrds.concat(wrd.map(function(wrd,idx){return(idx&&wrd.length?"\n":"")+wrd})):wrds.push(wrd[0])}),words=wrds,lineIndent=getStringUnitWidth(pad,options)}for(i=0,l=words.length;i<l;i++){var force=0;if(word=words[i],lineIndent&&"\n"==word[0]&&(word=word.substr(1),force=1),widths_array=getCharWidthsArray(word,options),current_word_length=getArraySum(widths_array),line_length+separator_length+current_word_length>maxlen||force){if(current_word_length>maxlen){for(tmp=splitLongWord(word,widths_array,maxlen-(line_length+separator_length),maxlen),line.push(tmp.shift()),line=[tmp.pop()];tmp.length;)lines.push([tmp.shift()]);current_word_length=getArraySum(widths_array.slice(word.length-line[0].length))}else line=[word];lines.push(line),line_length=current_word_length+lineIndent,separator_length=spaceCharWidth}else line.push(word),line_length+=separator_length+current_word_length,separator_length=spaceCharWidth}if(lineIndent)var postProcess=function(ln,idx){return(idx?pad:"")+ln.join(" ")};else postProcess=function(ln){return ln.join(" ")};return lines.map(postProcess)};API.splitTextToSize=function(text,maxlen,options){options||(options={});var paragraphs,fsize=options.fontSize||this.internal.getFontSize(),newOptions=function(options){var widths={0:1},kerning={};if(options.widths&&options.kerning)return{widths:options.widths,kerning:options.kerning};var f=this.internal.getFont(options.fontName,options.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||widths,kerning:f.metadata.Unicode.kerning||kerning}:{widths:widths,kerning:kerning}}.call(this,options);paragraphs=Array.isArray(text)?text:text.split(/\r?\n/);var fontUnit_maxLen=1*this.internal.scaleFactor*maxlen/fsize;newOptions.textIndent=options.textIndent?1*options.textIndent*this.internal.scaleFactor/fsize:0,newOptions.lineIndent=options.lineIndent;var i,l,output=[];for(i=0,l=paragraphs.length;i<l;i++)output=output.concat(splitParagraphIntoLines(paragraphs[i],fontUnit_maxLen,newOptions));return output}}(jsPDF.API),function(API){var uncompress=function(data){for(var mapping={},i=0;i<"klmnopqrstuvwxyz".length;i++)mapping["klmnopqrstuvwxyz"[i]]="0123456789abcdef"[i];var stringparts,parent_key_pair,key,ch,output={},sign=1,activeobject=output,parentchain=[],keyparts="",valueparts="",datalen=data.length-1;for(i=1;i!=datalen;)ch=data[i],i+=1,"'"==ch?stringparts?(key=stringparts.join(""),stringparts=void 0):stringparts=[]:stringparts?stringparts.push(ch):"{"==ch?(parentchain.push([activeobject,key]),activeobject={},key=void 0):"}"==ch?((parent_key_pair=parentchain.pop())[0][parent_key_pair[1]]=activeobject,key=void 0,activeobject=parent_key_pair[0]):"-"==ch?sign=-1:void 0===key?mapping.hasOwnProperty(ch)?(keyparts+=mapping[ch],key=parseInt(keyparts,16)*sign,sign=1,keyparts=""):keyparts+=ch:mapping.hasOwnProperty(ch)?(valueparts+=mapping[ch],activeobject[key]=parseInt(valueparts,16)*sign,sign=1,key=void 0,valueparts=""):valueparts+=ch;return output},encodingBlock={codePages:["WinAnsiEncoding"],WinAnsiEncoding:uncompress("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},encodings={Unicode:{Courier:encodingBlock,"Courier-Bold":encodingBlock,"Courier-BoldOblique":encodingBlock,"Courier-Oblique":encodingBlock,Helvetica:encodingBlock,"Helvetica-Bold":encodingBlock,"Helvetica-BoldOblique":encodingBlock,"Helvetica-Oblique":encodingBlock,"Times-Roman":encodingBlock,"Times-Bold":encodingBlock,"Times-BoldItalic":encodingBlock,"Times-Italic":encodingBlock}},fontMetrics={Unicode:{"Courier-Oblique":uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":uncompress("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":uncompress("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":uncompress("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Helvetica:uncompress("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":uncompress("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),"Courier-Bold":uncompress("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":uncompress("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":uncompress("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":uncompress("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};API.events.push(["addFont",function(font){var metrics,unicode_section,encodingBlock;(metrics=fontMetrics.Unicode[font.PostScriptName])&&((unicode_section=font.metadata.Unicode?font.metadata.Unicode:font.metadata.Unicode={}).widths=metrics.widths,unicode_section.kerning=metrics.kerning),(encodingBlock=encodings.Unicode[font.PostScriptName])&&((unicode_section=font.metadata.Unicode?font.metadata.Unicode:font.metadata.Unicode={}).encoding=encodingBlock,encodingBlock.codePages&&encodingBlock.codePages.length&&(font.encoding=encodingBlock.codePages[0]))}])}(jsPDF.API),jsPDF.API.addSVG=function(svgtext,x,y,w,h){function convertPathToPDFLinesArgs(path){for(var x=parseFloat(path[1]),y=parseFloat(path[2]),vectors=[],position=3,len=path.length;position<len;)"c"===path[position]?(vectors.push([parseFloat(path[position+1]),parseFloat(path[position+2]),parseFloat(path[position+3]),parseFloat(path[position+4]),parseFloat(path[position+5]),parseFloat(path[position+6])]),position+=7):"l"===path[position]?(vectors.push([parseFloat(path[position+1]),parseFloat(path[position+2])]),position+=3):position+=1;return[x,y,vectors]}if(void 0===x||void 0===y)throw new Error("addSVG needs values for 'x' and 'y'");var svgnode=function(svgtext,frame){var framedoc=(frame.contentWindow||frame.contentDocument).document;return framedoc.write(svgtext),framedoc.close(),framedoc.getElementsByTagName("svg")[0]}(svgtext,function(document){var frame=document.createElement("iframe");return function(cssbody,document){var styletag=document.createElement("style");styletag.type="text/css",styletag.styleSheet?styletag.styleSheet.cssText=cssbody:styletag.appendChild(document.createTextNode(cssbody)),document.getElementsByTagName("head")[0].appendChild(styletag)}(".jsPDF_sillysvg_iframe {display:none;position:absolute;}",document),frame.name="childframe",frame.setAttribute("width",0),frame.setAttribute("height",0),frame.setAttribute("frameborder","0"),frame.setAttribute("scrolling","no"),frame.setAttribute("seamless","seamless"),frame.setAttribute("class","jsPDF_sillysvg_iframe"),document.body.appendChild(frame),frame}(document)),scale=[1,1],svgw=parseFloat(svgnode.getAttribute("width")),svgh=parseFloat(svgnode.getAttribute("height"));svgw&&svgh&&(w&&h?scale=[w/svgw,h/svgh]:w?scale=[w/svgw,w/svgw]:h&&(scale=[h/svgh,h/svgh]));var i,l,tmp,linesargs,items=svgnode.childNodes;for(i=0,l=items.length;i<l;i++)(tmp=items[i]).tagName&&"PATH"===tmp.tagName.toUpperCase()&&((linesargs=convertPathToPDFLinesArgs(tmp.getAttribute("d").split(" ")))[0]=linesargs[0]*scale[0]+x,linesargs[1]=linesargs[1]*scale[1]+y,this.lines.call(this,linesargs[2],linesargs[0],linesargs[1],scale));return this},jsPDF.API.putTotalPages=function(pageExpression){for(var replaceExpression=new RegExp(pageExpression,"g"),n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(replaceExpression,this.internal.getNumberOfPages());return this},jsPDF.API.viewerPreferences=function(options,doReset){function arrayContainsElement(array,element){var iterator,result=!1;for(iterator=0;iterator<array.length;iterator+=1)array[iterator]===element&&(result=!0);return result}options=options||{},doReset=doReset||!1;var configuration,method,value,configurationTemplate={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},configurationKeys=Object.keys(configurationTemplate),rangeArray=[],i=0,j=0,k=0,isValid=!0;if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(configurationTemplate)),this.internal.viewerpreferences.isSubscribed=!1),configuration=this.internal.viewerpreferences.configuration,"reset"===options||!0===doReset){var len=configurationKeys.length;for(k=0;k<len;k+=1)configuration[configurationKeys[k]].value=configuration[configurationKeys[k]].defaultValue,configuration[configurationKeys[k]].explicitSet=!1}if("object"===(void 0===options?"undefined":_typeof(options)))for(method in options)if(value=options[method],arrayContainsElement(configurationKeys,method)&&void 0!==value){if("boolean"===configuration[method].type&&"boolean"==typeof value)configuration[method].value=value;else if("name"===configuration[method].type&&arrayContainsElement(configuration[method].valueSet,value))configuration[method].value=value;else if("integer"===configuration[method].type&&Number.isInteger(value))configuration[method].value=value;else if("array"===configuration[method].type){for(i=0;i<value.length;i+=1)if(isValid=!0,1===value[i].length&&"number"==typeof value[i][0])rangeArray.push(String(value[i]));else if(value[i].length>1){for(j=0;j<value[i].length;j+=1)"number"!=typeof value[i][j]&&(isValid=!1);!0===isValid&&rangeArray.push(String(value[i].join("-")))}configuration[method].value=String(rangeArray)}else configuration[method].value=configuration[method].defaultValue;configuration[method].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var vPref,pdfDict=[];for(vPref in configuration)!0===configuration[vPref].explicitSet&&("name"===configuration[vPref].type?pdfDict.push("/"+vPref+" /"+configuration[vPref].value):pdfDict.push("/"+vPref+" "+configuration[vPref].value));0!==pdfDict.length&&this.internal.write("/ViewerPreferences<<\n"+pdfDict.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=configuration,this},function(jsPDFAPI){var xmpmetadata="",xmpnamespaceuri="",metadata_object_number="";jsPDF.API.addMetadata=function(metadata,namespaceuri){return xmpnamespaceuri=namespaceuri||"http://jspdf.default.namespaceuri/",xmpmetadata=metadata,this.internal.events.subscribe("postPutResources",function(){if(xmpmetadata){var rdf_beginning='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+xmpnamespaceuri+'"><jspdf:metadata>',utf8_xmpmeta_beginning=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),utf8_rdf_beginning=unescape(encodeURIComponent(rdf_beginning)),utf8_metadata=unescape(encodeURIComponent(xmpmetadata)),utf8_rdf_ending=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),utf8_xmpmeta_ending=unescape(encodeURIComponent("</x:xmpmeta>")),total_len=utf8_rdf_beginning.length+utf8_metadata.length+utf8_rdf_ending.length+utf8_xmpmeta_beginning.length+utf8_xmpmeta_ending.length;metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+total_len+" >>"),this.internal.write("stream"),this.internal.write(utf8_xmpmeta_beginning+utf8_rdf_beginning+utf8_metadata+utf8_rdf_ending+utf8_xmpmeta_ending),this.internal.write("endstream"),this.internal.write("endobj")}else metadata_object_number=""}),this.internal.events.subscribe("putCatalog",function(){metadata_object_number&&this.internal.write("/Metadata "+metadata_object_number+" 0 R")}),this}}(),function(view){if(view.URL=view.URL||view.webkitURL,view.Blob&&view.URL)try{return void new Blob}catch(e){}var BlobBuilder=view.BlobBuilder||view.WebKitBlobBuilder||view.MozBlobBuilder||function(view){var get_class=function(object){return Object.prototype.toString.call(object).match(/^\[object\s(.*)\]$/)[1]},FakeBlobBuilder=function(){this.data=[]},FakeBlob=function(data,type,encoding){this.data=data,this.size=data.length,this.type=type,this.encoding=encoding},FBB_proto=FakeBlobBuilder.prototype,FB_proto=FakeBlob.prototype,FileReaderSync=view.FileReaderSync,FileException=function(type){this.code=this[this.name=type]},file_ex_codes="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),file_ex_code=file_ex_codes.length,real_URL=view.URL||view.webkitURL||view,real_create_object_URL=real_URL.createObjectURL,real_revoke_object_URL=real_URL.revokeObjectURL,URL=real_URL,btoa=view.btoa,atob=view.atob,ArrayBuffer=view.ArrayBuffer,Uint8Array=view.Uint8Array,origin=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(FakeBlob.fake=FB_proto.fake=!0;file_ex_code--;)FileException.prototype[file_ex_codes[file_ex_code]]=file_ex_code+1;return real_URL.createObjectURL||(URL=view.URL=function(uri){var uri_origin,uri_info=document.createElementNS("http://www.w3.org/1999/xhtml","a");return uri_info.href=uri,"origin"in uri_info||("data:"===uri_info.protocol.toLowerCase()?uri_info.origin=null:(uri_origin=uri.match(origin),uri_info.origin=uri_origin&&uri_origin[1])),uri_info}),URL.createObjectURL=function(blob){var data_URI_header,type=blob.type;return null===type&&(type="application/octet-stream"),blob instanceof FakeBlob?(data_URI_header="data:"+type,"base64"===blob.encoding?data_URI_header+";base64,"+blob.data:"URI"===blob.encoding?data_URI_header+","+decodeURIComponent(blob.data):btoa?data_URI_header+";base64,"+btoa(blob.data):data_URI_header+","+encodeURIComponent(blob.data)):real_create_object_URL?real_create_object_URL.call(real_URL,blob):void 0},URL.revokeObjectURL=function(object_URL){"data:"!==object_URL.substring(0,5)&&real_revoke_object_URL&&real_revoke_object_URL.call(real_URL,object_URL)},FBB_proto.append=function(data){var bb=this.data;if(Uint8Array&&(data instanceof ArrayBuffer||data instanceof Uint8Array)){for(var str="",buf=new Uint8Array(data),i=0,buf_len=buf.length;i<buf_len;i++)str+=String.fromCharCode(buf[i]);bb.push(str)}else if("Blob"===get_class(data)||"File"===get_class(data)){if(!FileReaderSync)throw new FileException("NOT_READABLE_ERR");var fr=new FileReaderSync;bb.push(fr.readAsBinaryString(data))}else data instanceof FakeBlob?"base64"===data.encoding&&atob?bb.push(atob(data.data)):"URI"===data.encoding?bb.push(decodeURIComponent(data.data)):"raw"===data.encoding&&bb.push(data.data):("string"!=typeof data&&(data+=""),bb.push(unescape(encodeURIComponent(data))))},FBB_proto.getBlob=function(type){return arguments.length||(type=null),new FakeBlob(this.data.join(""),type,"raw")},FBB_proto.toString=function(){return"[object BlobBuilder]"},FB_proto.slice=function(start,end,type){var args=arguments.length;return args<3&&(type=null),new FakeBlob(this.data.slice(start,args>1?end:this.data.length),type,this.encoding)},FB_proto.toString=function(){return"[object Blob]"},FB_proto.close=function(){this.size=0,delete this.data},FakeBlobBuilder}(view);view.Blob=function(blobParts,options){var type=options?options.type||"":"",builder=new BlobBuilder;if(blobParts)for(var i=0,len=blobParts.length;i<len;i++)Uint8Array&&blobParts[i]instanceof Uint8Array?builder.append(blobParts[i].buffer):builder.append(blobParts[i]);var blob=builder.getBlob(type);return!blob.slice&&blob.webkitSlice&&(blob.slice=blob.webkitSlice),blob};var getPrototypeOf=Object.getPrototypeOf||function(object){return object.__proto__};view.Blob.prototype=getPrototypeOf(new view.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content||void 0);var saveAs=saveAs||function(view){if(!(void 0===view||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var get_URL=function(){return view.URL||view.webkitURL||view},save_link=view.document.createElementNS("http://www.w3.org/1999/xhtml","a"),can_use_save_link="download"in save_link,is_safari=/constructor/i.test(view.HTMLElement)||view.safari,is_chrome_ios=/CriOS\/[\d]+/.test(navigator.userAgent),throw_outside=function(ex){(view.setImmediate||view.setTimeout)(function(){throw ex},0)},revoke=function(file){setTimeout(function(){"string"==typeof file?get_URL().revokeObjectURL(file):file.remove()},4e4)},auto_bom=function(blob){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(blob.type)?new Blob([String.fromCharCode(65279),blob],{type:blob.type}):blob},FileSaver=function(blob,name,no_auto_bom){no_auto_bom||(blob=auto_bom(blob));var object_url,filesaver=this,force="application/octet-stream"===blob.type,dispatch_all=function(){!function(filesaver,event_types,event){for(var i=(event_types=[].concat(event_types)).length;i--;){var listener=filesaver["on"+event_types[i]];if("function"==typeof listener)try{listener.call(filesaver,event||filesaver)}catch(ex){throw_outside(ex)}}}(filesaver,"writestart progress write writeend".split(" "))};if(filesaver.readyState=filesaver.INIT,can_use_save_link)return object_url=get_URL().createObjectURL(blob),void setTimeout(function(){save_link.href=object_url,save_link.download=name,function(node){var event=new MouseEvent("click");node.dispatchEvent(event)}(save_link),dispatch_all(),revoke(object_url),filesaver.readyState=filesaver.DONE});!function(){if((is_chrome_ios||force&&is_safari)&&view.FileReader){var reader=new FileReader;return reader.onloadend=function(){var url=is_chrome_ios?reader.result:reader.result.replace(/^data:[^;]*;/,"data:attachment/file;");view.open(url,"_blank")||(view.location.href=url),url=void 0,filesaver.readyState=filesaver.DONE,dispatch_all()},reader.readAsDataURL(blob),void(filesaver.readyState=filesaver.INIT)}object_url||(object_url=get_URL().createObjectURL(blob)),force?view.location.href=object_url:view.open(object_url,"_blank")||(view.location.href=object_url);filesaver.readyState=filesaver.DONE,dispatch_all(),revoke(object_url)}()},FS_proto=FileSaver.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(blob,name,no_auto_bom){return name=name||blob.name||"download",no_auto_bom||(blob=auto_bom(blob)),navigator.msSaveOrOpenBlob(blob,name)}:(FS_proto.abort=function(){},FS_proto.readyState=FS_proto.INIT=0,FS_proto.WRITING=1,FS_proto.DONE=2,FS_proto.error=FS_proto.onwritestart=FS_proto.onprogress=FS_proto.onwrite=FS_proto.onabort=FS_proto.onerror=FS_proto.onwriteend=null,function(blob,name,no_auto_bom){return new FileSaver(blob,name||blob.name||"download",no_auto_bom)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),function(global,callback){"object"==typeof module?module.exports=callback():"function"==typeof define?define(callback):global.adler32cs=callback()}(jsPDF,function(){var _hasArrayBuffer="function"==typeof ArrayBuffer&&"function"==typeof Uint8Array,_Buffer=null,_isBuffer=function(){if(!_hasArrayBuffer)return function(){return!1};try{var buffer={};"function"==typeof buffer.Buffer&&(_Buffer=buffer.Buffer)}catch(error){}return function(value){return value instanceof ArrayBuffer||null!==_Buffer&&value instanceof _Buffer}}(),_utf8ToBinary=null!==_Buffer?function(utf8String){return new _Buffer(utf8String,"utf8").toString("binary")}:function(utf8String){return unescape(encodeURIComponent(utf8String))},_update=function(checksum,binaryString){for(var a=65535&checksum,b=checksum>>>16,i=0,length=binaryString.length;i<length;i++)b=(b+(a=(a+(255&binaryString.charCodeAt(i)))%65521))%65521;return(b<<16|a)>>>0},_updateUint8Array=function(checksum,uint8Array){for(var a=65535&checksum,b=checksum>>>16,i=0,length=uint8Array.length;i<length;i++)b=(b+(a=(a+uint8Array[i])%65521))%65521;return(b<<16|a)>>>0},exports={},Adler32=exports.Adler32=function(){var ctor=function(checksum){if(!(this instanceof ctor))throw new TypeError("Constructor cannot called be as a function.");if(!isFinite(checksum=null==checksum?1:+checksum))throw new Error("First arguments needs to be a finite number.");this.checksum=checksum>>>0},proto=ctor.prototype={};return proto.constructor=ctor,ctor.from=function(from){return from.prototype=proto,from}(function(binaryString){if(!(this instanceof ctor))throw new TypeError("Constructor cannot called be as a function.");if(null==binaryString)throw new Error("First argument needs to be a string.");this.checksum=_update(1,binaryString.toString())}),ctor.fromUtf8=function(fromUtf8){return fromUtf8.prototype=proto,fromUtf8}(function(utf8String){if(!(this instanceof ctor))throw new TypeError("Constructor cannot called be as a function.");if(null==utf8String)throw new Error("First argument needs to be a string.");var binaryString=_utf8ToBinary(utf8String.toString());this.checksum=_update(1,binaryString)}),_hasArrayBuffer&&(ctor.fromBuffer=function(fromBuffer){return fromBuffer.prototype=proto,fromBuffer}(function(buffer){if(!(this instanceof ctor))throw new TypeError("Constructor cannot called be as a function.");if(!_isBuffer(buffer))throw new Error("First argument needs to be ArrayBuffer.");var array=new Uint8Array(buffer);return this.checksum=_updateUint8Array(1,array)})),proto.update=function(binaryString){if(null==binaryString)throw new Error("First argument needs to be a string.");return binaryString=binaryString.toString(),this.checksum=_update(this.checksum,binaryString)},proto.updateUtf8=function(utf8String){if(null==utf8String)throw new Error("First argument needs to be a string.");var binaryString=_utf8ToBinary(utf8String.toString());return this.checksum=_update(this.checksum,binaryString)},_hasArrayBuffer&&(proto.updateBuffer=function(buffer){if(!_isBuffer(buffer))throw new Error("First argument needs to be ArrayBuffer.");var array=new Uint8Array(buffer);return this.checksum=_updateUint8Array(this.checksum,array)}),proto.clone=function(){return new Adler32(this.checksum)},ctor}();return exports.from=function(binaryString){if(null==binaryString)throw new Error("First argument needs to be a string.");return _update(1,binaryString.toString())},exports.fromUtf8=function(utf8String){if(null==utf8String)throw new Error("First argument needs to be a string.");var binaryString=_utf8ToBinary(utf8String.toString());return _update(1,binaryString)},_hasArrayBuffer&&(exports.fromBuffer=function(buffer){if(!_isBuffer(buffer))throw new Error("First argument need to be ArrayBuffer.");var array=new Uint8Array(buffer);return _updateUint8Array(1,array)}),exports});var CssColors={};CssColors._colorsTable={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},CssColors.colorNameToHex=function(color){return color=color.toLowerCase(),void 0!==this._colorsTable[color]&&this._colorsTable[color]};var Deflater=function(obj){function Tree(){function bi_reverse(code,len){var res=0;do{res|=1&code,code>>>=1,res<<=1}while(--len>0);return res>>>1}var that=this;that.build_tree=function(s){var n,m,node,tree=that.dyn_tree,stree=that.stat_desc.static_tree,elems=that.stat_desc.elems,max_code=-1;for(s.heap_len=0,s.heap_max=HEAP_SIZE,n=0;n<elems;n++)0!==tree[2*n]?(s.heap[++s.heap_len]=max_code=n,s.depth[n]=0):tree[2*n+1]=0;for(;s.heap_len<2;)tree[2*(node=s.heap[++s.heap_len]=max_code<2?++max_code:0)]=1,s.depth[node]=0,s.opt_len--,stree&&(s.static_len-=stree[2*node+1]);for(that.max_code=max_code,n=Math.floor(s.heap_len/2);n>=1;n--)s.pqdownheap(tree,n);node=elems;do{n=s.heap[1],s.heap[1]=s.heap[s.heap_len--],s.pqdownheap(tree,1),m=s.heap[1],s.heap[--s.heap_max]=n,s.heap[--s.heap_max]=m,tree[2*node]=tree[2*n]+tree[2*m],s.depth[node]=Math.max(s.depth[n],s.depth[m])+1,tree[2*n+1]=tree[2*m+1]=node,s.heap[1]=node++,s.pqdownheap(tree,1)}while(s.heap_len>=2);s.heap[--s.heap_max]=s.heap[1],function(s){var h,n,m,bits,xbits,f,tree=that.dyn_tree,stree=that.stat_desc.static_tree,extra=that.stat_desc.extra_bits,base=that.stat_desc.extra_base,max_length=that.stat_desc.max_length,overflow=0;for(bits=0;bits<=MAX_BITS;bits++)s.bl_count[bits]=0;for(tree[2*s.heap[s.heap_max]+1]=0,h=s.heap_max+1;h<HEAP_SIZE;h++)(bits=tree[2*tree[2*(n=s.heap[h])+1]+1]+1)>max_length&&(bits=max_length,overflow++),tree[2*n+1]=bits,n>that.max_code||(s.bl_count[bits]++,xbits=0,n>=base&&(xbits=extra[n-base]),f=tree[2*n],s.opt_len+=f*(bits+xbits),stree&&(s.static_len+=f*(stree[2*n+1]+xbits)));if(0!==overflow){do{for(bits=max_length-1;0===s.bl_count[bits];)bits--;s.bl_count[bits]--,s.bl_count[bits+1]+=2,s.bl_count[max_length]--,overflow-=2}while(overflow>0);for(bits=max_length;0!==bits;bits--)for(n=s.bl_count[bits];0!==n;)(m=s.heap[--h])>that.max_code||(tree[2*m+1]!=bits&&(s.opt_len+=(bits-tree[2*m+1])*tree[2*m],tree[2*m+1]=bits),n--)}}(s),function(tree,max_code,bl_count){var bits,n,len,next_code=[],code=0;for(bits=1;bits<=MAX_BITS;bits++)next_code[bits]=code=code+bl_count[bits-1]<<1;for(n=0;n<=max_code;n++)0!==(len=tree[2*n+1])&&(tree[2*n]=bi_reverse(next_code[len]++,len))}(tree,that.max_code,s.bl_count)}}function StaticTree(static_tree,extra_bits,extra_base,elems,max_length){this.static_tree=static_tree,this.extra_bits=extra_bits,this.extra_base=extra_base,this.elems=elems,this.max_length=max_length}function Config(good_length,max_lazy,nice_length,max_chain,func){this.good_length=good_length,this.max_lazy=max_lazy,this.nice_length=nice_length,this.max_chain=max_chain,this.func=func}function smaller(tree,n,m,depth){var tn2=tree[2*n],tm2=tree[2*m];return tn2<tm2||tn2==tm2&&depth[n]<=depth[m]}function Deflate(){function init_block(){var i;for(i=0;i<L_CODES;i++)dyn_ltree[2*i]=0;for(i=0;i<D_CODES;i++)dyn_dtree[2*i]=0;for(i=0;i<BL_CODES;i++)bl_tree[2*i]=0;dyn_ltree[2*END_BLOCK]=1,that.opt_len=that.static_len=0,last_lit=matches=0}function scan_tree(tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),tree[2*(max_code+1)+1]=65535,n=0;n<=max_code;n++)curlen=nextlen,nextlen=tree[2*(n+1)+1],++count<max_count&&curlen==nextlen||(count<min_count?bl_tree[2*curlen]+=count:0!==curlen?(curlen!=prevlen&&bl_tree[2*curlen]++,bl_tree[2*REP_3_6]++):count<=10?bl_tree[2*REPZ_3_10]++:bl_tree[2*REPZ_11_138]++,count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen==nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4))}function put_byte(p){that.pending_buf[that.pending++]=p}function put_short(w){put_byte(255&w),put_byte(w>>>8&255)}function send_bits(value,length){var val,len=length;bi_valid>Buf_size-len?(put_short(bi_buf|=(val=value)<<bi_valid&65535),bi_buf=val>>>Buf_size-bi_valid,bi_valid+=len-Buf_size):(bi_buf|=value<<bi_valid&65535,bi_valid+=len)}function send_code(c,tree){var c2=2*c;send_bits(65535&tree[c2],65535&tree[c2+1])}function send_tree(tree,max_code){var n,curlen,prevlen=-1,nextlen=tree[1],count=0,max_count=7,min_count=4;for(0===nextlen&&(max_count=138,min_count=3),n=0;n<=max_code;n++)if(curlen=nextlen,nextlen=tree[2*(n+1)+1],!(++count<max_count&&curlen==nextlen)){if(count<min_count)do{send_code(curlen,bl_tree)}while(0!=--count);else 0!==curlen?(curlen!=prevlen&&(send_code(curlen,bl_tree),count--),send_code(REP_3_6,bl_tree),send_bits(count-3,2)):count<=10?(send_code(REPZ_3_10,bl_tree),send_bits(count-3,3)):(send_code(REPZ_11_138,bl_tree),send_bits(count-11,7));count=0,prevlen=curlen,0===nextlen?(max_count=138,min_count=3):curlen==nextlen?(max_count=6,min_count=3):(max_count=7,min_count=4)}}function bi_flush(){16==bi_valid?(put_short(bi_buf),bi_buf=0,bi_valid=0):bi_valid>=8&&(put_byte(255&bi_buf),bi_buf>>>=8,bi_valid-=8)}function _tr_tally(dist,lc){var out_length,in_length,dcode;if(that.pending_buf[d_buf+2*last_lit]=dist>>>8&255,that.pending_buf[d_buf+2*last_lit+1]=255&dist,that.pending_buf[l_buf+last_lit]=255&lc,last_lit++,0===dist?dyn_ltree[2*lc]++:(matches++,dist--,dyn_ltree[2*(Tree._length_code[lc]+LITERALS+1)]++,dyn_dtree[2*Tree.d_code(dist)]++),0==(8191&last_lit)&&level>2){for(out_length=8*last_lit,in_length=strstart-block_start,dcode=0;dcode<D_CODES;dcode++)out_length+=dyn_dtree[2*dcode]*(5+Tree.extra_dbits[dcode]);if(out_length>>>=3,matches<Math.floor(last_lit/2)&&out_length<Math.floor(in_length/2))return!0}return last_lit==lit_bufsize-1}function compress_block(ltree,dtree){var dist,lc,code,extra,lx=0;if(0!==last_lit)do{dist=that.pending_buf[d_buf+2*lx]<<8&65280|255&that.pending_buf[d_buf+2*lx+1],lc=255&that.pending_buf[l_buf+lx],lx++,0===dist?send_code(lc,ltree):(send_code((code=Tree._length_code[lc])+LITERALS+1,ltree),0!==(extra=Tree.extra_lbits[code])&&send_bits(lc-=Tree.base_length[code],extra),send_code(code=Tree.d_code(--dist),dtree),0!==(extra=Tree.extra_dbits[code])&&send_bits(dist-=Tree.base_dist[code],extra))}while(lx<last_lit);send_code(END_BLOCK,ltree),last_eob_len=ltree[2*END_BLOCK+1]}function bi_windup(){bi_valid>8?put_short(bi_buf):bi_valid>0&&put_byte(255&bi_buf),bi_buf=0,bi_valid=0}function _tr_stored_block(buf,stored_len,eof){send_bits((STORED_BLOCK<<1)+(eof?1:0),3),function(buf,len,header){bi_windup(),last_eob_len=8,header&&(put_short(len),put_short(~len)),that.pending_buf.set(window.subarray(buf,buf+len),that.pending),that.pending+=len}(buf,stored_len,!0)}function _tr_flush_block(buf,stored_len,eof){var opt_lenb,static_lenb,max_blindex=0;level>0?(l_desc.build_tree(that),d_desc.build_tree(that),max_blindex=function(){var max_blindex;for(scan_tree(dyn_ltree,l_desc.max_code),scan_tree(dyn_dtree,d_desc.max_code),bl_desc.build_tree(that),max_blindex=BL_CODES-1;max_blindex>=3&&0===bl_tree[2*Tree.bl_order[max_blindex]+1];max_blindex--);return that.opt_len+=3*(max_blindex+1)+5+5+4,max_blindex}(),opt_lenb=that.opt_len+3+7>>>3,(static_lenb=that.static_len+3+7>>>3)<=opt_lenb&&(opt_lenb=static_lenb)):opt_lenb=static_lenb=stored_len+5,stored_len+4<=opt_lenb&&-1!=buf?_tr_stored_block(buf,stored_len,eof):static_lenb==opt_lenb?(send_bits((STATIC_TREES<<1)+(eof?1:0),3),compress_block(StaticTree.static_ltree,StaticTree.static_dtree)):(send_bits((DYN_TREES<<1)+(eof?1:0),3),function(lcodes,dcodes,blcodes){var rank;for(send_bits(lcodes-257,5),send_bits(dcodes-1,5),send_bits(blcodes-4,4),rank=0;rank<blcodes;rank++)send_bits(bl_tree[2*Tree.bl_order[rank]+1],3);send_tree(dyn_ltree,lcodes-1),send_tree(dyn_dtree,dcodes-1)}(l_desc.max_code+1,d_desc.max_code+1,max_blindex+1),compress_block(dyn_ltree,dyn_dtree)),init_block(),eof&&bi_windup()}function flush_block_only(eof){_tr_flush_block(block_start>=0?block_start:-1,strstart-block_start,eof),block_start=strstart,strm.flush_pending()}function fill_window(){var n,m,p,more;do{if(0===(more=window_size-lookahead-strstart)&&0===strstart&&0===lookahead)more=w_size;else if(-1==more)more--;else if(strstart>=w_size+w_size-MIN_LOOKAHEAD){window.set(window.subarray(w_size,w_size+w_size),0),match_start-=w_size,strstart-=w_size,block_start-=w_size,p=n=hash_size;do{m=65535&head[--p],head[p]=m>=w_size?m-w_size:0}while(0!=--n);p=n=w_size;do{m=65535&prev[--p],prev[p]=m>=w_size?m-w_size:0}while(0!=--n);more+=w_size}if(0===strm.avail_in)return;n=strm.read_buf(window,strstart+lookahead,more),(lookahead+=n)>=MIN_MATCH&&(ins_h=((ins_h=255&window[strstart])<<hash_shift^255&window[strstart+1])&hash_mask)}while(lookahead<MIN_LOOKAHEAD&&0!==strm.avail_in)}function longest_match(cur_match){var match,len,chain_length=max_chain_length,scan=strstart,best_len=prev_length,limit=strstart>w_size-MIN_LOOKAHEAD?strstart-(w_size-MIN_LOOKAHEAD):0,_nice_match=nice_match,wmask=w_mask,strend=strstart+MAX_MATCH,scan_end1=window[scan+best_len-1],scan_end=window[scan+best_len];prev_length>=good_match&&(chain_length>>=2),_nice_match>lookahead&&(_nice_match=lookahead);do{if(match=cur_match,window[match+best_len]==scan_end&&window[match+best_len-1]==scan_end1&&window[match]==window[scan]&&window[++match]==window[scan+1]){scan+=2,match++;do{}while(window[++scan]==window[++match]&&window[++scan]==window[++match]&&window[++scan]==window[++match]&&window[++scan]==window[++match]&&window[++scan]==window[++match]&&window[++scan]==window[++match]&&window[++scan]==window[++match]&&window[++scan]==window[++match]&&scan<strend);if(len=MAX_MATCH-(strend-scan),scan=strend-MAX_MATCH,len>best_len){if(match_start=cur_match,best_len=len,len>=_nice_match)break;scan_end1=window[scan+best_len-1],scan_end=window[scan+best_len]}}}while((cur_match=65535&prev[cur_match&wmask])>limit&&0!=--chain_length);return best_len<=lookahead?best_len:lookahead}function deflateReset(strm){return strm.total_in=strm.total_out=0,strm.msg=null,that.pending=0,that.pending_out=0,status=BUSY_STATE,last_flush=Z_NO_FLUSH,l_desc.dyn_tree=dyn_ltree,l_desc.stat_desc=StaticTree.static_l_desc,d_desc.dyn_tree=dyn_dtree,d_desc.stat_desc=StaticTree.static_d_desc,bl_desc.dyn_tree=bl_tree,bl_desc.stat_desc=StaticTree.static_bl_desc,bi_buf=0,bi_valid=0,last_eob_len=8,init_block(),function(){var i;for(window_size=2*w_size,head[hash_size-1]=0,i=0;i<hash_size-1;i++)head[i]=0;max_lazy_match=config_table[level].max_lazy,good_match=config_table[level].good_length,nice_match=config_table[level].nice_length,max_chain_length=config_table[level].max_chain,strstart=0,block_start=0,lookahead=0,match_length=prev_length=MIN_MATCH-1,match_available=0,ins_h=0}(),Z_OK}var strm,status,pending_buf_size,last_flush,w_size,w_bits,w_mask,window,window_size,prev,head,ins_h,hash_size,hash_bits,hash_mask,hash_shift,block_start,match_length,prev_match,match_available,strstart,match_start,lookahead,prev_length,max_chain_length,max_lazy_match,level,strategy,good_match,nice_match,dyn_ltree,dyn_dtree,bl_tree,that=this,l_desc=new Tree,d_desc=new Tree,bl_desc=new Tree;that.depth=[];var l_buf,lit_bufsize,last_lit,d_buf,matches,last_eob_len,bi_buf,bi_valid;that.bl_count=[],that.heap=[],dyn_ltree=[],dyn_dtree=[],bl_tree=[],that.pqdownheap=function(tree,k){for(var heap=that.heap,v=heap[k],j=k<<1;j<=that.heap_len&&(j<that.heap_len&&smaller(tree,heap[j+1],heap[j],that.depth)&&j++,!smaller(tree,v,heap[j],that.depth));)heap[k]=heap[j],k=j,j<<=1;heap[k]=v},that.deflateInit=function(strm,_level,bits,_method,memLevel,_strategy){return _method||(_method=Z_DEFLATED),memLevel||(memLevel=DEF_MEM_LEVEL),_strategy||(_strategy=Z_DEFAULT_STRATEGY),strm.msg=null,_level==Z_DEFAULT_COMPRESSION&&(_level=6),memLevel<1||memLevel>MAX_MEM_LEVEL||_method!=Z_DEFLATED||bits<9||bits>15||_level<0||_level>9||_strategy<0||_strategy>Z_HUFFMAN_ONLY?Z_STREAM_ERROR:(strm.dstate=that,w_bits=bits,w_size=1<<w_bits,w_mask=w_size-1,hash_bits=memLevel+7,hash_size=1<<hash_bits,hash_mask=hash_size-1,hash_shift=Math.floor((hash_bits+MIN_MATCH-1)/MIN_MATCH),window=new Uint8Array(2*w_size),prev=[],head=[],lit_bufsize=1<<memLevel+6,that.pending_buf=new Uint8Array(4*lit_bufsize),pending_buf_size=4*lit_bufsize,d_buf=Math.floor(lit_bufsize/2),l_buf=3*lit_bufsize,level=_level,strategy=_strategy,deflateReset(strm))},that.deflateEnd=function(){return status!=INIT_STATE&&status!=BUSY_STATE&&status!=FINISH_STATE?Z_STREAM_ERROR:(that.pending_buf=null,head=null,prev=null,window=null,that.dstate=null,status==BUSY_STATE?Z_DATA_ERROR:Z_OK)},that.deflateParams=function(strm,_level,_strategy){var err=Z_OK;return _level==Z_DEFAULT_COMPRESSION&&(_level=6),_level<0||_level>9||_strategy<0||_strategy>Z_HUFFMAN_ONLY?Z_STREAM_ERROR:(config_table[level].func!=config_table[_level].func&&0!==strm.total_in&&(err=strm.deflate(Z_PARTIAL_FLUSH)),level!=_level&&(max_lazy_match=config_table[level=_level].max_lazy,good_match=config_table[level].good_length,nice_match=config_table[level].nice_length,max_chain_length=config_table[level].max_chain),strategy=_strategy,err)},that.deflateSetDictionary=function(strm,dictionary,dictLength){var n,length=dictLength,index=0;if(!dictionary||status!=INIT_STATE)return Z_STREAM_ERROR;if(length<MIN_MATCH)return Z_OK;for(length>w_size-MIN_LOOKAHEAD&&(index=dictLength-(length=w_size-MIN_LOOKAHEAD)),window.set(dictionary.subarray(index,index+length),0),strstart=length,block_start=length,ins_h=((ins_h=255&window[0])<<hash_shift^255&window[1])&hash_mask,n=0;n<=length-MIN_MATCH;n++)ins_h=(ins_h<<hash_shift^255&window[n+(MIN_MATCH-1)])&hash_mask,prev[n&w_mask]=head[ins_h],head[ins_h]=n;return Z_OK},that.deflate=function(_strm,flush){var i,header,level_flags,old_flush,bstate;if(flush>Z_FINISH||flush<0)return Z_STREAM_ERROR;if(!_strm.next_out||!_strm.next_in&&0!==_strm.avail_in||status==FINISH_STATE&&flush!=Z_FINISH)return _strm.msg=z_errmsg[Z_NEED_DICT-Z_STREAM_ERROR],Z_STREAM_ERROR;if(0===_strm.avail_out)return _strm.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(strm=_strm,old_flush=last_flush,last_flush=flush,status==INIT_STATE&&(header=Z_DEFLATED+(w_bits-8<<4)<<8,(level_flags=(level-1&255)>>1)>3&&(level_flags=3),header|=level_flags<<6,0!==strstart&&(header|=PRESET_DICT),status=BUSY_STATE,function(b){put_byte(b>>8&255),put_byte(255&b)}(header+=31-header%31)),0!==that.pending){if(strm.flush_pending(),0===strm.avail_out)return last_flush=-1,Z_OK}else if(0===strm.avail_in&&flush<=old_flush&&flush!=Z_FINISH)return strm.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(status==FINISH_STATE&&0!==strm.avail_in)return _strm.msg=z_errmsg[Z_NEED_DICT-Z_BUF_ERROR],Z_BUF_ERROR;if(0!==strm.avail_in||0!==lookahead||flush!=Z_NO_FLUSH&&status!=FINISH_STATE){switch(bstate=-1,config_table[level].func){case STORED:bstate=function(flush){var max_start,max_block_size=65535;for(max_block_size>pending_buf_size-5&&(max_block_size=pending_buf_size-5);;){if(lookahead<=1){if(fill_window(),0===lookahead&&flush==Z_NO_FLUSH)return NeedMore;if(0===lookahead)break}if(strstart+=lookahead,lookahead=0,max_start=block_start+max_block_size,(0===strstart||strstart>=max_start)&&(lookahead=strstart-max_start,strstart=max_start,flush_block_only(!1),0===strm.avail_out))return NeedMore;if(strstart-block_start>=w_size-MIN_LOOKAHEAD&&(flush_block_only(!1),0===strm.avail_out))return NeedMore}return flush_block_only(flush==Z_FINISH),0===strm.avail_out?flush==Z_FINISH?FinishStarted:NeedMore:flush==Z_FINISH?FinishDone:BlockDone}(flush);break;case FAST:bstate=function(flush){for(var bflush,hash_head=0;;){if(lookahead<MIN_LOOKAHEAD){if(fill_window(),lookahead<MIN_LOOKAHEAD&&flush==Z_NO_FLUSH)return NeedMore;if(0===lookahead)break}if(lookahead>=MIN_MATCH&&(ins_h=(ins_h<<hash_shift^255&window[strstart+(MIN_MATCH-1)])&hash_mask,hash_head=65535&head[ins_h],prev[strstart&w_mask]=head[ins_h],head[ins_h]=strstart),0!==hash_head&&(strstart-hash_head&65535)<=w_size-MIN_LOOKAHEAD&&strategy!=Z_HUFFMAN_ONLY&&(match_length=longest_match(hash_head)),match_length>=MIN_MATCH)if(bflush=_tr_tally(strstart-match_start,match_length-MIN_MATCH),lookahead-=match_length,match_length<=max_lazy_match&&lookahead>=MIN_MATCH){match_length--;do{ins_h=(ins_h<<hash_shift^255&window[++strstart+(MIN_MATCH-1)])&hash_mask,hash_head=65535&head[ins_h],prev[strstart&w_mask]=head[ins_h],head[ins_h]=strstart}while(0!=--match_length);strstart++}else strstart+=match_length,match_length=0,ins_h=((ins_h=255&window[strstart])<<hash_shift^255&window[strstart+1])&hash_mask;else bflush=_tr_tally(0,255&window[strstart]),lookahead--,strstart++;if(bflush&&(flush_block_only(!1),0===strm.avail_out))return NeedMore}return flush_block_only(flush==Z_FINISH),0===strm.avail_out?flush==Z_FINISH?FinishStarted:NeedMore:flush==Z_FINISH?FinishDone:BlockDone}(flush);break;case SLOW:bstate=function(flush){for(var bflush,max_insert,hash_head=0;;){if(lookahead<MIN_LOOKAHEAD){if(fill_window(),lookahead<MIN_LOOKAHEAD&&flush==Z_NO_FLUSH)return NeedMore;if(0===lookahead)break}if(lookahead>=MIN_MATCH&&(ins_h=(ins_h<<hash_shift^255&window[strstart+(MIN_MATCH-1)])&hash_mask,hash_head=65535&head[ins_h],prev[strstart&w_mask]=head[ins_h],head[ins_h]=strstart),prev_length=match_length,prev_match=match_start,match_length=MIN_MATCH-1,0!==hash_head&&prev_length<max_lazy_match&&(strstart-hash_head&65535)<=w_size-MIN_LOOKAHEAD&&(strategy!=Z_HUFFMAN_ONLY&&(match_length=longest_match(hash_head)),match_length<=5&&(strategy==Z_FILTERED||match_length==MIN_MATCH&&strstart-match_start>4096)&&(match_length=MIN_MATCH-1)),prev_length>=MIN_MATCH&&match_length<=prev_length){max_insert=strstart+lookahead-MIN_MATCH,bflush=_tr_tally(strstart-1-prev_match,prev_length-MIN_MATCH),lookahead-=prev_length-1,prev_length-=2;do{++strstart<=max_insert&&(ins_h=(ins_h<<hash_shift^255&window[strstart+(MIN_MATCH-1)])&hash_mask,hash_head=65535&head[ins_h],prev[strstart&w_mask]=head[ins_h],head[ins_h]=strstart)}while(0!=--prev_length);if(match_available=0,match_length=MIN_MATCH-1,strstart++,bflush&&(flush_block_only(!1),0===strm.avail_out))return NeedMore}else if(0!==match_available){if((bflush=_tr_tally(0,255&window[strstart-1]))&&flush_block_only(!1),strstart++,lookahead--,0===strm.avail_out)return NeedMore}else match_available=1,strstart++,lookahead--}return 0!==match_available&&(bflush=_tr_tally(0,255&window[strstart-1]),match_available=0),flush_block_only(flush==Z_FINISH),0===strm.avail_out?flush==Z_FINISH?FinishStarted:NeedMore:flush==Z_FINISH?FinishDone:BlockDone}(flush)}if(bstate!=FinishStarted&&bstate!=FinishDone||(status=FINISH_STATE),bstate==NeedMore||bstate==FinishStarted)return 0===strm.avail_out&&(last_flush=-1),Z_OK;if(bstate==BlockDone){if(flush==Z_PARTIAL_FLUSH)send_bits(STATIC_TREES<<1,3),send_code(END_BLOCK,StaticTree.static_ltree),bi_flush(),1+last_eob_len+10-bi_valid<9&&(send_bits(STATIC_TREES<<1,3),send_code(END_BLOCK,StaticTree.static_ltree),bi_flush()),last_eob_len=7;else if(_tr_stored_block(0,0,!1),flush==Z_FULL_FLUSH)for(i=0;i<hash_size;i++)head[i]=0;if(strm.flush_pending(),0===strm.avail_out)return last_flush=-1,Z_OK}}return flush!=Z_FINISH?Z_OK:Z_STREAM_END}}function ZStream(){this.next_in_index=0,this.next_out_index=0,this.avail_in=0,this.total_in=0,this.avail_out=0,this.total_out=0}var MAX_BITS=15,D_CODES=30,BL_CODES=19,LITERALS=256,L_CODES=LITERALS+1+29,HEAP_SIZE=2*L_CODES+1,END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,Buf_size=16,Z_DEFAULT_COMPRESSION=-1,Z_FILTERED=1,Z_HUFFMAN_ONLY=2,Z_DEFAULT_STRATEGY=0,Z_NO_FLUSH=0,Z_PARTIAL_FLUSH=1,Z_FULL_FLUSH=3,Z_FINISH=4,Z_OK=0,Z_STREAM_END=1,Z_NEED_DICT=2,Z_STREAM_ERROR=-2,Z_DATA_ERROR=-3,Z_BUF_ERROR=-5,_dist_code=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];Tree._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Tree.d_code=function(dist){return dist<256?_dist_code[dist]:_dist_code[256+(dist>>>7)]},Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],StaticTree.static_ltree=[12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8],StaticTree.static_dtree=[0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5],StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,MAX_BITS),StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,MAX_BITS),StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,7);var MAX_MEM_LEVEL=9,DEF_MEM_LEVEL=8,STORED=0,FAST=1,SLOW=2,config_table=[new Config(0,0,0,0,STORED),new Config(4,4,8,4,FAST),new Config(4,5,16,8,FAST),new Config(4,6,32,32,FAST),new Config(4,4,16,16,SLOW),new Config(8,16,32,32,SLOW),new Config(8,16,128,128,SLOW),new Config(8,32,128,256,SLOW),new Config(32,128,258,1024,SLOW),new Config(32,258,258,4096,SLOW)],z_errmsg=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],NeedMore=0,BlockDone=1,FinishStarted=2,FinishDone=3,PRESET_DICT=32,INIT_STATE=42,BUSY_STATE=113,FINISH_STATE=666,Z_DEFLATED=8,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1;return ZStream.prototype={deflateInit:function(level,bits){return this.dstate=new Deflate,bits||(bits=MAX_BITS),this.dstate.deflateInit(this,level,bits)},deflate:function(flush){return this.dstate?this.dstate.deflate(this,flush):Z_STREAM_ERROR},deflateEnd:function(){if(!this.dstate)return Z_STREAM_ERROR;var ret=this.dstate.deflateEnd();return this.dstate=null,ret},deflateParams:function(level,strategy){return this.dstate?this.dstate.deflateParams(this,level,strategy):Z_STREAM_ERROR},deflateSetDictionary:function(dictionary,dictLength){return this.dstate?this.dstate.deflateSetDictionary(this,dictionary,dictLength):Z_STREAM_ERROR},read_buf:function(buf,start,size){var len=this.avail_in;return len>size&&(len=size),0===len?0:(this.avail_in-=len,buf.set(this.next_in.subarray(this.next_in_index,this.next_in_index+len),start),this.next_in_index+=len,this.total_in+=len,len)},flush_pending:function(){var len=this.dstate.pending;len>this.avail_out&&(len=this.avail_out),0!==len&&(this.next_out.set(this.dstate.pending_buf.subarray(this.dstate.pending_out,this.dstate.pending_out+len),this.next_out_index),this.next_out_index+=len,this.dstate.pending_out+=len,this.total_out+=len,this.avail_out-=len,this.dstate.pending-=len,0===this.dstate.pending&&(this.dstate.pending_out=0))}},function(level){var z=new ZStream,flush=Z_NO_FLUSH,buf=new Uint8Array(512);void 0===level&&(level=Z_DEFAULT_COMPRESSION),z.deflateInit(level),z.next_out=buf,this.append=function(data,onprogress){var array,buffers=[],lastIndex=0,bufferIndex=0,bufferSize=0;if(data.length){z.next_in_index=0,z.next_in=data,z.avail_in=data.length;do{if(z.next_out_index=0,z.avail_out=512,z.deflate(flush)!=Z_OK)throw"deflating: "+z.msg;z.next_out_index&&(512==z.next_out_index?buffers.push(new Uint8Array(buf)):buffers.push(new Uint8Array(buf.subarray(0,z.next_out_index)))),bufferSize+=z.next_out_index,onprogress&&z.next_in_index>0&&z.next_in_index!=lastIndex&&(onprogress(z.next_in_index),lastIndex=z.next_in_index)}while(z.avail_in>0||0===z.avail_out);return array=new Uint8Array(bufferSize),buffers.forEach(function(chunk){array.set(chunk,bufferIndex),bufferIndex+=chunk.length}),array}},this.flush=function(){var err,array,buffers=[],bufferIndex=0,bufferSize=0;do{if(z.next_out_index=0,z.avail_out=512,(err=z.deflate(Z_FINISH))!=Z_STREAM_END&&err!=Z_OK)throw"deflating: "+z.msg;512-z.avail_out>0&&buffers.push(new Uint8Array(buf.subarray(0,z.next_out_index))),bufferSize+=z.next_out_index}while(z.avail_in>0||0===z.avail_out);return z.deflateEnd(),array=new Uint8Array(bufferSize),buffers.forEach(function(chunk){array.set(chunk,bufferIndex),bufferIndex+=chunk.length}),array}}}();!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.html2canvas=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n||e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){(function(global){!function(root){function error(type){throw RangeError(errors[type])}function map(array,fn){for(var length=array.length;length--;)array[length]=fn(array[length]);return array}function mapDomain(string,fn){return map(string.split(regexSeparators),fn).join(".")}function ucs2decode(string){for(var value,extra,output=[],counter=0,length=string.length;counter<length;)(value=string.charCodeAt(counter++))>=55296&&value<=56319&&counter<length?56320==(64512&(extra=string.charCodeAt(counter++)))?output.push(((1023&value)<<10)+(1023&extra)+65536):(output.push(value),counter--):output.push(value);return output}function ucs2encode(array){return map(array,function(value){var output="";return value>65535&&(output+=stringFromCharCode((value-=65536)>>>10&1023|55296),value=56320|1023&value),output+=stringFromCharCode(value)}).join("")}function basicToDigit(codePoint){return codePoint-48<10?codePoint-22:codePoint-65<26?codePoint-65:codePoint-97<26?codePoint-97:base}function digitToBasic(digit,flag){return digit+22+75*(digit<26)-((0!=flag)<<5)}function adapt(delta,numPoints,firstTime){var k=0;for(delta=firstTime?floor(delta/damp):delta>>1,delta+=floor(delta/numPoints);delta>baseMinusTMin*tMax>>1;k+=base)delta=floor(delta/baseMinusTMin);return floor(k+(baseMinusTMin+1)*delta/(delta+skew))}function decode(input){var out,basic,j,index,oldi,w,k,digit,t,baseMinusT,output=[],inputLength=input.length,i=0,n=initialN,bias=initialBias;for((basic=input.lastIndexOf(delimiter))<0&&(basic=0),j=0;j<basic;++j)input.charCodeAt(j)>=128&&error("not-basic"),output.push(input.charCodeAt(j));for(index=basic>0?basic+1:0;index<inputLength;){for(oldi=i,w=1,k=base;index>=inputLength&&error("invalid-input"),((digit=basicToDigit(input.charCodeAt(index++)))>=base||digit>floor((maxInt-i)/w))&&error("overflow"),i+=digit*w,t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(digit<t);k+=base)w>floor(maxInt/(baseMinusT=base-t))&&error("overflow"),w*=baseMinusT;bias=adapt(i-oldi,out=output.length+1,0==oldi),floor(i/out)>maxInt-n&&error("overflow"),n+=floor(i/out),i%=out,output.splice(i++,0,n)}return ucs2encode(output)}function encode(input){var n,delta,handledCPCount,basicLength,bias,j,m,q,k,t,currentValue,inputLength,handledCPCountPlusOne,baseMinusT,qMinusT,output=[];for(inputLength=(input=ucs2decode(input)).length,n=initialN,delta=0,bias=initialBias,j=0;j<inputLength;++j)(currentValue=input[j])<128&&output.push(stringFromCharCode(currentValue));for(handledCPCount=basicLength=output.length,basicLength&&output.push(delimiter);handledCPCount<inputLength;){for(m=maxInt,j=0;j<inputLength;++j)(currentValue=input[j])>=n&&currentValue<m&&(m=currentValue);for(m-n>floor((maxInt-delta)/(handledCPCountPlusOne=handledCPCount+1))&&error("overflow"),delta+=(m-n)*handledCPCountPlusOne,n=m,j=0;j<inputLength;++j)if((currentValue=input[j])<n&&++delta>maxInt&&error("overflow"),currentValue==n){for(q=delta,k=base;t=k<=bias?tMin:k>=bias+tMax?tMax:k-bias,!(q<t);k+=base)qMinusT=q-t,baseMinusT=base-t,output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT,0))),q=floor(qMinusT/baseMinusT);output.push(stringFromCharCode(digitToBasic(q,0))),bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength),delta=0,++handledCPCount}++delta,++n}return output.join("")}var freeExports="object"==typeof exports&&exports,freeModule="object"==typeof module&&module&&module.exports==freeExports&&module,freeGlobal="object"==typeof global&&global;freeGlobal.global!==freeGlobal&&freeGlobal.window!==freeGlobal||(root=freeGlobal);var punycode,key,maxInt=2147483647,base=36,tMin=1,tMax=26,skew=38,damp=700,initialBias=72,initialN=128,delimiter="-",regexPunycode=/^xn--/,regexNonASCII=/[^ -~]/,regexSeparators=/\x2E|\u3002|\uFF0E|\uFF61/g,errors={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},baseMinusTMin=base-tMin,floor=Math.floor,stringFromCharCode=String.fromCharCode;if(punycode={version:"1.2.4",ucs2:{decode:ucs2decode,encode:ucs2encode},decode:decode,encode:encode,toASCII:function(domain){return mapDomain(domain,function(string){return regexNonASCII.test(string)?"xn--"+encode(string):string})},toUnicode:function(domain){return mapDomain(domain,function(string){return regexPunycode.test(string)?decode(string.slice(4).toLowerCase()):string})}},freeExports&&!freeExports.nodeType)if(freeModule)freeModule.exports=punycode;else for(key in punycode)punycode.hasOwnProperty(key)&&(freeExports[key]=punycode[key]);else root.punycode=punycode}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(_dereq_,module,exports){function cloneNode(node,javascriptEnabled){for(var clone=3===node.nodeType?document.createTextNode(node.nodeValue):node.cloneNode(!1),child=node.firstChild;child;)!0!==javascriptEnabled&&1===child.nodeType&&"SCRIPT"===child.nodeName||clone.appendChild(cloneNode(child,javascriptEnabled)),child=child.nextSibling;return 1===node.nodeType&&(clone._scrollTop=node.scrollTop,clone._scrollLeft=node.scrollLeft,"CANVAS"===node.nodeName?function(canvas,clonedCanvas){try{clonedCanvas&&(clonedCanvas.width=canvas.width,clonedCanvas.height=canvas.height,clonedCanvas.getContext("2d").putImageData(canvas.getContext("2d").getImageData(0,0,canvas.width,canvas.height),0,0))}catch(e){log("Unable to copy canvas content from",canvas,e)}}(node,clone):"TEXTAREA"!==node.nodeName&&"SELECT"!==node.nodeName||(clone.value=node.value)),clone}function initNode(node){if(1===node.nodeType){node.scrollTop=node._scrollTop,node.scrollLeft=node._scrollLeft;for(var child=node.firstChild;child;)initNode(child),child=child.nextSibling}}var log=_dereq_("./log");module.exports=function(ownerDocument,containerDocument,width,height,options,x,y){var documentElement=cloneNode(ownerDocument.documentElement,options.javascriptEnabled),container=containerDocument.createElement("iframe");return container.className="html2canvas-container",container.style.visibility="hidden",container.style.position="fixed",container.style.left="-10000px",container.style.top="0px",container.style.border="0",container.width=width,container.height=height,container.scrolling="no",containerDocument.body.appendChild(container),new Promise(function(resolve){var documentClone=container.contentWindow.document;container.contentWindow.onload=container.onload=function(){var interval=setInterval(function(){documentClone.body.childNodes.length>0&&(initNode(documentClone.documentElement),clearInterval(interval),"view"===options.type&&(container.contentWindow.scrollTo(x,y),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||container.contentWindow.scrollY===y&&container.contentWindow.scrollX===x||(documentClone.documentElement.style.top=-y+"px",documentClone.documentElement.style.left=-x+"px",documentClone.documentElement.style.position="absolute")),resolve(container))},50)},documentClone.open(),documentClone.write("<!DOCTYPE html><html></html>"),function(ownerDocument,x,y){!ownerDocument.defaultView||x===ownerDocument.defaultView.pageXOffset&&y===ownerDocument.defaultView.pageYOffset||ownerDocument.defaultView.scrollTo(x,y)}(ownerDocument,x,y),documentClone.replaceChild(documentClone.adoptNode(documentElement),documentClone.documentElement),documentClone.close()})}},{"./log":13}],3:[function(_dereq_,module,exports){function Color(value){this.r=0,this.g=0,this.b=0,this.a=null;this.fromArray(value)||this.namedColor(value)||this.rgb(value)||this.rgba(value)||this.hex6(value)||this.hex3(value)}Color.prototype.darken=function(amount){var a=1-amount;return new Color([Math.round(this.r*a),Math.round(this.g*a),Math.round(this.b*a),this.a])},Color.prototype.isTransparent=function(){return 0===this.a},Color.prototype.isBlack=function(){return 0===this.r&&0===this.g&&0===this.b},Color.prototype.fromArray=function(array){return Array.isArray(array)&&(this.r=Math.min(array[0],255),this.g=Math.min(array[1],255),this.b=Math.min(array[2],255),array.length>3&&(this.a=array[3])),Array.isArray(array)};var _hex3=/^#([a-f0-9]{3})$/i;Color.prototype.hex3=function(value){var match=null;return null!==(match=value.match(_hex3))&&(this.r=parseInt(match[1][0]+match[1][0],16),this.g=parseInt(match[1][1]+match[1][1],16),this.b=parseInt(match[1][2]+match[1][2],16)),null!==match};var _hex6=/^#([a-f0-9]{6})$/i;Color.prototype.hex6=function(value){var match=null;return null!==(match=value.match(_hex6))&&(this.r=parseInt(match[1].substring(0,2),16),this.g=parseInt(match[1].substring(2,4),16),this.b=parseInt(match[1].substring(4,6),16)),null!==match};var _rgb=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/;Color.prototype.rgb=function(value){var match=null;return null!==(match=value.match(_rgb))&&(this.r=Number(match[1]),this.g=Number(match[2]),this.b=Number(match[3])),null!==match};var _rgba=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d?\.?\d+)\s*\)$/;Color.prototype.rgba=function(value){var match=null;return null!==(match=value.match(_rgba))&&(this.r=Number(match[1]),this.g=Number(match[2]),this.b=Number(match[3]),this.a=Number(match[4])),null!==match},Color.prototype.toString=function(){return null!==this.a&&1!==this.a?"rgba("+[this.r,this.g,this.b,this.a].join(",")+")":"rgb("+[this.r,this.g,this.b].join(",")+")"},Color.prototype.namedColor=function(value){value=value.toLowerCase();var color=colors[value];if(color)this.r=color[0],this.g=color[1],this.b=color[2];else if("transparent"===value)return this.r=this.g=this.b=this.a=0,!0;return!!color},Color.prototype.isColor=!0;var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};module.exports=Color},{}],4:[function(_dereq_,module,exports){function html2canvas(nodeList,options){var index=html2canvasCloneIndex++;if((options=options||{}).logging&&(log.options.logging=!0,log.options.start=Date.now()),options.async=void 0===options.async||options.async,options.allowTaint=void 0!==options.allowTaint&&options.allowTaint,options.removeContainer=void 0===options.removeContainer||options.removeContainer,options.javascriptEnabled=void 0!==options.javascriptEnabled&&options.javascriptEnabled,options.imageTimeout=void 0===options.imageTimeout?1e4:options.imageTimeout,options.renderer="function"==typeof options.renderer?options.renderer:CanvasRenderer,options.strict=!!options.strict,"string"==typeof nodeList){if("string"!=typeof options.proxy)return Promise.reject("Proxy must be used when rendering url");var width=null!=options.width?options.width:window.innerWidth,height=null!=options.height?options.height:window.innerHeight;return loadUrlDocument(function(url){var link=document.createElement("a");return link.href=url,link.href=link.href,link}(nodeList),options.proxy,document,width,height,options).then(function(container){return renderWindow(container.contentWindow.document.documentElement,container,options,width,height)})}var node=(void 0===nodeList?[document.documentElement]:nodeList.length?nodeList:[nodeList])[0];return node.setAttribute(html2canvasNodeAttribute+index,index),function(document,options,windowWidth,windowHeight,html2canvasIndex){return createWindowClone(document,document,windowWidth,windowHeight,options,document.defaultView.pageXOffset,document.defaultView.pageYOffset).then(function(container){log("Document cloned");var attributeName=html2canvasNodeAttribute+html2canvasIndex,selector="["+attributeName+"='"+html2canvasIndex+"']";document.querySelector(selector).removeAttribute(attributeName);var clonedWindow=container.contentWindow,node=clonedWindow.document.querySelector(selector),oncloneHandler="function"==typeof options.onclone?Promise.resolve(options.onclone(clonedWindow.document)):Promise.resolve(!0);return oncloneHandler.then(function(){return renderWindow(node,container,options,windowWidth,windowHeight)})})}(node.ownerDocument,options,node.ownerDocument.defaultView.innerWidth,node.ownerDocument.defaultView.innerHeight,index).then(function(canvas){return"function"==typeof options.onrendered&&(log("options.onrendered is deprecated, html2canvas returns a Promise containing the canvas"),options.onrendered(canvas)),canvas})}function renderWindow(node,container,options,windowWidth,windowHeight){var clonedWindow=container.contentWindow,support=new Support(clonedWindow.document),imageLoader=new ImageLoader(options,support),bounds=getBounds(node),width="view"===options.type?windowWidth:function(doc){return Math.max(Math.max(doc.body.scrollWidth,doc.documentElement.scrollWidth),Math.max(doc.body.offsetWidth,doc.documentElement.offsetWidth),Math.max(doc.body.clientWidth,doc.documentElement.clientWidth))}(clonedWindow.document),height="view"===options.type?windowHeight:function(doc){return Math.max(Math.max(doc.body.scrollHeight,doc.documentElement.scrollHeight),Math.max(doc.body.offsetHeight,doc.documentElement.offsetHeight),Math.max(doc.body.clientHeight,doc.documentElement.clientHeight))}(clonedWindow.document),renderer=new options.renderer(width,height,imageLoader,options,document);return new NodeParser(node,renderer,support,imageLoader,options).ready.then(function(){log("Finished rendering");var canvas;return canvas="view"===options.type?crop(renderer.canvas,{width:renderer.canvas.width,height:renderer.canvas.height,top:0,left:0,x:0,y:0}):node===clonedWindow.document.body||node===clonedWindow.document.documentElement||null!=options.canvas?renderer.canvas:crop(renderer.canvas,{width:null!=options.width?options.width:bounds.width,height:null!=options.height?options.height:bounds.height,top:bounds.top,left:bounds.left,x:0,y:0}),function(container,options){options.removeContainer&&(container.parentNode.removeChild(container),log("Cleaned up container"))}(container,options),canvas})}function crop(canvas,bounds){var croppedCanvas=document.createElement("canvas"),x1=Math.min(canvas.width-1,Math.max(0,bounds.left)),x2=Math.min(canvas.width,Math.max(1,bounds.left+bounds.width)),y1=Math.min(canvas.height-1,Math.max(0,bounds.top)),y2=Math.min(canvas.height,Math.max(1,bounds.top+bounds.height));croppedCanvas.width=bounds.width,croppedCanvas.height=bounds.height;var width=x2-x1,height=y2-y1;return log("Cropping canvas at:","left:",bounds.left,"top:",bounds.top,"width:",width,"height:",height),log("Resulting crop with width",bounds.width,"and height",bounds.height,"with x",x1,"and y",y1),croppedCanvas.getContext("2d").drawImage(canvas,x1,y1,width,height,bounds.x,bounds.y,width,height),croppedCanvas}var Support=_dereq_("./support"),CanvasRenderer=_dereq_("./renderers/canvas"),ImageLoader=_dereq_("./imageloader"),NodeParser=_dereq_("./nodeparser"),NodeContainer=_dereq_("./nodecontainer"),log=_dereq_("./log"),utils=_dereq_("./utils"),createWindowClone=_dereq_("./clone"),loadUrlDocument=_dereq_("./proxy").loadUrlDocument,getBounds=utils.getBounds,html2canvasNodeAttribute="data-html2canvas-node",html2canvasCloneIndex=0;html2canvas.CanvasRenderer=CanvasRenderer,html2canvas.NodeContainer=NodeContainer,html2canvas.log=log,html2canvas.utils=utils;var html2canvasExport="undefined"==typeof document||"function"!=typeof Object.create||"function"!=typeof document.createElement("canvas").getContext?function(){return Promise.reject("No canvas support")}:html2canvas;module.exports=html2canvasExport},{"./clone":2,"./imageloader":11,"./log":13,"./nodecontainer":14,"./nodeparser":15,"./proxy":16,"./renderers/canvas":20,"./support":22,"./utils":26}],5:[function(_dereq_,module,exports){function DummyImageContainer(src){if(this.src=src,log("DummyImageContainer for",src),!this.promise||!this.image){log("Initiating DummyImageContainer"),DummyImageContainer.prototype.image=new Image;var image=this.image;DummyImageContainer.prototype.promise=new Promise(function(resolve,reject){image.onload=resolve,image.onerror=reject,image.src=smallImage(),!0===image.complete&&resolve(image)})}}var log=_dereq_("./log"),smallImage=_dereq_("./utils").smallImage;module.exports=DummyImageContainer},{"./log":13,"./utils":26}],6:[function(_dereq_,module,exports){var smallImage=_dereq_("./utils").smallImage;module.exports=function(family,size){var baseline,middle,container=document.createElement("div"),img=document.createElement("img"),span=document.createElement("span");container.style.visibility="hidden",container.style.fontFamily=family,container.style.fontSize=size,container.style.margin=0,container.style.padding=0,document.body.appendChild(container),img.src=smallImage(),img.width=1,img.height=1,img.style.margin=0,img.style.padding=0,img.style.verticalAlign="baseline",span.style.fontFamily=family,span.style.fontSize=size,span.style.margin=0,span.style.padding=0,span.appendChild(document.createTextNode("Hidden Text")),container.appendChild(span),container.appendChild(img),baseline=img.offsetTop-span.offsetTop+1,container.removeChild(span),container.appendChild(document.createTextNode("Hidden Text")),container.style.lineHeight="normal",img.style.verticalAlign="super",middle=img.offsetTop-container.offsetTop+1,document.body.removeChild(container),this.baseline=baseline,this.lineWidth=1,this.middle=middle}},{"./utils":26}],7:[function(_dereq_,module,exports){function FontMetrics(){this.data={}}var Font=_dereq_("./font");FontMetrics.prototype.getMetrics=function(family,size){return void 0===this.data[family+"-"+size]&&(this.data[family+"-"+size]=new Font(family,size)),this.data[family+"-"+size]},module.exports=FontMetrics},{"./font":6}],8:[function(_dereq_,module,exports){function FrameContainer(container,sameOrigin,options){this.image=null,this.src=container;var self=this,bounds=getBounds(container);this.promise=(sameOrigin?new Promise(function(resolve){"about:blank"===container.contentWindow.document.URL||null==container.contentWindow.document.documentElement?container.contentWindow.onload=container.onload=function(){resolve(container)}:resolve(container)}):this.proxyLoad(options.proxy,bounds,options)).then(function(container){return _dereq_("./core")(container.contentWindow.document.documentElement,{type:"view",width:container.width,height:container.height,proxy:options.proxy,javascriptEnabled:options.javascriptEnabled,removeContainer:options.removeContainer,allowTaint:options.allowTaint,imageTimeout:options.imageTimeout/2})}).then(function(canvas){return self.image=canvas})}var getBounds=_dereq_("./utils").getBounds,loadUrlDocument=_dereq_("./proxy").loadUrlDocument;FrameContainer.prototype.proxyLoad=function(proxy,bounds,options){var container=this.src;return loadUrlDocument(container.src,proxy,container.ownerDocument,bounds.width,bounds.height,options)},module.exports=FrameContainer},{"./core":4,"./proxy":16,"./utils":26}],9:[function(_dereq_,module,exports){function GradientContainer(imageData){this.src=imageData.value,this.colorStops=[],this.type=null,this.x0=.5,this.y0=.5,this.x1=.5,this.y1=.5,this.promise=Promise.resolve(!0)}GradientContainer.TYPES={LINEAR:1,RADIAL:2},GradientContainer.REGEXP_COLORSTOP=/^\s*(rgba?\(\s*\d{1,3},\s*\d{1,3},\s*\d{1,3}(?:,\s*[0-9\.]+)?\s*\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\s+(\d{1,3}(?:\.\d+)?)(%|px)?)?(?:\s|$)/i,module.exports=GradientContainer},{}],10:[function(_dereq_,module,exports){module.exports=function(src,cors){this.src=src,this.image=new Image;var self=this;this.tainted=null,this.promise=new Promise(function(resolve,reject){self.image.onload=resolve,self.image.onerror=reject,cors&&(self.image.crossOrigin="anonymous"),self.image.src=src,!0===self.image.complete&&resolve(self.image)})}},{}],11:[function(_dereq_,module,exports){function ImageLoader(options,support){this.link=null,this.options=options,this.support=support,this.origin=this.getOrigin(window.location.href)}var log=_dereq_("./log"),ImageContainer=_dereq_("./imagecontainer"),DummyImageContainer=_dereq_("./dummyimagecontainer"),ProxyImageContainer=_dereq_("./proxyimagecontainer"),FrameContainer=_dereq_("./framecontainer"),SVGContainer=_dereq_("./svgcontainer"),SVGNodeContainer=_dereq_("./svgnodecontainer"),LinearGradientContainer=_dereq_("./lineargradientcontainer"),WebkitGradientContainer=_dereq_("./webkitgradientcontainer"),bind=_dereq_("./utils").bind;ImageLoader.prototype.findImages=function(nodes){var images=[];return nodes.reduce(function(imageNodes,container){switch(container.node.nodeName){case"IMG":return imageNodes.concat([{args:[container.node.src],method:"url"}]);case"svg":case"IFRAME":return imageNodes.concat([{args:[container.node],method:container.node.nodeName}])}return imageNodes},[]).forEach(this.addImage(images,this.loadImage),this),images},ImageLoader.prototype.findBackgroundImage=function(images,container){return container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images,this.loadImage),this),images},ImageLoader.prototype.addImage=function(images,callback){return function(newImage){newImage.args.forEach(function(image){this.imageExists(images,image)||(images.splice(0,0,callback.call(this,newImage)),log("Added image #"+images.length,"string"==typeof image?image.substring(0,100):image))},this)}},ImageLoader.prototype.hasImageBackground=function(imageData){return"none"!==imageData.method},ImageLoader.prototype.loadImage=function(imageData){if("url"===imageData.method){var src=imageData.args[0];return!this.isSVG(src)||this.support.svg||this.options.allowTaint?src.match(/data:image\/.*;base64,/i)?new ImageContainer(src.replace(/url\(['"]{0,}|['"]{0,}\)$/gi,""),!1):this.isSameOrigin(src)||!0===this.options.allowTaint||this.isSVG(src)?new ImageContainer(src,!1):this.support.cors&&!this.options.allowTaint&&this.options.useCORS?new ImageContainer(src,!0):this.options.proxy?new ProxyImageContainer(src,this.options.proxy):new DummyImageContainer(src):new SVGContainer(src)}return"linear-gradient"===imageData.method?new LinearGradientContainer(imageData):"gradient"===imageData.method?new WebkitGradientContainer(imageData):"svg"===imageData.method?new SVGNodeContainer(imageData.args[0],this.support.svg):"IFRAME"===imageData.method?new FrameContainer(imageData.args[0],this.isSameOrigin(imageData.args[0].src),this.options):new DummyImageContainer(imageData)},ImageLoader.prototype.isSVG=function(src){return"svg"===src.substring(src.length-3).toLowerCase()||SVGContainer.prototype.isInline(src)},ImageLoader.prototype.imageExists=function(images,src){return images.some(function(image){return image.src===src})},ImageLoader.prototype.isSameOrigin=function(url){return this.getOrigin(url)===this.origin},ImageLoader.prototype.getOrigin=function(url){var link=this.link||(this.link=document.createElement("a"));return link.href=url,link.href=link.href,link.protocol+link.hostname+link.port},ImageLoader.prototype.getPromise=function(container){return this.timeout(container,this.options.imageTimeout).catch(function(){return new DummyImageContainer(container.src).promise.then(function(image){container.image=image})})},ImageLoader.prototype.get=function(src){var found=null;return this.images.some(function(img){return(found=img).src===src})?found:null},ImageLoader.prototype.fetch=function(nodes){return this.images=nodes.reduce(bind(this.findBackgroundImage,this),this.findImages(nodes)),this.images.forEach(function(image,index){image.promise.then(function(){log("Succesfully loaded image #"+(index+1),image)},function(e){log("Failed loading image #"+(index+1),image,e)})}),this.ready=Promise.all(this.images.map(this.getPromise,this)),log("Finished searching images"),this},ImageLoader.prototype.timeout=function(container,timeout){var timer,promise=Promise.race([container.promise,new Promise(function(res,reject){timer=setTimeout(function(){log("Timed out loading image",container),reject(container)},timeout)})]).then(function(container){return clearTimeout(timer),container});return promise.catch(function(){clearTimeout(timer)}),promise},module.exports=ImageLoader},{"./dummyimagecontainer":5,"./framecontainer":8,"./imagecontainer":10,"./lineargradientcontainer":12,"./log":13,"./proxyimagecontainer":17,"./svgcontainer":23,"./svgnodecontainer":24,"./utils":26,"./webkitgradientcontainer":27}],12:[function(_dereq_,module,exports){function LinearGradientContainer(imageData){GradientContainer.apply(this,arguments),this.type=GradientContainer.TYPES.LINEAR;var hasDirection=LinearGradientContainer.REGEXP_DIRECTION.test(imageData.args[0])||!GradientContainer.REGEXP_COLORSTOP.test(imageData.args[0]);hasDirection?imageData.args[0].split(/\s+/).reverse().forEach(function(position,index){switch(position){case"left":this.x0=0,this.x1=1;break;case"top":this.y0=0,this.y1=1;break;case"right":this.x0=1,this.x1=0;break;case"bottom":this.y0=1,this.y1=0;break;case"to":var y0=this.y0,x0=this.x0;this.y0=this.y1,this.x0=this.x1,this.x1=x0,this.y1=y0;break;case"center":break;default:var ratio=.01*parseFloat(position,10);if(isNaN(ratio))break;0===index?(this.y0=ratio,this.y1=1-this.y0):(this.x0=ratio,this.x1=1-this.x0)}},this):(this.y0=0,this.y1=1),this.colorStops=imageData.args.slice(hasDirection?1:0).map(function(colorStop){var colorStopMatch=colorStop.match(GradientContainer.REGEXP_COLORSTOP),value=+colorStopMatch[2],unit=0===value?"%":colorStopMatch[3];return{color:new Color(colorStopMatch[1]),stop:"%"===unit?value/100:null}}),null===this.colorStops[0].stop&&(this.colorStops[0].stop=0),null===this.colorStops[this.colorStops.length-1].stop&&(this.colorStops[this.colorStops.length-1].stop=1),this.colorStops.forEach(function(colorStop,index){null===colorStop.stop&&this.colorStops.slice(index).some(function(find,count){return null!==find.stop&&(colorStop.stop=(find.stop-this.colorStops[index-1].stop)/(count+1)+this.colorStops[index-1].stop,!0)},this)},this)}var GradientContainer=_dereq_("./gradientcontainer"),Color=_dereq_("./color");LinearGradientContainer.prototype=Object.create(GradientContainer.prototype),LinearGradientContainer.REGEXP_DIRECTION=/^\s*(?:to|left|right|top|bottom|center|\d{1,3}(?:\.\d+)?%?)(?:\s|$)/i,module.exports=LinearGradientContainer},{"./color":3,"./gradientcontainer":9}],13:[function(_dereq_,module,exports){var logger=function(){logger.options.logging&&window.console&&window.console.log&&Function.prototype.bind.call(window.console.log,window.console).apply(window.console,[Date.now()-logger.options.start+"ms","html2canvas:"].concat([].slice.call(arguments,0)))};logger.options={logging:!1},module.exports=logger},{}],14:[function(_dereq_,module,exports){function NodeContainer(node,parent){this.node=node,this.parent=parent,this.stack=null,this.bounds=null,this.borders=null,this.clip=[],this.backgroundClip=[],this.offsetBounds=null,this.visible=null,this.computedStyles=null,this.colors={},this.styles={},this.backgroundImages=null,this.transformData=null,this.transformMatrix=null,this.isPseudoElement=!1,this.opacity=null}function isPercentage(value){return-1!==value.toString().indexOf("%")}function removePx(str){return str.replace("px","")}function asFloat(str){return parseFloat(str)}var Color=_dereq_("./color"),utils=_dereq_("./utils"),getBounds=utils.getBounds,parseBackgrounds=utils.parseBackgrounds,offsetBounds=utils.offsetBounds;NodeContainer.prototype.cloneTo=function(stack){stack.visible=this.visible,stack.borders=this.borders,stack.bounds=this.bounds,stack.clip=this.clip,stack.backgroundClip=this.backgroundClip,stack.computedStyles=this.computedStyles,stack.styles=this.styles,stack.backgroundImages=this.backgroundImages,stack.opacity=this.opacity},NodeContainer.prototype.getOpacity=function(){return null===this.opacity?this.opacity=this.cssFloat("opacity"):this.opacity},NodeContainer.prototype.assignStack=function(stack){this.stack=stack,stack.children.push(this)},NodeContainer.prototype.isElementVisible=function(){return this.node.nodeType===Node.TEXT_NODE?this.parent.visible:"none"!==this.css("display")&&"hidden"!==this.css("visibility")&&!this.node.hasAttribute("data-html2canvas-ignore")&&("INPUT"!==this.node.nodeName||"hidden"!==this.node.getAttribute("type"))},NodeContainer.prototype.css=function(attribute){return this.computedStyles||(this.computedStyles=this.isPseudoElement?this.parent.computedStyle(this.before?":before":":after"):this.computedStyle(null)),this.styles[attribute]||(this.styles[attribute]=this.computedStyles[attribute])},NodeContainer.prototype.prefixedCss=function(attribute){var value=this.css(attribute);return void 0===value&&["webkit","moz","ms","o"].some(function(prefix){return void 0!==(value=this.css(prefix+attribute.substr(0,1).toUpperCase()+attribute.substr(1)))},this),void 0===value?null:value},NodeContainer.prototype.computedStyle=function(type){return this.node.ownerDocument.defaultView.getComputedStyle(this.node,type)},NodeContainer.prototype.cssInt=function(attribute){var value=parseInt(this.css(attribute),10);return isNaN(value)?0:value},NodeContainer.prototype.color=function(attribute){return this.colors[attribute]||(this.colors[attribute]=new Color(this.css(attribute)))},NodeContainer.prototype.cssFloat=function(attribute){var value=parseFloat(this.css(attribute));return isNaN(value)?0:value},NodeContainer.prototype.fontWeight=function(){var weight=this.css("fontWeight");switch(parseInt(weight,10)){case 401:weight="bold";break;case 400:weight="normal"}return weight},NodeContainer.prototype.parseClip=function(){var matches=this.css("clip").match(this.CLIP);return matches?{top:parseInt(matches[1],10),right:parseInt(matches[2],10),bottom:parseInt(matches[3],10),left:parseInt(matches[4],10)}:null},NodeContainer.prototype.parseBackgroundImages=function(){return this.backgroundImages||(this.backgroundImages=parseBackgrounds(this.css("backgroundImage")))},NodeContainer.prototype.cssList=function(property,index){var value=(this.css(property)||"").split(",");return value=value[index||0]||value[0]||"auto",1===(value=value.trim().split(" ")).length&&(value=[value[0],isPercentage(value[0])?"auto":value[0]]),value},NodeContainer.prototype.parseBackgroundSize=function(bounds,image,index){var width,height,size=this.cssList("backgroundSize",index);if(isPercentage(size[0]))width=bounds.width*parseFloat(size[0])/100;else{if(/contain|cover/.test(size[0])){var targetRatio=bounds.width/bounds.height,currentRatio=image.width/image.height;return targetRatio<currentRatio^"contain"===size[0]?{width:bounds.height*currentRatio,height:bounds.height}:{width:bounds.width,height:bounds.width/currentRatio}}width=parseInt(size[0],10)}return height="auto"===size[0]&&"auto"===size[1]?image.height:"auto"===size[1]?width/image.width*image.height:isPercentage(size[1])?bounds.height*parseFloat(size[1])/100:parseInt(size[1],10),"auto"===size[0]&&(width=height/image.height*image.width),{width:width,height:height}},NodeContainer.prototype.parseBackgroundPosition=function(bounds,image,index,backgroundSize){var left,top,position=this.cssList("backgroundPosition",index);return left=isPercentage(position[0])?(bounds.width-(backgroundSize||image).width)*(parseFloat(position[0])/100):parseInt(position[0],10),top="auto"===position[1]?left/image.width*image.height:isPercentage(position[1])?(bounds.height-(backgroundSize||image).height)*parseFloat(position[1])/100:parseInt(position[1],10),"auto"===position[0]&&(left=top/image.height*image.width),{left:left,top:top}},NodeContainer.prototype.parseBackgroundRepeat=function(index){return this.cssList("backgroundRepeat",index)[0]},NodeContainer.prototype.parseTextShadows=function(){var textShadow=this.css("textShadow"),results=[];if(textShadow&&"none"!==textShadow)for(var shadows=textShadow.match(this.TEXT_SHADOW_PROPERTY),i=0;shadows&&i<shadows.length;i++){var s=shadows[i].match(this.TEXT_SHADOW_VALUES);results.push({color:new Color(s[0]),offsetX:s[1]?parseFloat(s[1].replace("px","")):0,offsetY:s[2]?parseFloat(s[2].replace("px","")):0,blur:s[3]?s[3].replace("px",""):0})}return results},NodeContainer.prototype.parseTransform=function(){if(!this.transformData)if(this.hasTransform()){var offset=this.parseBounds(),origin=this.prefixedCss("transformOrigin").split(" ").map(removePx).map(asFloat);origin[0]+=offset.left,origin[1]+=offset.top,this.transformData={origin:origin,matrix:this.parseTransformMatrix()}}else this.transformData={origin:[0,0],matrix:[1,0,0,1,0,0]};return this.transformData},NodeContainer.prototype.parseTransformMatrix=function(){if(!this.transformMatrix){var transform=this.prefixedCss("transform"),matrix=transform?function(match){if(match&&"matrix"===match[1])return match[2].split(",").map(function(s){return parseFloat(s.trim())});if(match&&"matrix3d"===match[1]){var matrix3d=match[2].split(",").map(function(s){return parseFloat(s.trim())});return[matrix3d[0],matrix3d[1],matrix3d[4],matrix3d[5],matrix3d[12],matrix3d[13]]}}(transform.match(this.MATRIX_PROPERTY)):null;this.transformMatrix=matrix||[1,0,0,1,0,0]}return this.transformMatrix},NodeContainer.prototype.parseBounds=function(){return this.bounds||(this.bounds=this.hasTransform()?offsetBounds(this.node):getBounds(this.node))},NodeContainer.prototype.hasTransform=function(){return"1,0,0,1,0,0"!==this.parseTransformMatrix().join(",")||this.parent&&this.parent.hasTransform()},NodeContainer.prototype.getValue=function(){var value=this.node.value||"";return"SELECT"===this.node.tagName?value=function(node){var option=node.options[node.selectedIndex||0];return option?option.text||"":""}(this.node):"password"===this.node.type&&(value=Array(value.length+1).join("")),0===value.length?this.node.placeholder||"":value},NodeContainer.prototype.MATRIX_PROPERTY=/(matrix|matrix3d)\((.+)\)/,NodeContainer.prototype.TEXT_SHADOW_PROPERTY=/((rgba|rgb)\([^\)]+\)(\s-?\d+px){0,})/g,NodeContainer.prototype.TEXT_SHADOW_VALUES=/(-?\d+px)|(#.+)|(rgb\(.+\))|(rgba\(.+\))/g,NodeContainer.prototype.CLIP=/^rect\((\d+)px,? (\d+)px,? (\d+)px,? (\d+)px\)$/,module.exports=NodeContainer},{"./color":3,"./utils":26}],15:[function(_dereq_,module,exports){function NodeParser(element,renderer,support,imageLoader,options){log("Starting NodeParser"),this.renderer=renderer,this.options=options,this.range=null,this.support=support,this.renderQueue=[],this.stack=new StackingContext(!0,1,element.ownerDocument,null);var parent=new NodeContainer(element,null);if(options.background&&renderer.rectangle(0,0,renderer.width,renderer.height,new Color(options.background)),element===element.ownerDocument.documentElement){var canvasBackground=new NodeContainer(parent.color("backgroundColor").isTransparent()?element.ownerDocument.body:element.ownerDocument.documentElement,null);renderer.rectangle(0,0,renderer.width,renderer.height,canvasBackground.color("backgroundColor"))}parent.visibile=parent.isElementVisible(),this.createPseudoHideStyles(element.ownerDocument),this.disableAnimations(element.ownerDocument),this.nodes=flatten([parent].concat(this.getChildren(parent)).filter(function(container){return container.visible=container.isElementVisible()}).map(this.getPseudoElements,this)),this.fontMetrics=new FontMetrics,log("Fetched nodes, total:",this.nodes.length),log("Calculate overflow clips"),this.calculateOverflowClips(),log("Start fetching images"),this.images=imageLoader.fetch(this.nodes.filter(isElement)),this.ready=this.images.ready.then(bind(function(){return log("Images loaded, starting parsing"),log("Creating stacking contexts"),this.createStackingContexts(),log("Sorting stacking contexts"),this.sortStackingContexts(this.stack),this.parse(this.stack),log("Render queue created with "+this.renderQueue.length+" items"),new Promise(bind(function(resolve){options.async?"function"==typeof options.async?options.async.call(this,this.renderQueue,resolve):this.renderQueue.length>0?(this.renderIndex=0,this.asyncRenderer(this.renderQueue,resolve)):resolve():(this.renderQueue.forEach(this.paint,this),resolve())},this))},this))}function hasParentClip(container){return container.parent&&container.parent.clip.length}function toCamelCase(str){return str.replace(/(\-[a-z])/g,function(match){return match.toUpperCase().replace("-","")})}function ClearTransform(){}function calculateBorders(borders,nodeBounds,borderPoints,radius){return borders.map(function(border,borderSide){if(border.width>0){var bx=nodeBounds.left,by=nodeBounds.top,bw=nodeBounds.width,bh=nodeBounds.height-borders[2].width;switch(borderSide){case 0:bh=borders[0].width,border.args=drawSide({c1:[bx,by],c2:[bx+bw,by],c3:[bx+bw-borders[1].width,by+bh],c4:[bx+borders[3].width,by+bh]},radius[0],radius[1],borderPoints.topLeftOuter,borderPoints.topLeftInner,borderPoints.topRightOuter,borderPoints.topRightInner);break;case 1:bx=nodeBounds.left+nodeBounds.width-borders[1].width,bw=borders[1].width,border.args=drawSide({c1:[bx+bw,by],c2:[bx+bw,by+bh+borders[2].width],c3:[bx,by+bh],c4:[bx,by+borders[0].width]},radius[1],radius[2],borderPoints.topRightOuter,borderPoints.topRightInner,borderPoints.bottomRightOuter,borderPoints.bottomRightInner);break;case 2:by=by+nodeBounds.height-borders[2].width,bh=borders[2].width,border.args=drawSide({c1:[bx+bw,by+bh],c2:[bx,by+bh],c3:[bx+borders[3].width,by],c4:[bx+bw-borders[3].width,by]},radius[2],radius[3],borderPoints.bottomRightOuter,borderPoints.bottomRightInner,borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner);break;case 3:bw=borders[3].width,border.args=drawSide({c1:[bx,by+bh+borders[2].width],c2:[bx,by],c3:[bx+bw,by+borders[0].width],c4:[bx+bw,by+bh]},radius[3],radius[0],borderPoints.bottomLeftOuter,borderPoints.bottomLeftInner,borderPoints.topLeftOuter,borderPoints.topLeftInner)}}return border})}function getCurvePoints(x,y,r1,r2){var kappa=(Math.sqrt(2)-1)/3*4,ox=r1*kappa,oy=r2*kappa,xm=x+r1,ym=y+r2;return{topLeft:bezierCurve({x:x,y:ym},{x:x,y:ym-oy},{x:xm-ox,y:y},{x:xm,y:y}),topRight:bezierCurve({x:x,y:y},{x:x+ox,y:y},{x:xm,y:ym-oy},{x:xm,y:ym}),bottomRight:bezierCurve({x:xm,y:y},{x:xm,y:y+oy},{x:x+ox,y:ym},{x:x,y:ym}),bottomLeft:bezierCurve({x:xm,y:ym},{x:xm-ox,y:ym},{x:x,y:y+oy},{x:x,y:y})}}function calculateCurvePoints(bounds,borderRadius,borders){var x=bounds.left,y=bounds.top,width=bounds.width,height=bounds.height,tlh=borderRadius[0][0]<width/2?borderRadius[0][0]:width/2,tlv=borderRadius[0][1]<height/2?borderRadius[0][1]:height/2,trh=borderRadius[1][0]<width/2?borderRadius[1][0]:width/2,trv=borderRadius[1][1]<height/2?borderRadius[1][1]:height/2,brh=borderRadius[2][0]<width/2?borderRadius[2][0]:width/2,brv=borderRadius[2][1]<height/2?borderRadius[2][1]:height/2,blh=borderRadius[3][0]<width/2?borderRadius[3][0]:width/2,blv=borderRadius[3][1]<height/2?borderRadius[3][1]:height/2,topWidth=width-trh,rightHeight=height-brv,bottomWidth=width-brh,leftHeight=height-blv;return{topLeftOuter:getCurvePoints(x,y,tlh,tlv).topLeft.subdivide(.5),topLeftInner:getCurvePoints(x+borders[3].width,y+borders[0].width,Math.max(0,tlh-borders[3].width),Math.max(0,tlv-borders[0].width)).topLeft.subdivide(.5),topRightOuter:getCurvePoints(x+topWidth,y,trh,trv).topRight.subdivide(.5),topRightInner:getCurvePoints(x+Math.min(topWidth,width+borders[3].width),y+borders[0].width,topWidth>width+borders[3].width?0:trh-borders[3].width,trv-borders[0].width).topRight.subdivide(.5),bottomRightOuter:getCurvePoints(x+bottomWidth,y+rightHeight,brh,brv).bottomRight.subdivide(.5),bottomRightInner:getCurvePoints(x+Math.min(bottomWidth,width-borders[3].width),y+Math.min(rightHeight,height+borders[0].width),Math.max(0,brh-borders[1].width),brv-borders[2].width).bottomRight.subdivide(.5),bottomLeftOuter:getCurvePoints(x,y+leftHeight,blh,blv).bottomLeft.subdivide(.5),bottomLeftInner:getCurvePoints(x+borders[3].width,y+leftHeight,Math.max(0,blh-borders[3].width),blv-borders[2].width).bottomLeft.subdivide(.5)}}function bezierCurve(start,startControl,endControl,end){var lerp=function(a,b,t){return{x:a.x+(b.x-a.x)*t,y:a.y+(b.y-a.y)*t}};return{start:start,startControl:startControl,endControl:endControl,end:end,subdivide:function(t){var ab=lerp(start,startControl,t),bc=lerp(startControl,endControl,t),cd=lerp(endControl,end,t),abbc=lerp(ab,bc,t),bccd=lerp(bc,cd,t),dest=lerp(abbc,bccd,t);return[bezierCurve(start,ab,abbc,dest),bezierCurve(dest,bccd,cd,end)]},curveTo:function(borderArgs){borderArgs.push(["bezierCurve",startControl.x,startControl.y,endControl.x,endControl.y,end.x,end.y])},curveToReversed:function(borderArgs){borderArgs.push(["bezierCurve",endControl.x,endControl.y,startControl.x,startControl.y,start.x,start.y])}}}function drawSide(borderData,radius1,radius2,outer1,inner1,outer2,inner2){var borderArgs=[];return radius1[0]>0||radius1[1]>0?(borderArgs.push(["line",outer1[1].start.x,outer1[1].start.y]),outer1[1].curveTo(borderArgs)):borderArgs.push(["line",borderData.c1[0],borderData.c1[1]]),radius2[0]>0||radius2[1]>0?(borderArgs.push(["line",outer2[0].start.x,outer2[0].start.y]),outer2[0].curveTo(borderArgs),borderArgs.push(["line",inner2[0].end.x,inner2[0].end.y]),inner2[0].curveToReversed(borderArgs)):(borderArgs.push(["line",borderData.c2[0],borderData.c2[1]]),borderArgs.push(["line",borderData.c3[0],borderData.c3[1]])),radius1[0]>0||radius1[1]>0?(borderArgs.push(["line",inner1[1].end.x,inner1[1].end.y]),inner1[1].curveToReversed(borderArgs)):borderArgs.push(["line",borderData.c4[0],borderData.c4[1]]),borderArgs}function parseCorner(borderArgs,radius1,radius2,corner1,corner2,x,y){radius1[0]>0||radius1[1]>0?(borderArgs.push(["line",corner1[0].start.x,corner1[0].start.y]),corner1[0].curveTo(borderArgs),corner1[1].curveTo(borderArgs)):borderArgs.push(["line",x,y]),(radius2[0]>0||radius2[1]>0)&&borderArgs.push(["line",corner2[0].start.x,corner2[0].start.y])}function negativeZIndex(container){return container.cssInt("zIndex")<0}function positiveZIndex(container){return container.cssInt("zIndex")>0}function zIndex0(container){return 0===container.cssInt("zIndex")}function inlineLevel(container){return-1!==["inline","inline-block","inline-table"].indexOf(container.css("display"))}function isStackingContext(container){return container instanceof StackingContext}function hasText(container){return container.node.data.trim().length>0}function renderableNode(node){return node.nodeType===Node.TEXT_NODE||node.nodeType===Node.ELEMENT_NODE}function isPositioned(container){return"static"!==container.css("position")}function isFloating(container){return"none"!==container.css("float")}function not(callback){var context=this;return function(){return!callback.apply(context,arguments)}}function isElement(container){return container.node.nodeType===Node.ELEMENT_NODE}function isPseudoElement(container){return!0===container.isPseudoElement}function isTextNode(container){return container.node.nodeType===Node.TEXT_NODE}function asInt(value){return parseInt(value,10)}function getWidth(border){return border.width}function nonIgnoredElement(nodeContainer){return nodeContainer.node.nodeType!==Node.ELEMENT_NODE||-1===["SCRIPT","HEAD","TITLE","OBJECT","BR","OPTION"].indexOf(nodeContainer.node.nodeName)}function flatten(arrays){return[].concat.apply([],arrays)}var log=_dereq_("./log"),punycode=_dereq_("punycode"),NodeContainer=_dereq_("./nodecontainer"),TextContainer=_dereq_("./textcontainer"),PseudoElementContainer=_dereq_("./pseudoelementcontainer"),FontMetrics=_dereq_("./fontmetrics"),Color=_dereq_("./color"),StackingContext=_dereq_("./stackingcontext"),utils=_dereq_("./utils"),bind=utils.bind,getBounds=utils.getBounds,parseBackgrounds=utils.parseBackgrounds,offsetBounds=utils.offsetBounds;NodeParser.prototype.calculateOverflowClips=function(){this.nodes.forEach(function(container){if(isElement(container)){isPseudoElement(container)&&container.appendToDOM(),container.borders=this.parseBorders(container);var clip="hidden"===container.css("overflow")?[container.borders.clip]:[],cssClip=container.parseClip();cssClip&&-1!==["absolute","fixed"].indexOf(container.css("position"))&&clip.push([["rect",container.bounds.left+cssClip.left,container.bounds.top+cssClip.top,cssClip.right-cssClip.left,cssClip.bottom-cssClip.top]]),container.clip=hasParentClip(container)?container.parent.clip.concat(clip):clip,container.backgroundClip="hidden"!==container.css("overflow")?container.clip.concat([container.borders.clip]):container.clip,isPseudoElement(container)&&container.cleanDOM()}else isTextNode(container)&&(container.clip=hasParentClip(container)?container.parent.clip:[]);isPseudoElement(container)||(container.bounds=null)},this)},NodeParser.prototype.asyncRenderer=function(queue,resolve,asyncTimer){asyncTimer=asyncTimer||Date.now(),this.paint(queue[this.renderIndex++]),queue.length===this.renderIndex?resolve():asyncTimer+20>Date.now()?this.asyncRenderer(queue,resolve,asyncTimer):setTimeout(bind(function(){this.asyncRenderer(queue,resolve)},this),0)},NodeParser.prototype.createPseudoHideStyles=function(document){this.createStyles(document,"."+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+':before { content: "" !important; display: none !important; }.'+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER+':after { content: "" !important; display: none !important; }')},NodeParser.prototype.disableAnimations=function(document){this.createStyles(document,"* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; -webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}")},NodeParser.prototype.createStyles=function(document,styles){var hidePseudoElements=document.createElement("style");hidePseudoElements.innerHTML=styles,document.body.appendChild(hidePseudoElements)},NodeParser.prototype.getPseudoElements=function(container){var nodes=[[container]];if(container.node.nodeType===Node.ELEMENT_NODE){var before=this.getPseudoElement(container,":before"),after=this.getPseudoElement(container,":after");before&&nodes.push(before),after&&nodes.push(after)}return flatten(nodes)},NodeParser.prototype.getPseudoElement=function(container,type){var style=container.computedStyle(type);if(!style||!style.content||"none"===style.content||"-moz-alt-content"===style.content||"none"===style.display)return null;for(var content=function(content){var first=content.substr(0,1);return first===content.substr(content.length-1)&&first.match(/'|"/)?content.substr(1,content.length-2):content}(style.content),isImage="url"===content.substr(0,3),pseudoNode=document.createElement(isImage?"img":"html2canvaspseudoelement"),pseudoContainer=new PseudoElementContainer(pseudoNode,container,type),i=style.length-1;i>=0;i--){var property=toCamelCase(style.item(i));pseudoNode.style[property]=style[property]}if(pseudoNode.className=PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE+" "+PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER,isImage)return pseudoNode.src=parseBackgrounds(content)[0].args[0],[pseudoContainer];var text=document.createTextNode(content);return pseudoNode.appendChild(text),[pseudoContainer,new TextContainer(text,pseudoContainer)]},NodeParser.prototype.getChildren=function(parentContainer){return flatten([].filter.call(parentContainer.node.childNodes,renderableNode).map(function(node){var container=[node.nodeType===Node.TEXT_NODE?new TextContainer(node,parentContainer):new NodeContainer(node,parentContainer)].filter(nonIgnoredElement);return node.nodeType===Node.ELEMENT_NODE&&container.length&&"TEXTAREA"!==node.tagName?container[0].isElementVisible()?container.concat(this.getChildren(container[0])):[]:container},this))},NodeParser.prototype.newStackingContext=function(container,hasOwnStacking){var stack=new StackingContext(hasOwnStacking,container.getOpacity(),container.node,container.parent);container.cloneTo(stack);(hasOwnStacking?stack.getParentStack(this):stack.parent.stack).contexts.push(stack),container.stack=stack},NodeParser.prototype.createStackingContexts=function(){this.nodes.forEach(function(container){isElement(container)&&(this.isRootElement(container)||function(container){return container.getOpacity()<1}(container)||function(container){var position=container.css("position");return"auto"!==(-1!==["absolute","relative","fixed"].indexOf(position)?container.css("zIndex"):"auto")}(container)||this.isBodyWithTransparentRoot(container)||container.hasTransform())?this.newStackingContext(container,!0):isElement(container)&&(isPositioned(container)&&zIndex0(container)||function(container){return-1!==["inline-block","inline-table"].indexOf(container.css("display"))}(container)||isFloating(container))?this.newStackingContext(container,!1):container.assignStack(container.parent.stack)},this)},NodeParser.prototype.isBodyWithTransparentRoot=function(container){return"BODY"===container.node.nodeName&&container.parent.color("backgroundColor").isTransparent()},NodeParser.prototype.isRootElement=function(container){return null===container.parent},NodeParser.prototype.sortStackingContexts=function(stack){stack.contexts.sort(function(contexts){return function(a,b){return a.cssInt("zIndex")+contexts.indexOf(a)/contexts.length-(b.cssInt("zIndex")+contexts.indexOf(b)/contexts.length)}}(stack.contexts.slice(0))),stack.contexts.forEach(this.sortStackingContexts,this)},NodeParser.prototype.parseTextBounds=function(container){return function(text,index,textList){if("none"!==container.parent.css("textDecoration").substr(0,4)||0!==text.trim().length){if(this.support.rangeBounds&&!container.parent.hasTransform()){var offset=textList.slice(0,index).join("").length;return this.getRangeBounds(container.node,offset,text.length)}if(container.node&&"string"==typeof container.node.data){var replacementNode=container.node.splitText(text.length),bounds=this.getWrapperBounds(container.node,container.parent.hasTransform());return container.node=replacementNode,bounds}}else this.support.rangeBounds&&!container.parent.hasTransform()||(container.node=container.node.splitText(text.length));return{}}},NodeParser.prototype.getWrapperBounds=function(node,transform){var wrapper=node.ownerDocument.createElement("html2canvaswrapper"),parent=node.parentNode,backupText=node.cloneNode(!0);wrapper.appendChild(node.cloneNode(!0)),parent.replaceChild(wrapper,node);var bounds=transform?offsetBounds(wrapper):getBounds(wrapper);return parent.replaceChild(backupText,wrapper),bounds},NodeParser.prototype.getRangeBounds=function(node,offset,length){var range=this.range||(this.range=node.ownerDocument.createRange());return range.setStart(node,offset),range.setEnd(node,offset+length),range.getBoundingClientRect()},NodeParser.prototype.parse=function(stack){var negativeZindex=stack.contexts.filter(negativeZIndex),descendantElements=stack.children.filter(isElement),descendantNonFloats=descendantElements.filter(not(isFloating)),nonInlineNonPositionedDescendants=descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)),nonPositionedFloats=descendantElements.filter(not(isPositioned)).filter(isFloating),inFlow=descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel),stackLevel0=stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0),text=stack.children.filter(isTextNode).filter(hasText),positiveZindex=stack.contexts.filter(positiveZIndex);negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats).concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container){this.renderQueue.push(container),isStackingContext(container)&&(this.parse(container),this.renderQueue.push(new ClearTransform))},this)},NodeParser.prototype.paint=function(container){try{container instanceof ClearTransform?this.renderer.ctx.restore():isTextNode(container)?(isPseudoElement(container.parent)&&container.parent.appendToDOM(),this.paintText(container),isPseudoElement(container.parent)&&container.parent.cleanDOM()):this.paintNode(container)}catch(e){if(log(e),this.options.strict)throw e}},NodeParser.prototype.paintNode=function(container){isStackingContext(container)&&(this.renderer.setOpacity(container.opacity),this.renderer.ctx.save(),container.hasTransform()&&this.renderer.setTransform(container.parseTransform())),"INPUT"===container.node.nodeName&&"checkbox"===container.node.type?this.paintCheckbox(container):"INPUT"===container.node.nodeName&&"radio"===container.node.type?this.paintRadio(container):this.paintElement(container)},NodeParser.prototype.paintElement=function(container){var bounds=container.parseBounds();this.renderer.clip(container.backgroundClip,function(){this.renderer.renderBackground(container,bounds,container.borders.borders.map(getWidth))},this),this.renderer.clip(container.clip,function(){this.renderer.renderBorders(container.borders.borders)},this),this.renderer.clip(container.backgroundClip,function(){switch(container.node.nodeName){case"svg":case"IFRAME":var imgContainer=this.images.get(container.node);imgContainer?this.renderer.renderImage(container,bounds,container.borders,imgContainer):log("Error loading <"+container.node.nodeName+">",container.node);break;case"IMG":var imageContainer=this.images.get(container.node.src);imageContainer?this.renderer.renderImage(container,bounds,container.borders,imageContainer):log("Error loading <img>",container.node.src);break;case"CANVAS":this.renderer.renderImage(container,bounds,container.borders,{image:container.node});break;case"SELECT":case"INPUT":case"TEXTAREA":this.paintFormValue(container)}},this)},NodeParser.prototype.paintCheckbox=function(container){var b=container.parseBounds(),size=Math.min(b.width,b.height),bounds={width:size-1,height:size-1,top:b.top,left:b.left},r=[3,3],radius=[r,r,r,r],borders=[1,1,1,1].map(function(w){return{color:new Color("#A5A5A5"),width:w}}),borderPoints=calculateCurvePoints(bounds,radius,borders);this.renderer.clip(container.backgroundClip,function(){this.renderer.rectangle(bounds.left+1,bounds.top+1,bounds.width-2,bounds.height-2,new Color("#DEDEDE")),this.renderer.renderBorders(calculateBorders(borders,bounds,borderPoints,radius)),container.node.checked&&(this.renderer.font(new Color("#424242"),"normal","normal","bold",size-3+"px","arial"),this.renderer.text("",bounds.left+size/6,bounds.top+size-1))},this)},NodeParser.prototype.paintRadio=function(container){var bounds=container.parseBounds(),size=Math.min(bounds.width,bounds.height)-2;this.renderer.clip(container.backgroundClip,function(){this.renderer.circleStroke(bounds.left+1,bounds.top+1,size,new Color("#DEDEDE"),1,new Color("#A5A5A5")),container.node.checked&&this.renderer.circle(Math.ceil(bounds.left+size/4)+1,Math.ceil(bounds.top+size/4)+1,Math.floor(size/2),new Color("#424242"))},this)},NodeParser.prototype.paintFormValue=function(container){var value=container.getValue();if(value.length>0){var document=container.node.ownerDocument,wrapper=document.createElement("html2canvaswrapper");["lineHeight","textAlign","fontFamily","fontWeight","fontSize","color","paddingLeft","paddingTop","paddingRight","paddingBottom","width","height","borderLeftStyle","borderTopStyle","borderLeftWidth","borderTopWidth","boxSizing","whiteSpace","wordWrap"].forEach(function(property){try{wrapper.style[property]=container.css(property)}catch(e){log("html2canvas: Parse: Exception caught in renderFormValue: "+e.message)}});var bounds=container.parseBounds();wrapper.style.position="fixed",wrapper.style.left=bounds.left+"px",wrapper.style.top=bounds.top+"px",wrapper.textContent=value,document.body.appendChild(wrapper),this.paintText(new TextContainer(wrapper.firstChild,container)),document.body.removeChild(wrapper)}},NodeParser.prototype.paintText=function(container){container.applyTextTransform();var characters=punycode.ucs2.decode(container.node.data),textList=this.options.letterRendering&&!function(container){return/^(normal|none|0px)$/.test(container.parent.css("letterSpacing"))}(container)||function(string){return/[^\u0000-\u00ff]/.test(string)}(container.node.data)?characters.map(function(character){return punycode.ucs2.encode([character])}):function(characters){for(var word,words=[],i=0,onWordBoundary=!1;characters.length;)(function(characterCode){return-1!==[32,13,10,9,45].indexOf(characterCode)})(characters[i])===onWordBoundary?((word=characters.splice(0,i)).length&&words.push(punycode.ucs2.encode(word)),onWordBoundary=!onWordBoundary,i=0):i++,i>=characters.length&&(word=characters.splice(0,i)).length&&words.push(punycode.ucs2.encode(word));return words}(characters),weight=container.parent.fontWeight(),size=container.parent.css("fontSize"),family=container.parent.css("fontFamily"),shadows=container.parent.parseTextShadows();this.renderer.font(container.parent.color("color"),container.parent.css("fontStyle"),container.parent.css("fontVariant"),weight,size,family),shadows.length?this.renderer.fontShadow(shadows[0].color,shadows[0].offsetX,shadows[0].offsetY,shadows[0].blur):this.renderer.clearShadow(),this.renderer.clip(container.parent.clip,function(){textList.map(this.parseTextBounds(container),this).forEach(function(bounds,index){bounds&&(this.renderer.text(textList[index],bounds.left,bounds.bottom),this.renderTextDecoration(container.parent,bounds,this.fontMetrics.getMetrics(family,size)))},this)},this)},NodeParser.prototype.renderTextDecoration=function(container,bounds,metrics){switch(container.css("textDecoration").split(" ")[0]){case"underline":this.renderer.rectangle(bounds.left,Math.round(bounds.top+metrics.baseline+metrics.lineWidth),bounds.width,1,container.color("color"));break;case"overline":this.renderer.rectangle(bounds.left,Math.round(bounds.top),bounds.width,1,container.color("color"));break;case"line-through":this.renderer.rectangle(bounds.left,Math.ceil(bounds.top+metrics.middle+metrics.lineWidth),bounds.width,1,container.color("color"))}};var borderColorTransforms={inset:[["darken",.6],["darken",.1],["darken",.1],["darken",.6]]};NodeParser.prototype.parseBorders=function(container){var nodeBounds=container.parseBounds(),radius=function(container){return["TopLeft","TopRight","BottomRight","BottomLeft"].map(function(side){var arr=container.css("border"+side+"Radius").split(" ");return arr.length<=1&&(arr[1]=arr[0]),arr.map(asInt)})}(container),borders=["Top","Right","Bottom","Left"].map(function(side,index){var style=container.css("border"+side+"Style"),color=container.color("border"+side+"Color");"inset"===style&&color.isBlack()&&(color=new Color([255,255,255,color.a]));var colorTransform=borderColorTransforms[style]?borderColorTransforms[style][index]:null;return{width:container.cssInt("border"+side+"Width"),color:colorTransform?color[colorTransform[0]](colorTransform[1]):color,args:null}}),borderPoints=calculateCurvePoints(nodeBounds,radius,borders);return{clip:this.parseBackgroundClip(container,borderPoints,borders,radius,nodeBounds),borders:calculateBorders(borders,nodeBounds,borderPoints,radius)}},NodeParser.prototype.parseBackgroundClip=function(container,borderPoints,borders,radius,bounds){var borderArgs=[];switch(container.css("backgroundClip")){case"content-box":case"padding-box":parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftInner,borderPoints.topRightInner,bounds.left+borders[3].width,bounds.top+borders[0].width),parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightInner,borderPoints.bottomRightInner,bounds.left+bounds.width-borders[1].width,bounds.top+borders[0].width),parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightInner,borderPoints.bottomLeftInner,bounds.left+bounds.width-borders[1].width,bounds.top+bounds.height-borders[2].width),parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftInner,borderPoints.topLeftInner,bounds.left+borders[3].width,bounds.top+bounds.height-borders[2].width);break;default:parseCorner(borderArgs,radius[0],radius[1],borderPoints.topLeftOuter,borderPoints.topRightOuter,bounds.left,bounds.top),parseCorner(borderArgs,radius[1],radius[2],borderPoints.topRightOuter,borderPoints.bottomRightOuter,bounds.left+bounds.width,bounds.top),parseCorner(borderArgs,radius[2],radius[3],borderPoints.bottomRightOuter,borderPoints.bottomLeftOuter,bounds.left+bounds.width,bounds.top+bounds.height),parseCorner(borderArgs,radius[3],radius[0],borderPoints.bottomLeftOuter,borderPoints.topLeftOuter,bounds.left,bounds.top+bounds.height)}return borderArgs},module.exports=NodeParser},{"./color":3,"./fontmetrics":7,"./log":13,"./nodecontainer":14,"./pseudoelementcontainer":18,"./stackingcontext":21,"./textcontainer":25,"./utils":26,punycode:1}],16:[function(_dereq_,module,exports){function Proxy(src,proxyUrl,document){var supportsCORS="withCredentials"in new XMLHttpRequest;if(!proxyUrl)return Promise.reject("No proxy configured");var callback=createCallback(supportsCORS),url=createProxyUrl(proxyUrl,src,callback);return supportsCORS?XHR(url):jsonp(document,url,callback).then(function(response){return decode64(response.content)})}function jsonp(document,url,callback){return new Promise(function(resolve,reject){var s=document.createElement("script"),cleanup=function(){delete window.html2canvas.proxy[callback],document.body.removeChild(s)};window.html2canvas.proxy[callback]=function(response){cleanup(),resolve(response)},s.src=url,s.onerror=function(e){cleanup(),reject(e)},document.body.appendChild(s)})}function createCallback(useCORS){return useCORS?"":"html2canvas_"+Date.now()+"_"+ ++proxyCount+"_"+Math.round(1e5*Math.random())}function createProxyUrl(proxyUrl,src,callback){return proxyUrl+"?url="+encodeURIComponent(src)+(callback.length?"&callback=html2canvas.proxy."+callback:"")}function documentFromHTML(src){return function(html){var doc,parser=new DOMParser;try{doc=parser.parseFromString(html,"text/html")}catch(e){log("DOMParser not supported, falling back to createHTMLDocument"),doc=document.implementation.createHTMLDocument("");try{doc.open(),doc.write(html),doc.close()}catch(ee){log("createHTMLDocument write not supported, falling back to document.body.innerHTML"),doc.body.innerHTML=html}}var b=doc.querySelector("base");if(!b||!b.href.host){var base=doc.createElement("base");base.href=src,doc.head.insertBefore(base,doc.head.firstChild)}return doc}}var XHR=_dereq_("./xhr"),utils=_dereq_("./utils"),log=_dereq_("./log"),createWindowClone=_dereq_("./clone"),decode64=utils.decode64,proxyCount=0;exports.Proxy=Proxy,exports.ProxyURL=function(src,proxyUrl,document){var supportsCORSImage="crossOrigin"in new Image,callback=createCallback(supportsCORSImage),url=createProxyUrl(proxyUrl,src,callback);return supportsCORSImage?Promise.resolve(url):jsonp(document,url,callback).then(function(response){return"data:"+response.type+";base64,"+response.content})},exports.loadUrlDocument=function(src,proxy,document,width,height,options){return new Proxy(src,proxy,window.document).then(documentFromHTML(src)).then(function(doc){return createWindowClone(doc,document,width,height,options,0,0)})}},{"./clone":2,"./log":13,"./utils":26,"./xhr":28}],17:[function(_dereq_,module,exports){var ProxyURL=_dereq_("./proxy").ProxyURL;module.exports=function(src,proxy){var link=document.createElement("a");link.href=src,src=link.href,this.src=src,this.image=new Image;var self=this;this.promise=new Promise(function(resolve,reject){self.image.crossOrigin="Anonymous",self.image.onload=resolve,self.image.onerror=reject,new ProxyURL(src,proxy,document).then(function(url){self.image.src=url}).catch(reject)})}},{"./proxy":16}],18:[function(_dereq_,module,exports){function PseudoElementContainer(node,parent,type){NodeContainer.call(this,node,parent),this.isPseudoElement=!0,this.before=":before"===type}var NodeContainer=_dereq_("./nodecontainer");PseudoElementContainer.prototype.cloneTo=function(stack){PseudoElementContainer.prototype.cloneTo.call(this,stack),stack.isPseudoElement=!0,stack.before=this.before},(PseudoElementContainer.prototype=Object.create(NodeContainer.prototype)).appendToDOM=function(){this.before?this.parent.node.insertBefore(this.node,this.parent.node.firstChild):this.parent.node.appendChild(this.node),this.parent.node.className+=" "+this.getHideClass()},PseudoElementContainer.prototype.cleanDOM=function(){this.node.parentNode.removeChild(this.node),this.parent.node.className=this.parent.node.className.replace(this.getHideClass(),"")},PseudoElementContainer.prototype.getHideClass=function(){return this["PSEUDO_HIDE_ELEMENT_CLASS_"+(this.before?"BEFORE":"AFTER")]},PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE="___html2canvas___pseudoelement_before",PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER="___html2canvas___pseudoelement_after",module.exports=PseudoElementContainer},{"./nodecontainer":14}],19:[function(_dereq_,module,exports){function Renderer(width,height,images,options,document){this.width=width,this.height=height,this.images=images,this.options=options,this.document=document}var log=_dereq_("./log");Renderer.prototype.renderImage=function(container,bounds,borderData,imageContainer){var paddingLeft=container.cssInt("paddingLeft"),paddingTop=container.cssInt("paddingTop"),paddingRight=container.cssInt("paddingRight"),paddingBottom=container.cssInt("paddingBottom"),borders=borderData.borders,width=bounds.width-(borders[1].width+borders[3].width+paddingLeft+paddingRight),height=bounds.height-(borders[0].width+borders[2].width+paddingTop+paddingBottom);this.drawImage(imageContainer,0,0,imageContainer.image.width||width,imageContainer.image.height||height,bounds.left+paddingLeft+borders[3].width,bounds.top+paddingTop+borders[0].width,width,height)},Renderer.prototype.renderBackground=function(container,bounds,borderData){bounds.height>0&&bounds.width>0&&(this.renderBackgroundColor(container,bounds),this.renderBackgroundImage(container,bounds,borderData))},Renderer.prototype.renderBackgroundColor=function(container,bounds){var color=container.color("backgroundColor");color.isTransparent()||this.rectangle(bounds.left,bounds.top,bounds.width,bounds.height,color)},Renderer.prototype.renderBorders=function(borders){borders.forEach(this.renderBorder,this)},Renderer.prototype.renderBorder=function(data){data.color.isTransparent()||null===data.args||this.drawShape(data.args,data.color)},Renderer.prototype.renderBackgroundImage=function(container,bounds,borderData){container.parseBackgroundImages().reverse().forEach(function(backgroundImage,index,arr){switch(backgroundImage.method){case"url":var image=this.images.get(backgroundImage.args[0]);image?this.renderBackgroundRepeating(container,bounds,image,arr.length-(index+1),borderData):log("Error loading background-image",backgroundImage.args[0]);break;case"linear-gradient":case"gradient":var gradientImage=this.images.get(backgroundImage.value);gradientImage?this.renderBackgroundGradient(gradientImage,bounds,borderData):log("Error loading background-image",backgroundImage.args[0]);break;case"none":break;default:log("Unknown background-image type",backgroundImage.args[0])}},this)},Renderer.prototype.renderBackgroundRepeating=function(container,bounds,imageContainer,index,borderData){var size=container.parseBackgroundSize(bounds,imageContainer.image,index),position=container.parseBackgroundPosition(bounds,imageContainer.image,index,size);switch(container.parseBackgroundRepeat(index)){case"repeat-x":case"repeat no-repeat":this.backgroundRepeatShape(imageContainer,position,size,bounds,bounds.left+borderData[3],bounds.top+position.top+borderData[0],99999,size.height,borderData);break;case"repeat-y":case"no-repeat repeat":this.backgroundRepeatShape(imageContainer,position,size,bounds,bounds.left+position.left+borderData[3],bounds.top+borderData[0],size.width,99999,borderData);break;case"no-repeat":this.backgroundRepeatShape(imageContainer,position,size,bounds,bounds.left+position.left+borderData[3],bounds.top+position.top+borderData[0],size.width,size.height,borderData);break;default:this.renderBackgroundRepeat(imageContainer,position,size,{top:bounds.top,left:bounds.left},borderData[3],borderData[0])}},module.exports=Renderer},{"./log":13}],20:[function(_dereq_,module,exports){function CanvasRenderer(width,height){Renderer.apply(this,arguments),this.canvas=this.options.canvas||this.document.createElement("canvas"),this.options.canvas||(this.canvas.width=width,this.canvas.height=height),this.ctx=this.canvas.getContext("2d"),this.taintCtx=this.document.createElement("canvas").getContext("2d"),this.ctx.textBaseline="bottom",this.variables={},log("Initialized CanvasRenderer with size",width,"x",height)}function hasEntries(array){return array.length>0}var Renderer=_dereq_("../renderer"),LinearGradientContainer=_dereq_("../lineargradientcontainer"),log=_dereq_("../log");(CanvasRenderer.prototype=Object.create(Renderer.prototype)).setFillStyle=function(fillStyle){return this.ctx.fillStyle="object"==typeof fillStyle&&fillStyle.isColor?fillStyle.toString():fillStyle,this.ctx},CanvasRenderer.prototype.rectangle=function(left,top,width,height,color){this.setFillStyle(color).fillRect(left,top,width,height)},CanvasRenderer.prototype.circle=function(left,top,size,color){this.setFillStyle(color),this.ctx.beginPath(),this.ctx.arc(left+size/2,top+size/2,size/2,0,2*Math.PI,!0),this.ctx.closePath(),this.ctx.fill()},CanvasRenderer.prototype.circleStroke=function(left,top,size,color,stroke,strokeColor){this.circle(left,top,size,color),this.ctx.strokeStyle=strokeColor.toString(),this.ctx.stroke()},CanvasRenderer.prototype.drawShape=function(shape,color){this.shape(shape),this.setFillStyle(color).fill()},CanvasRenderer.prototype.taints=function(imageContainer){if(null===imageContainer.tainted){this.taintCtx.drawImage(imageContainer.image,0,0);try{this.taintCtx.getImageData(0,0,1,1),imageContainer.tainted=!1}catch(e){this.taintCtx=document.createElement("canvas").getContext("2d"),imageContainer.tainted=!0}}return imageContainer.tainted},CanvasRenderer.prototype.drawImage=function(imageContainer,sx,sy,sw,sh,dx,dy,dw,dh){this.taints(imageContainer)&&!this.options.allowTaint||this.ctx.drawImage(imageContainer.image,sx,sy,sw,sh,dx,dy,dw,dh)},CanvasRenderer.prototype.clip=function(shapes,callback,context){this.ctx.save(),shapes.filter(hasEntries).forEach(function(shape){this.shape(shape).clip()},this),callback.call(context),this.ctx.restore()},CanvasRenderer.prototype.shape=function(shape){return this.ctx.beginPath(),shape.forEach(function(point,index){"rect"===point[0]?this.ctx.rect.apply(this.ctx,point.slice(1)):this.ctx[0===index?"moveTo":point[0]+"To"].apply(this.ctx,point.slice(1))},this),this.ctx.closePath(),this.ctx},CanvasRenderer.prototype.font=function(color,style,variant,weight,size,family){this.setFillStyle(color).font=[style,variant,weight,size,family].join(" ").split(",")[0]},CanvasRenderer.prototype.fontShadow=function(color,offsetX,offsetY,blur){this.setVariable("shadowColor",color.toString()).setVariable("shadowOffsetY",offsetX).setVariable("shadowOffsetX",offsetY).setVariable("shadowBlur",blur)},CanvasRenderer.prototype.clearShadow=function(){this.setVariable("shadowColor","rgba(0,0,0,0)")},CanvasRenderer.prototype.setOpacity=function(opacity){this.ctx.globalAlpha=opacity},CanvasRenderer.prototype.setTransform=function(transform){this.ctx.translate(transform.origin[0],transform.origin[1]),this.ctx.transform.apply(this.ctx,transform.matrix),this.ctx.translate(-transform.origin[0],-transform.origin[1])},CanvasRenderer.prototype.setVariable=function(property,value){return this.variables[property]!==value&&(this.variables[property]=this.ctx[property]=value),this},CanvasRenderer.prototype.text=function(text,left,bottom){this.ctx.fillText(text,left,bottom)},CanvasRenderer.prototype.backgroundRepeatShape=function(imageContainer,backgroundPosition,size,bounds,left,top,width,height,borderData){var shape=[["line",Math.round(left),Math.round(top)],["line",Math.round(left+width),Math.round(top)],["line",Math.round(left+width),Math.round(height+top)],["line",Math.round(left),Math.round(height+top)]];this.clip([shape],function(){this.renderBackgroundRepeat(imageContainer,backgroundPosition,size,bounds,borderData[3],borderData[0])},this)},CanvasRenderer.prototype.renderBackgroundRepeat=function(imageContainer,backgroundPosition,size,bounds,borderLeft,borderTop){var offsetX=Math.round(bounds.left+backgroundPosition.left+borderLeft),offsetY=Math.round(bounds.top+backgroundPosition.top+borderTop);this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer,size),"repeat")),this.ctx.translate(offsetX,offsetY),this.ctx.fill(),this.ctx.translate(-offsetX,-offsetY)},CanvasRenderer.prototype.renderBackgroundGradient=function(gradientImage,bounds){if(gradientImage instanceof LinearGradientContainer){var gradient=this.ctx.createLinearGradient(bounds.left+bounds.width*gradientImage.x0,bounds.top+bounds.height*gradientImage.y0,bounds.left+bounds.width*gradientImage.x1,bounds.top+bounds.height*gradientImage.y1);gradientImage.colorStops.forEach(function(colorStop){gradient.addColorStop(colorStop.stop,colorStop.color.toString())}),this.rectangle(bounds.left,bounds.top,bounds.width,bounds.height,gradient)}},CanvasRenderer.prototype.resizeImage=function(imageContainer,size){var image=imageContainer.image;if(image.width===size.width&&image.height===size.height)return image;var canvas=document.createElement("canvas");return canvas.width=size.width,canvas.height=size.height,canvas.getContext("2d").drawImage(image,0,0,image.width,image.height,0,0,size.width,size.height),canvas},module.exports=CanvasRenderer},{"../lineargradientcontainer":12,"../log":13,"../renderer":19}],21:[function(_dereq_,module,exports){function StackingContext(hasOwnStacking,opacity,element,parent){NodeContainer.call(this,element,parent),this.ownStacking=hasOwnStacking,this.contexts=[],this.children=[],this.opacity=(this.parent?this.parent.stack.opacity:1)*opacity}var NodeContainer=_dereq_("./nodecontainer");(StackingContext.prototype=Object.create(NodeContainer.prototype)).getParentStack=function(context){var parentStack=this.parent?this.parent.stack:null;return parentStack?parentStack.ownStacking?parentStack:parentStack.getParentStack(context):context.stack},module.exports=StackingContext},{"./nodecontainer":14}],22:[function(_dereq_,module,exports){function Support(document){this.rangeBounds=this.testRangeBounds(document),this.cors=this.testCORS(),this.svg=this.testSVG()}Support.prototype.testRangeBounds=function(document){var range,testElement,support=!1;return document.createRange&&(range=document.createRange()).getBoundingClientRect&&((testElement=document.createElement("boundtest")).style.height="123px",testElement.style.display="block",document.body.appendChild(testElement),range.selectNode(testElement),123===range.getBoundingClientRect().height&&(support=!0),document.body.removeChild(testElement)),support},Support.prototype.testCORS=function(){return void 0!==(new Image).crossOrigin},Support.prototype.testSVG=function(){var img=new Image,canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");img.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{ctx.drawImage(img,0,0),canvas.toDataURL()}catch(e){return!1}return!0},module.exports=Support},{}],23:[function(_dereq_,module,exports){function SVGContainer(src){this.src=src,this.image=null;var self=this;this.promise=this.hasFabric().then(function(){return self.isInline(src)?Promise.resolve(self.inlineFormatting(src)):XHR(src)}).then(function(svg){return new Promise(function(resolve){window.html2canvas.svg.fabric.loadSVGFromString(svg,self.createCanvas.call(self,resolve))})})}var XHR=_dereq_("./xhr"),decode64=_dereq_("./utils").decode64;SVGContainer.prototype.hasFabric=function(){return window.html2canvas.svg&&window.html2canvas.svg.fabric?Promise.resolve():Promise.reject(new Error("html2canvas.svg.js is not loaded, cannot render svg"))},SVGContainer.prototype.inlineFormatting=function(src){return/^data:image\/svg\+xml;base64,/.test(src)?this.decode64(this.removeContentType(src)):this.removeContentType(src)},SVGContainer.prototype.removeContentType=function(src){return src.replace(/^data:image\/svg\+xml(;base64)?,/,"")},SVGContainer.prototype.isInline=function(src){return/^data:image\/svg\+xml/i.test(src)},SVGContainer.prototype.createCanvas=function(resolve){var self=this;return function(objects,options){var canvas=new window.html2canvas.svg.fabric.StaticCanvas("c");self.image=canvas.lowerCanvasEl,canvas.setWidth(options.width).setHeight(options.height).add(window.html2canvas.svg.fabric.util.groupSVGElements(objects,options)).renderAll(),resolve(canvas.lowerCanvasEl)}},SVGContainer.prototype.decode64=function(str){return"function"==typeof window.atob?window.atob(str):decode64(str)},module.exports=SVGContainer},{"./utils":26,"./xhr":28}],24:[function(_dereq_,module,exports){function SVGNodeContainer(node,_native){this.src=node,this.image=null;var self=this;this.promise=_native?new Promise(function(resolve,reject){self.image=new Image,self.image.onload=resolve,self.image.onerror=reject,self.image.src="data:image/svg+xml,"+(new XMLSerializer).serializeToString(node),!0===self.image.complete&&resolve(self.image)}):this.hasFabric().then(function(){return new Promise(function(resolve){window.html2canvas.svg.fabric.parseSVGDocument(node,self.createCanvas.call(self,resolve))})})}var SVGContainer=_dereq_("./svgcontainer");SVGNodeContainer.prototype=Object.create(SVGContainer.prototype),module.exports=SVGNodeContainer},{"./svgcontainer":23}],25:[function(_dereq_,module,exports){function TextContainer(node,parent){NodeContainer.call(this,node,parent)}function capitalize(m,p1,p2){if(m.length>0)return p1+p2.toUpperCase()}var NodeContainer=_dereq_("./nodecontainer");(TextContainer.prototype=Object.create(NodeContainer.prototype)).applyTextTransform=function(){this.node.data=this.transform(this.parent.css("textTransform"))},TextContainer.prototype.transform=function(transform){var text=this.node.data;switch(transform){case"lowercase":return text.toLowerCase();case"capitalize":return text.replace(/(^|\s|:|-|\(|\))([a-z])/g,capitalize);case"uppercase":return text.toUpperCase();default:return text}},module.exports=TextContainer},{"./nodecontainer":14}],26:[function(_dereq_,module,exports){exports.smallImage=function(){return"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},exports.bind=function(callback,context){return function(){return callback.apply(context,arguments)}},exports.decode64=function(base64){var i,encoded2,encoded3,encoded4,byte1,byte2,byte3,chars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",len=base64.length,output="";for(i=0;i<len;i+=4)byte1=chars.indexOf(base64[i])<<2|(encoded2=chars.indexOf(base64[i+1]))>>4,byte2=(15&encoded2)<<4|(encoded3=chars.indexOf(base64[i+2]))>>2,byte3=(3&encoded3)<<6|(encoded4=chars.indexOf(base64[i+3])),output+=64===encoded3?String.fromCharCode(byte1):64===encoded4||-1===encoded4?String.fromCharCode(byte1,byte2):String.fromCharCode(byte1,byte2,byte3);return output},exports.getBounds=function(node){if(node.getBoundingClientRect){var clientRect=node.getBoundingClientRect(),width=null==node.offsetWidth?clientRect.width:node.offsetWidth;return{top:clientRect.top,bottom:clientRect.bottom||clientRect.top+clientRect.height,right:clientRect.left+width,left:clientRect.left,width:width,height:null==node.offsetHeight?clientRect.height:node.offsetHeight}}return{}},exports.offsetBounds=function(node){var parent=node.offsetParent?exports.offsetBounds(node.offsetParent):{top:0,left:0};return{top:node.offsetTop+parent.top,bottom:node.offsetTop+node.offsetHeight+parent.top,right:node.offsetLeft+parent.left+node.offsetWidth,left:node.offsetLeft+parent.left,width:node.offsetWidth,height:node.offsetHeight}},exports.parseBackgrounds=function(backgroundImage){var method,definition,prefix,prefix_i,block,quote,args,results=[],mode=0,numParen=0,appendResult=function(){method&&('"'===definition.substr(0,1)&&(definition=definition.substr(1,definition.length-2)),definition&&args.push(definition),"-"===method.substr(0,1)&&(prefix_i=method.indexOf("-",1)+1)>0&&(prefix=method.substr(0,prefix_i),method=method.substr(prefix_i)),results.push({prefix:prefix,method:method.toLowerCase(),value:block,args:args,image:null})),args=[],method=prefix=definition=block=""};return args=[],method=prefix=definition=block="",backgroundImage.split("").forEach(function(c){if(!(0===mode&&" \r\n\t".indexOf(c)>-1)){switch(c){case'"':quote?quote===c&&(quote=null):quote=c;break;case"(":if(quote)break;if(0===mode)return mode=1,void(block+=c);numParen++;break;case")":if(quote)break;if(1===mode){if(0===numParen)return mode=0,block+=c,void appendResult();numParen--}break;case",":if(quote)break;if(0===mode)return void appendResult();if(1===mode&&0===numParen&&!method.match(/^url$/i))return args.push(definition),definition="",void(block+=c)}block+=c,0===mode?method+=c:definition+=c}}),appendResult(),results}},{}],27:[function(_dereq_,module,exports){function WebkitGradientContainer(imageData){GradientContainer.apply(this,arguments),this.type="linear"===imageData.args[0]?GradientContainer.TYPES.LINEAR:GradientContainer.TYPES.RADIAL}var GradientContainer=_dereq_("./gradientcontainer");WebkitGradientContainer.prototype=Object.create(GradientContainer.prototype),module.exports=WebkitGradientContainer},{"./gradientcontainer":9}],28:[function(_dereq_,module,exports){module.exports=function(url){return new Promise(function(resolve,reject){var xhr=new XMLHttpRequest;xhr.open("GET",url),xhr.onload=function(){200===xhr.status?resolve(xhr.responseText):reject(new Error(xhr.statusText))},xhr.onerror=function(){reject(new Error("Network Error"))},xhr.send()})}},{}]},{},[4])(4)}),function(global){var PNG;PNG=function(){function PNG(data){var chunkSize,colors,palLen,delayDen,delayNum,frame,index,key,section,palShort,text,_i,_j,_ref;for(this.data=data,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},frame=null;;){switch(chunkSize=this.readUInt32(),section=function(){var _i,_results;for(_results=[],_i=0;_i<4;++_i)_results.push(String.fromCharCode(this.data[this.pos++]));return _results}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(chunkSize);break;case"fcTL":frame&&this.animation.frames.push(frame),this.pos+=4,frame={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},delayNum=this.readUInt16(),delayDen=this.readUInt16()||100,frame.delay=1e3*delayNum/delayDen,frame.disposeOp=this.data[this.pos++],frame.blendOp=this.data[this.pos++],frame.data=[];break;case"IDAT":case"fdAT":for("fdAT"===section&&(this.pos+=4,chunkSize-=4),data=(null!=frame?frame.data:void 0)||this.imgData,_i=0;0<=chunkSize?_i<chunkSize:_i>chunkSize;0<=chunkSize?++_i:--_i)data.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(palLen=this.palette.length/3,this.transparency.indexed=this.read(chunkSize),this.transparency.indexed.length>palLen)throw new Error("More transparent colors than palette size");if((palShort=palLen-this.transparency.indexed.length)>0)for(_j=0;0<=palShort?_j<palShort:_j>palShort;0<=palShort?++_j:--_j)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(chunkSize)[0];break;case 2:this.transparency.rgb=this.read(chunkSize)}break;case"tEXt":index=(text=this.read(chunkSize)).indexOf(0),key=String.fromCharCode.apply(String,text.slice(0,index)),this.text[key]=String.fromCharCode.apply(String,text.slice(index+1));break;case"IEND":return frame&&this.animation.frames.push(frame),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(_ref=this.colorType)||6===_ref,colors=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*colors,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=chunkSize}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}var makeImage,scratchCanvas,scratchCtx;PNG.load=function(url,canvas,callback){var xhr;return"function"==typeof canvas&&(callback=canvas),(xhr=new XMLHttpRequest).open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=function(){var data,png;return data=new Uint8Array(xhr.response||xhr.mozResponseArrayBuffer),png=new PNG(data),"function"==typeof(null!=canvas?canvas.getContext:void 0)&&png.render(canvas),"function"==typeof callback?callback(png):void 0},xhr.send(null)},PNG.prototype.read=function(bytes){var _i,_results;for(_results=[],_i=0;0<=bytes?_i<bytes:_i>bytes;0<=bytes?++_i:--_i)_results.push(this.data[this.pos++]);return _results},PNG.prototype.readUInt32=function(){var b1,b2,b3,b4;return b1=this.data[this.pos++]<<24,b2=this.data[this.pos++]<<16,b3=this.data[this.pos++]<<8,b4=this.data[this.pos++],b1|b2|b3|b4},PNG.prototype.readUInt16=function(){var b1,b2;return b1=this.data[this.pos++]<<8,b2=this.data[this.pos++],b1|b2},PNG.prototype.decodePixels=function(data){var abyte,c,col,i,left,length,p,pa,paeth,pb,pc,pixelBytes,pixels,pos,row,scanlineLength,upper,upperLeft,_i,_j,_k,_l,_m;if(null==data&&(data=this.imgData),0===data.length)return new Uint8Array(0);for(data=(data=new FlateStream(data)).getBytes(),scanlineLength=(pixelBytes=this.pixelBitlength/8)*this.width,pixels=new Uint8Array(scanlineLength*this.height),length=data.length,row=0,pos=0,c=0;pos<length;){switch(data[pos++]){case 0:for(i=_i=0;_i<scanlineLength;i=_i+=1)pixels[c++]=data[pos++];break;case 1:for(i=_j=0;_j<scanlineLength;i=_j+=1)abyte=data[pos++],left=i<pixelBytes?0:pixels[c-pixelBytes],pixels[c++]=(abyte+left)%256;break;case 2:for(i=_k=0;_k<scanlineLength;i=_k+=1)abyte=data[pos++],col=(i-i%pixelBytes)/pixelBytes,upper=row&&pixels[(row-1)*scanlineLength+col*pixelBytes+i%pixelBytes],pixels[c++]=(upper+abyte)%256;break;case 3:for(i=_l=0;_l<scanlineLength;i=_l+=1)abyte=data[pos++],col=(i-i%pixelBytes)/pixelBytes,left=i<pixelBytes?0:pixels[c-pixelBytes],upper=row&&pixels[(row-1)*scanlineLength+col*pixelBytes+i%pixelBytes],pixels[c++]=(abyte+Math.floor((left+upper)/2))%256;break;case 4:for(i=_m=0;_m<scanlineLength;i=_m+=1)abyte=data[pos++],col=(i-i%pixelBytes)/pixelBytes,left=i<pixelBytes?0:pixels[c-pixelBytes],0===row?upper=upperLeft=0:(upper=pixels[(row-1)*scanlineLength+col*pixelBytes+i%pixelBytes],upperLeft=col&&pixels[(row-1)*scanlineLength+(col-1)*pixelBytes+i%pixelBytes]),p=left+upper-upperLeft,pa=Math.abs(p-left),pb=Math.abs(p-upper),pc=Math.abs(p-upperLeft),paeth=pa<=pb&&pa<=pc?left:pb<=pc?upper:upperLeft,pixels[c++]=(abyte+paeth)%256;break;default:throw new Error("Invalid filter algorithm: "+data[pos-1])}row++}return pixels},PNG.prototype.decodePalette=function(){var c,i,palette,pos,ret,transparency,_i,_ref,_ref1;for(palette=this.palette,transparency=this.transparency.indexed||[],ret=new Uint8Array((transparency.length||0)+palette.length),pos=0,c=0,i=_i=0,_ref=palette.length;_i<_ref;i=_i+=3)ret[pos++]=palette[i],ret[pos++]=palette[i+1],ret[pos++]=palette[i+2],ret[pos++]=null!=(_ref1=transparency[c++])?_ref1:255;return ret},PNG.prototype.copyToImageData=function(imageData,pixels){var alpha,colors,data,i,input,j,k,length,palette,v,_ref;if(colors=this.colors,palette=null,alpha=this.hasAlphaChannel,this.palette.length&&(palette=null!=(_ref=this._decodedPalette)?_ref:this._decodedPalette=this.decodePalette(),colors=4,alpha=!0),data=imageData.data||imageData,length=data.length,input=palette||pixels,i=j=0,1===colors)for(;i<length;)k=palette?4*pixels[i/4]:j,v=input[k++],data[i++]=v,data[i++]=v,data[i++]=v,data[i++]=alpha?input[k++]:255,j=k;else for(;i<length;)k=palette?4*pixels[i/4]:j,data[i++]=input[k++],data[i++]=input[k++],data[i++]=input[k++],data[i++]=alpha?input[k++]:255,j=k},PNG.prototype.decode=function(){var ret;return ret=new Uint8Array(this.width*this.height*4),this.copyToImageData(ret,this.decodePixels()),ret};try{scratchCanvas=global.document.createElement("canvas"),scratchCtx=scratchCanvas.getContext("2d")}catch(e){return-1}return makeImage=function(imageData){var img;return scratchCtx.width=imageData.width,scratchCtx.height=imageData.height,scratchCtx.clearRect(0,0,imageData.width,imageData.height),scratchCtx.putImageData(imageData,0,0),img=new Image,img.src=scratchCanvas.toDataURL(),img},PNG.prototype.decodeFrames=function(ctx){var frame,i,imageData,pixels,_i,_len,_ref,_results;if(this.animation){for(_results=[],i=_i=0,_len=(_ref=this.animation.frames).length;_i<_len;i=++_i)frame=_ref[i],imageData=ctx.createImageData(frame.width,frame.height),pixels=this.decodePixels(new Uint8Array(frame.data)),this.copyToImageData(imageData,pixels),frame.imageData=imageData,_results.push(frame.image=makeImage(imageData));return _results}},PNG.prototype.renderFrame=function(ctx,number){var frame,frames,prev;return frames=this.animation.frames,frame=frames[number],prev=frames[number-1],0===number&&ctx.clearRect(0,0,this.width,this.height),1===(null!=prev?prev.disposeOp:void 0)?ctx.clearRect(prev.xOffset,prev.yOffset,prev.width,prev.height):2===(null!=prev?prev.disposeOp:void 0)&&ctx.putImageData(prev.imageData,prev.xOffset,prev.yOffset),0===frame.blendOp&&ctx.clearRect(frame.xOffset,frame.yOffset,frame.width,frame.height),ctx.drawImage(frame.image,frame.xOffset,frame.yOffset)},PNG.prototype.animate=function(ctx){var doFrame,frameNumber,frames,numFrames,numPlays,_ref,_this=this;return frameNumber=0,_ref=this.animation,numFrames=_ref.numFrames,frames=_ref.frames,numPlays=_ref.numPlays,(doFrame=function(){var f,frame;if(f=frameNumber++%numFrames,frame=frames[f],_this.renderFrame(ctx,f),numFrames>1&&frameNumber/numFrames<numPlays)return _this.animation._timeout=setTimeout(doFrame,frame.delay)})()},PNG.prototype.stopAnimation=function(){var _ref;return clearTimeout(null!=(_ref=this.animation)?_ref._timeout:void 0)},PNG.prototype.render=function(canvas){var ctx,data;return canvas._png&&canvas._png.stopAnimation(),canvas._png=this,canvas.width=this.width,canvas.height=this.height,ctx=canvas.getContext("2d"),this.animation?(this.decodeFrames(ctx),this.animate(ctx)):(data=ctx.createImageData(this.width,this.height),this.copyToImageData(data,this.decodePixels()),ctx.putImageData(data,0,0))},PNG}(),global.PNG=PNG}("undefined"!=typeof window&&window||void 0);var DecodeStream=function(){function constructor(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return constructor.prototype={ensureBuffer:function(requested){var buffer=this.buffer,current=buffer?buffer.byteLength:0;if(requested<current)return buffer;for(var size=512;size<requested;)size<<=1;for(var buffer2=new Uint8Array(size),i=0;i<current;++i)buffer2[i]=buffer[i];return this.buffer=buffer2},getByte:function(){for(var pos=this.pos;this.bufferLength<=pos;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(length){var pos=this.pos;if(length){this.ensureBuffer(pos+length);for(var end=pos+length;!this.eof&&this.bufferLength<end;)this.readBlock();var bufEnd=this.bufferLength;end>bufEnd&&(end=bufEnd)}else{for(;!this.eof;)this.readBlock();end=this.bufferLength}return this.pos=end,this.buffer.subarray(pos,end)},lookChar:function(){for(var pos=this.pos;this.bufferLength<=pos;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var pos=this.pos;this.bufferLength<=pos;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(start,length,dict){for(var end=start+length;this.bufferLength<=end&&!this.eof;)this.readBlock();return new Stream(this.buffer,start,length,dict)},skip:function(n){n||(n=1),this.pos+=n},reset:function(){this.pos=0}},constructor}(),FlateStream=function(){function error(e){throw new Error(e)}function constructor(bytes){var bytesPos=0,cmf=bytes[bytesPos++],flg=bytes[bytesPos++];-1!=cmf&&-1!=flg||error("Invalid header in flate stream"),8!=(15&cmf)&&error("Unknown compression method in flate stream"),((cmf<<8)+flg)%31!=0&&error("Bad FCHECK in flate stream"),32&flg&&error("FDICT bit set in flate stream"),this.bytes=bytes,this.bytesPos=bytesPos,this.codeSize=0,this.codeBuf=0,DecodeStream.call(this)}if("undefined"!=typeof Uint32Array){var codeLenCodeMap=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lengthDecode=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),distDecode=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),fixedLitCodeTab=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],fixedDistCodeTab=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];return constructor.prototype=Object.create(DecodeStream.prototype),constructor.prototype.getBits=function(bits){for(var b,codeSize=this.codeSize,codeBuf=this.codeBuf,bytes=this.bytes,bytesPos=this.bytesPos;codeSize<bits;)void 0===(b=bytes[bytesPos++])&&error("Bad encoding in flate stream"),codeBuf|=b<<codeSize,codeSize+=8;return b=codeBuf&(1<<bits)-1,this.codeBuf=codeBuf>>bits,this.codeSize=codeSize-=bits,this.bytesPos=bytesPos,b},constructor.prototype.getCode=function(table){for(var codes=table[0],maxLen=table[1],codeSize=this.codeSize,codeBuf=this.codeBuf,bytes=this.bytes,bytesPos=this.bytesPos;codeSize<maxLen;){var b;void 0===(b=bytes[bytesPos++])&&error("Bad encoding in flate stream"),codeBuf|=b<<codeSize,codeSize+=8}var code=codes[codeBuf&(1<<maxLen)-1],codeLen=code>>16,codeVal=65535&code;return(0==codeSize||codeSize<codeLen||0==codeLen)&&error("Bad encoding in flate stream"),this.codeBuf=codeBuf>>codeLen,this.codeSize=codeSize-codeLen,this.bytesPos=bytesPos,codeVal},constructor.prototype.generateHuffmanTable=function(lengths){for(var n=lengths.length,maxLen=0,i=0;i<n;++i)lengths[i]>maxLen&&(maxLen=lengths[i]);for(var size=1<<maxLen,codes=new Uint32Array(size),len=1,code=0,skip=2;len<=maxLen;++len,code<<=1,skip<<=1)for(var val=0;val<n;++val)if(lengths[val]==len){var code2=0,t=code;for(i=0;i<len;++i)code2=code2<<1|1&t,t>>=1;for(i=code2;i<size;i+=skip)codes[i]=len<<16|val;++code}return[codes,maxLen]},constructor.prototype.readBlock=function(){function repeat(stream,array,len,offset,what){for(var repeat=stream.getBits(len)+offset;repeat-- >0;)array[i++]=what}var hdr=this.getBits(3);if(1&hdr&&(this.eof=!0),0!=(hdr>>=1)){var litCodeTable,distCodeTable;if(1==hdr)litCodeTable=fixedLitCodeTab,distCodeTable=fixedDistCodeTab;else if(2==hdr){for(var numLitCodes=this.getBits(5)+257,numDistCodes=this.getBits(5)+1,numCodeLenCodes=this.getBits(4)+4,codeLenCodeLengths=Array(codeLenCodeMap.length),i=0;i<numCodeLenCodes;)codeLenCodeLengths[codeLenCodeMap[i++]]=this.getBits(3);for(var codeLenCodeTab=this.generateHuffmanTable(codeLenCodeLengths),len=0,codes=(i=0,numLitCodes+numDistCodes),codeLengths=new Array(codes);i<codes;){var code=this.getCode(codeLenCodeTab);16==code?repeat(this,codeLengths,2,3,len):17==code?repeat(this,codeLengths,3,3,len=0):18==code?repeat(this,codeLengths,7,11,len=0):codeLengths[i++]=len=code}litCodeTable=this.generateHuffmanTable(codeLengths.slice(0,numLitCodes)),distCodeTable=this.generateHuffmanTable(codeLengths.slice(numLitCodes,codes))}else error("Unknown block type in flate stream");for(var limit=(buffer=this.buffer)?buffer.length:0,pos=this.bufferLength;;){var code1=this.getCode(litCodeTable);if(code1<256)pos+1>=limit&&(limit=(buffer=this.ensureBuffer(pos+1)).length),buffer[pos++]=code1;else{if(256==code1)return void(this.bufferLength=pos);var code2=(code1=lengthDecode[code1-=257])>>16;code2>0&&(code2=this.getBits(code2));len=(65535&code1)+code2;code1=this.getCode(distCodeTable),(code2=(code1=distDecode[code1])>>16)>0&&(code2=this.getBits(code2));var dist=(65535&code1)+code2;pos+len>=limit&&(limit=(buffer=this.ensureBuffer(pos+len)).length);for(var k=0;k<len;++k,++pos)buffer[pos]=buffer[pos-dist]}}}else{var b,bytes=this.bytes,bytesPos=this.bytesPos;void 0===(b=bytes[bytesPos++])&&error("Bad block header in flate stream");var blockLen=b;void 0===(b=bytes[bytesPos++])&&error("Bad block header in flate stream"),blockLen|=b<<8,void 0===(b=bytes[bytesPos++])&&error("Bad block header in flate stream");var check=b;void 0===(b=bytes[bytesPos++])&&error("Bad block header in flate stream"),(check|=b<<8)!=(65535&~blockLen)&&error("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var bufferLength=this.bufferLength,buffer=this.ensureBuffer(bufferLength+blockLen),end=bufferLength+blockLen;this.bufferLength=end;for(var n=bufferLength;n<end;++n){if(void 0===(b=bytes[bytesPos++])){this.eof=!0;break}buffer[n]=b}this.bytesPos=bytesPos}},constructor}}();return function(global){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";void 0===global.btoa&&(global.btoa=function(data){var h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!data)return data;do{h1=(bits=data.charCodeAt(i++)<<16|data.charCodeAt(i++)<<8|data.charCodeAt(i++))>>18&63,h2=bits>>12&63,h3=bits>>6&63,h4=63&bits,tmp_arr[ac++]=b64.charAt(h1)+b64.charAt(h2)+b64.charAt(h3)+b64.charAt(h4)}while(i<data.length);enc=tmp_arr.join("");var r=data.length%3;return(r?enc.slice(0,r-3):enc)+"===".slice(r||3)}),void 0===global.atob&&(global.atob=function(data){var o1,o2,o3,h3,h4,bits,i=0,ac=0,tmp_arr=[];if(!data)return data;data+="";do{o1=(bits=b64.indexOf(data.charAt(i++))<<18|b64.indexOf(data.charAt(i++))<<12|(h3=b64.indexOf(data.charAt(i++)))<<6|(h4=b64.indexOf(data.charAt(i++))))>>16&255,o2=bits>>8&255,o3=255&bits,tmp_arr[ac++]=64==h3?String.fromCharCode(o1):64==h4?String.fromCharCode(o1,o2):String.fromCharCode(o1,o2,o3)}while(i<data.length);return tmp_arr.join("")}),Array.prototype.map||(Array.prototype.map=function(fun){if(void 0===this||null===this||"function"!=typeof fun)throw new TypeError;for(var t=Object(this),len=t.length>>>0,res=new Array(len),thisArg=arguments.length>1?arguments[1]:void 0,i=0;i<len;i++)i in t&&(res[i]=fun.call(thisArg,t[i],i,t));return res}),Array.isArray||(Array.isArray=function(arg){return"[object Array]"===Object.prototype.toString.call(arg)}),Array.prototype.forEach||(Array.prototype.forEach=function(fun,thisArg){if(void 0===this||null===this||"function"!=typeof fun)throw new TypeError;for(var t=Object(this),len=t.length>>>0,i=0;i<len;i++)i in t&&fun.call(thisArg,t[i],i,t)}),Object.keys||(Object.keys=function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!{toString:null}.propertyIsEnumerable("toString"),dontEnums=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],dontEnumsLength=dontEnums.length;return function(obj){if("object"!=typeof obj&&("function"!=typeof obj||null===obj))throw new TypeError;var prop,i,result=[];for(prop in obj)hasOwnProperty.call(obj,prop)&&result.push(prop);if(hasDontEnumBug)for(i=0;i<dontEnumsLength;i++)hasOwnProperty.call(obj,dontEnums[i])&&result.push(dontEnums[i]);return result}}()),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.trimLeft||(String.prototype.trimLeft=function(){return this.replace(/^\s+/g,"")}),String.prototype.trimRight||(String.prototype.trimRight=function(){return this.replace(/\s+$/g,"")})}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0),jsPDF});